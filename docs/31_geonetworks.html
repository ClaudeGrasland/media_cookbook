<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Geonetworks | The media cookbook</title>
  <meta name="description" content="A reminder of some experiments made in 2021" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Geonetworks | The media cookbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A reminder of some experiments made in 2021" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Geonetworks | The media cookbook" />
  
  <meta name="twitter:description" content="A reminder of some experiments made in 2021" />
  

<meta name="author" content="Claude Grasland" />


<meta name="date" content="2021-09-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="22-mediacloud_to_quanteda.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">The Media Cookbook  <em>C. Grasland (2021)</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="21-corpus-mediacloud.html"><a href="21-corpus-mediacloud.html"><i class="fa fa-check"></i><b>2</b> Extraction of data from Media Cloud</a>
<ul>
<li class="chapter" data-level="2.1" data-path="21-corpus-mediacloud.html"><a href="21-corpus-mediacloud.html#selection-of-media-with-source-manager"><i class="fa fa-check"></i><b>2.1</b> Selection of media with source manager</a></li>
<li class="chapter" data-level="2.2" data-path="21-corpus-mediacloud.html"><a href="21-corpus-mediacloud.html#checking-the-stability-through-time"><i class="fa fa-check"></i><b>2.2</b> Checking the stability through time</a></li>
<li class="chapter" data-level="2.3" data-path="21-corpus-mediacloud.html"><a href="21-corpus-mediacloud.html#selection-of-news-specifically-related-to-a-topic-option"><i class="fa fa-check"></i><b>2.3</b> Selection of news specifically related to a topic (option)</a></li>
<li class="chapter" data-level="2.4" data-path="21-corpus-mediacloud.html"><a href="21-corpus-mediacloud.html#download-and-storage-of-news"><i class="fa fa-check"></i><b>2.4</b> Download and storage of news</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html"><i class="fa fa-check"></i><b>3</b> Creation of a quanteda corpus</a>
<ul>
<li class="chapter" data-level="3.1" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#importation-of-text-to-r"><i class="fa fa-check"></i><b>3.1</b> Importation of text to R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#import-with-r-base"><i class="fa fa-check"></i><b>3.1.1</b> Import with R-Base</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#cleaning-of-the-text"><i class="fa fa-check"></i><b>3.2</b> Cleaning of the text</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#encoding-problems"><i class="fa fa-check"></i><b>3.2.1</b> encoding problems</a></li>
<li class="chapter" data-level="3.2.2" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#other-cleaning-actions"><i class="fa fa-check"></i><b>3.2.2</b> Other cleaning actions</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#transformation-in-quanteda-format"><i class="fa fa-check"></i><b>3.3</b> Transformation in quanteda format</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#storage-of-the-quanteda-object"><i class="fa fa-check"></i><b>3.3.1</b> Storage of the quanteda object</a></li>
<li class="chapter" data-level="3.3.2" data-path="22-mediacloud_to_quanteda.html"><a href="22-mediacloud_to_quanteda.html#backtransformation-of-quanteda-to-data.table-or-tibble"><i class="fa fa-check"></i><b>3.3.2</b> Backtransformation of quanteda to data.table or tibble</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="31_geonetworks.html"><a href="31_geonetworks.html"><i class="fa fa-check"></i><b>4</b> Geonetworks</a>
<ul>
<li class="chapter" data-level="4.1" data-path="31_geonetworks.html"><a href="31_geonetworks.html#geotags"><i class="fa fa-check"></i><b>4.1</b> Geotags</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="31_geonetworks.html"><a href="31_geonetworks.html#select-corpus"><i class="fa fa-check"></i><b>4.1.1</b> Select corpus</a></li>
<li class="chapter" data-level="4.1.2" data-path="31_geonetworks.html"><a href="31_geonetworks.html#tokenize"><i class="fa fa-check"></i><b>4.1.2</b> Tokenize</a></li>
<li class="chapter" data-level="4.1.3" data-path="31_geonetworks.html"><a href="31_geonetworks.html#identify-geotags"><i class="fa fa-check"></i><b>4.1.3</b> identify geotags</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="31_geonetworks.html"><a href="31_geonetworks.html#hypercubes"><i class="fa fa-check"></i><b>4.2</b> Hypercubes</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="31_geonetworks.html"><a href="31_geonetworks.html#load-data"><i class="fa fa-check"></i><b>4.2.1</b> Load data</a></li>
<li class="chapter" data-level="4.2.2" data-path="31_geonetworks.html"><a href="31_geonetworks.html#hypercube-function"><i class="fa fa-check"></i><b>4.2.2</b> Hypercube Function</a></li>
<li class="chapter" data-level="4.2.3" data-path="31_geonetworks.html"><a href="31_geonetworks.html#build-hypercube"><i class="fa fa-check"></i><b>4.2.3</b> Build hypercube</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="31_geonetworks.html"><a href="31_geonetworks.html#linkages"><i class="fa fa-check"></i><b>4.3</b> Linkages</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="31_geonetworks.html"><a href="31_geonetworks.html#select-links"><i class="fa fa-check"></i><b>4.3.1</b> Select links</a></li>
<li class="chapter" data-level="4.3.2" data-path="31_geonetworks.html"><a href="31_geonetworks.html#create-interaction-matrix"><i class="fa fa-check"></i><b>4.3.2</b> Create interaction matrix</a></li>
<li class="chapter" data-level="4.3.3" data-path="31_geonetworks.html"><a href="31_geonetworks.html#estimate-random-model"><i class="fa fa-check"></i><b>4.3.3</b> Estimate random model</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="31_geonetworks.html"><a href="31_geonetworks.html#visualization"><i class="fa fa-check"></i><b>4.4</b> Visualization</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="31_geonetworks.html"><a href="31_geonetworks.html#function"><i class="fa fa-check"></i><b>4.4.1</b> Function</a></li>
<li class="chapter" data-level="4.4.2" data-path="31_geonetworks.html"><a href="31_geonetworks.html#raw-network"><i class="fa fa-check"></i><b>4.4.2</b> Raw network</a></li>
<li class="chapter" data-level="4.4.3" data-path="31_geonetworks.html"><a href="31_geonetworks.html#raw-network-without-tunisia"><i class="fa fa-check"></i><b>4.4.3</b> Raw network without Tunisia</a></li>
<li class="chapter" data-level="4.4.4" data-path="31_geonetworks.html"><a href="31_geonetworks.html#preferential-links"><i class="fa fa-check"></i><b>4.4.4</b> Preferential links</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The media cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c31_geonetworks" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Geonetworks</h1>
<p>We present here the program used for the elaboration of networks of states and regions that has been presented at the 3rd IMAGEUN workshop in Paris the 12-13 July 2021.</p>
<div id="geotags" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Geotags</h2>
<p>During this first step, we proceed in three steps to (1) the selection of the corpus, (2) the tokenization and cleaning of the text and (3) the creation of compounds and the extraction of tags related togeographical names.</p>
<div id="select-corpus" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Select corpus</h3>
<p>We load a coprus of title of news stored in quanteda forma</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="31_geonetworks.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load external corpus</span></span>
<span id="cb24-2"><a href="31_geonetworks.html#cb24-2" aria-hidden="true" tabindex="-1"></a>qd<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">&quot;data/corpora/TUN/fr_TUN_ecomag.Rdata&quot;</span>)</span></code></pre></div>
</div>
<div id="tokenize" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Tokenize</h3>
<p>We proceed to a first tokenization with minimal option and we save the results in a file as the time of computation is very long. In the french case, we eliminate the <em>apostrophe</em></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="31_geonetworks.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenize text</span></span>
<span id="cb25-2"><a href="31_geonetworks.html#cb25-2" aria-hidden="true" tabindex="-1"></a>toks<span class="ot">&lt;-</span><span class="fu">tokens</span>(qd)</span>
<span id="cb25-3"><a href="31_geonetworks.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="31_geonetworks.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Split french apostroph</span></span>
<span id="cb25-5"><a href="31_geonetworks.html#cb25-5" aria-hidden="true" tabindex="-1"></a>toks<span class="ot">&lt;-</span> <span class="fu">tokens_split</span>(toks, <span class="st">&quot;&#39;&quot;</span>)</span></code></pre></div>
</div>
<div id="identify-geotags" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> identify geotags</h3>
<p>We produce a list of tags based on a dictionary. To do that it is necessary to transform the keywords in blankspace into compounds. It is also important to add external compounds that can be a problem. List of tags are produced for the whole dictionary but also for the different subtypes. Tags are uique at sentence level.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="31_geonetworks.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load tags dictionary</span></span>
<span id="cb26-2"><a href="31_geonetworks.html#cb26-2" aria-hidden="true" tabindex="-1"></a>tags<span class="ot">&lt;-</span><span class="fu">read.csv2</span>(<span class="st">&quot;data/corpora/TUN/geo_names_fr_V2.csv&quot;</span>, <span class="at">header=</span>T, <span class="at">sep=</span><span class="st">&quot;;&quot;</span>)</span>
<span id="cb26-3"><a href="31_geonetworks.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="31_geonetworks.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="31_geonetworks.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create compounds presents in the dictionnary</span></span>
<span id="cb26-6"><a href="31_geonetworks.html#cb26-6" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span>ntoks<span class="ot">&lt;-</span><span class="fu">ntoken</span>(<span class="fu">tokens</span>(tags<span class="sc">$</span>tokens))</span>
<span id="cb26-7"><a href="31_geonetworks.html#cb26-7" aria-hidden="true" tabindex="-1"></a>sel<span class="ot">&lt;-</span>tags[tags<span class="sc">$</span>ntoks<span class="sc">&gt;</span><span class="dv">1</span>,]</span>
<span id="cb26-8"><a href="31_geonetworks.html#cb26-8" aria-hidden="true" tabindex="-1"></a>toks2<span class="ot">&lt;-</span><span class="fu">tokens_compound</span>(toks, <span class="at">pattern=</span><span class="fu">phrase</span>(sel<span class="sc">$</span>tokens))</span>
<span id="cb26-9"><a href="31_geonetworks.html#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="31_geonetworks.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create other compounds of interest not present in dictionary (e.g. Europe 1)</span></span>
<span id="cb26-11"><a href="31_geonetworks.html#cb26-11" aria-hidden="true" tabindex="-1"></a>comp <span class="ot">&lt;-</span> <span class="fu">phrase</span>(<span class="fu">c</span>(<span class="st">&quot;europe 1&quot;</span>,</span>
<span id="cb26-12"><a href="31_geonetworks.html#cb26-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;france inter&quot;</span>,</span>
<span id="cb26-13"><a href="31_geonetworks.html#cb26-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;union européenne&quot;</span>,</span>
<span id="cb26-14"><a href="31_geonetworks.html#cb26-14" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;conseil de l europe&quot;</span>,</span>
<span id="cb26-15"><a href="31_geonetworks.html#cb26-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;agence france presse&quot;</span>))</span>
<span id="cb26-16"><a href="31_geonetworks.html#cb26-16" aria-hidden="true" tabindex="-1"></a>toks2<span class="ot">&lt;-</span><span class="fu">tokens_compound</span>(toks2, <span class="at">pattern=</span>comp)</span>
<span id="cb26-17"><a href="31_geonetworks.html#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="31_geonetworks.html#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Build dictionnary</span></span>
<span id="cb26-19"><a href="31_geonetworks.html#cb26-19" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span><span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>,<span class="st">&quot;_&quot;</span>,tags<span class="sc">$</span>tokens)</span>
<span id="cb26-20"><a href="31_geonetworks.html#cb26-20" aria-hidden="true" tabindex="-1"></a>dict<span class="ot">&lt;-</span><span class="fu">as.list</span>(keys)</span>
<span id="cb26-21"><a href="31_geonetworks.html#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dict)<span class="ot">&lt;-</span>tags<span class="sc">$</span>code</span>
<span id="cb26-22"><a href="31_geonetworks.html#cb26-22" aria-hidden="true" tabindex="-1"></a>dico<span class="ot">&lt;-</span><span class="fu">dictionary</span>(dict)</span>
<span id="cb26-23"><a href="31_geonetworks.html#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="31_geonetworks.html#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify geo tags (states or reg or org ...)</span></span>
<span id="cb26-25"><a href="31_geonetworks.html#cb26-25" aria-hidden="true" tabindex="-1"></a>toks_tags <span class="ot">&lt;-</span> <span class="fu">tokens_lookup</span>(toks2, dico)</span>
<span id="cb26-26"><a href="31_geonetworks.html#cb26-26" aria-hidden="true" tabindex="-1"></a>toks_tags <span class="ot">&lt;-</span> <span class="fu">lapply</span>(toks_tags, unique)</span>
<span id="cb26-27"><a href="31_geonetworks.html#cb26-27" aria-hidden="true" tabindex="-1"></a>toks_tags<span class="ot">&lt;-</span><span class="fu">as.tokens</span>(toks_tags)</span>
<span id="cb26-28"><a href="31_geonetworks.html#cb26-28" aria-hidden="true" tabindex="-1"></a>list_tags<span class="ot">&lt;-</span><span class="cf">function</span>(x){res<span class="ot">&lt;-</span><span class="fu">paste</span>(x, <span class="at">collapse=</span><span class="st">&#39; &#39;</span>)}</span>
<span id="cb26-29"><a href="31_geonetworks.html#cb26-29" aria-hidden="true" tabindex="-1"></a>qd<span class="sc">$</span>tags<span class="ot">&lt;-</span><span class="fu">as.character</span>(<span class="fu">lapply</span>(toks_tags,<span class="at">FUN=</span>list_tags))</span>
<span id="cb26-30"><a href="31_geonetworks.html#cb26-30" aria-hidden="true" tabindex="-1"></a>qd<span class="sc">$</span>nbtags<span class="ot">&lt;-</span><span class="fu">ntoken</span>(toks_tags)</span>
<span id="cb26-31"><a href="31_geonetworks.html#cb26-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-32"><a href="31_geonetworks.html#cb26-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-33"><a href="31_geonetworks.html#cb26-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Save corpus </span></span>
<span id="cb26-34"><a href="31_geonetworks.html#cb26-34" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(qd,<span class="st">&quot;data/corpora/TUN/fr_TUN_ecomag_geo.Rdata&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="hypercubes" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Hypercubes</h2>
<p>During this second step, we will produce aggregates of news called <em>hypercubes</em> which provide a number of to links between geographical units found in the text. Different options are possible which desserve the creation of a function with parameters.</p>
<div id="load-data" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Load data</h3>
<p>We start from the results of the previous step and we load the dictionary used for tagging and the tags describing the texts</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="31_geonetworks.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load quanteda corpus with geotags</span></span>
<span id="cb27-2"><a href="31_geonetworks.html#cb27-2" aria-hidden="true" tabindex="-1"></a>qd<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">&quot;data/corpora/TUN/fr_TUN_ecomag_geo.Rdata&quot;</span>)</span></code></pre></div>
</div>
<div id="hypercube-function" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Hypercube Function</h3>
<p>We start by the creation of a global hypercube crossing all the geographical tags by media and data, whatever their type (state or region).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="31_geonetworks.html#cb28-1" aria-hidden="true" tabindex="-1"></a>hypercube <span class="ot">&lt;-</span><span class="cf">function</span>(<span class="at">qd =</span> qd,</span>
<span id="cb28-2"><a href="31_geonetworks.html#cb28-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">when =</span> <span class="st">&quot;date&quot;</span>,</span>
<span id="cb28-3"><a href="31_geonetworks.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">when_cut =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb28-4"><a href="31_geonetworks.html#cb28-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">who =</span> <span class="st">&quot;source&quot;</span>,</span>
<span id="cb28-5"><a href="31_geonetworks.html#cb28-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">where1 =</span> <span class="st">&quot;tags&quot;</span>,</span>
<span id="cb28-6"><a href="31_geonetworks.html#cb28-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">where2 =</span> <span class="st">&quot;tags&quot;</span>)</span>
<span id="cb28-7"><a href="31_geonetworks.html#cb28-7" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb28-8"><a href="31_geonetworks.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  {   </span>
<span id="cb28-9"><a href="31_geonetworks.html#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="31_geonetworks.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create data.table accroding to parameter chosen</span></span>
<span id="cb28-11"><a href="31_geonetworks.html#cb28-11" aria-hidden="true" tabindex="-1"></a>  don<span class="ot">&lt;-</span><span class="fu">docvars</span>(qd)</span>
<span id="cb28-12"><a href="31_geonetworks.html#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="31_geonetworks.html#cb28-13" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">data.table</span>(<span class="at">id =</span> <span class="fu">docid</span>(qd),</span>
<span id="cb28-14"><a href="31_geonetworks.html#cb28-14" aria-hidden="true" tabindex="-1"></a>                 <span class="at">who =</span> don[,who],</span>
<span id="cb28-15"><a href="31_geonetworks.html#cb28-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">when =</span> <span class="fu">as.character</span>(<span class="fu">cut</span>(don[,when],<span class="at">breaks=</span>when_cut)),</span>
<span id="cb28-16"><a href="31_geonetworks.html#cb28-16" aria-hidden="true" tabindex="-1"></a>                 <span class="at">where1 =</span> don[,where1],</span>
<span id="cb28-17"><a href="31_geonetworks.html#cb28-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">where2 =</span> don[,where2])</span>
<span id="cb28-18"><a href="31_geonetworks.html#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="31_geonetworks.html#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="31_geonetworks.html#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="31_geonetworks.html#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="co"># add code _no_ for empty fields</span></span>
<span id="cb28-22"><a href="31_geonetworks.html#cb28-22" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>where1[df<span class="sc">$</span>where1<span class="sc">==</span><span class="st">&quot;&quot;</span>]<span class="ot">&lt;-</span><span class="st">&quot;_no_&quot;</span></span>
<span id="cb28-23"><a href="31_geonetworks.html#cb28-23" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>where2[df<span class="sc">$</span>where2<span class="sc">==</span><span class="st">&quot;&quot;</span>]<span class="ot">&lt;-</span><span class="st">&quot;_no_&quot;</span></span>
<span id="cb28-24"><a href="31_geonetworks.html#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="31_geonetworks.html#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="31_geonetworks.html#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="co"># unnest where1</span></span>
<span id="cb28-27"><a href="31_geonetworks.html#cb28-27" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">unnest_tokens</span>(df,where1,where1,<span class="at">to_lower=</span>F)</span>
<span id="cb28-28"><a href="31_geonetworks.html#cb28-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-29"><a href="31_geonetworks.html#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="co"># unnest where2</span></span>
<span id="cb28-30"><a href="31_geonetworks.html#cb28-30" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">unnest_tokens</span>(df,where2,where2,<span class="at">to_lower=</span>F)  </span>
<span id="cb28-31"><a href="31_geonetworks.html#cb28-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-32"><a href="31_geonetworks.html#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="co"># define number of occurence by id</span></span>
<span id="cb28-33"><a href="31_geonetworks.html#cb28-33" aria-hidden="true" tabindex="-1"></a>  nb<span class="ot">&lt;-</span>df[,.N,<span class="fu">list</span>(id)] <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">wgt =</span> <span class="dv">1</span><span class="sc">/</span>N) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>N)</span>
<span id="cb28-34"><a href="31_geonetworks.html#cb28-34" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span>df <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(nb) </span>
<span id="cb28-35"><a href="31_geonetworks.html#cb28-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-36"><a href="31_geonetworks.html#cb28-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(nb)</span>
<span id="cb28-37"><a href="31_geonetworks.html#cb28-37" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb28-38"><a href="31_geonetworks.html#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate</span></span>
<span id="cb28-39"><a href="31_geonetworks.html#cb28-39" aria-hidden="true" tabindex="-1"></a>  hc<span class="ot">&lt;-</span> df[,.( <span class="at">tags =</span> .N, <span class="at">news=</span><span class="fu">sum</span>(wgt)) ,.(who, when,where1,where2)]</span>
<span id="cb28-40"><a href="31_geonetworks.html#cb28-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-41"><a href="31_geonetworks.html#cb28-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert date to time</span></span>
<span id="cb28-42"><a href="31_geonetworks.html#cb28-42" aria-hidden="true" tabindex="-1"></a>  hc<span class="sc">$</span>when<span class="ot">&lt;-</span><span class="fu">as.Date</span>(hc<span class="sc">$</span>when)</span>
<span id="cb28-43"><a href="31_geonetworks.html#cb28-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-44"><a href="31_geonetworks.html#cb28-44" aria-hidden="true" tabindex="-1"></a><span class="co"># return hypercube</span></span>
<span id="cb28-45"><a href="31_geonetworks.html#cb28-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(hc)</span>
<span id="cb28-46"><a href="31_geonetworks.html#cb28-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-47"><a href="31_geonetworks.html#cb28-47" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="build-hypercube" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Build hypercube</h3>
<p>Depending on the hypothesis, different types of hypercubes can be quickly created with the function. This hypercube is dedicated to the creation of a full network linking geographical tags. We present here an example where we mix all geo names (states and regions together). But we can further create differences between links relating states, links relating regions, linkes relating states and regions, etc.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="31_geonetworks.html#cb29-1" aria-hidden="true" tabindex="-1"></a>hc_geo_geo <span class="ot">&lt;-</span> <span class="fu">hypercube</span>(<span class="at">qd =</span> qd,</span>
<span id="cb29-2"><a href="31_geonetworks.html#cb29-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">when =</span> <span class="st">&quot;date&quot;</span>,</span>
<span id="cb29-3"><a href="31_geonetworks.html#cb29-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">when_cut =</span> <span class="st">&quot;months&quot;</span>,</span>
<span id="cb29-4"><a href="31_geonetworks.html#cb29-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">who =</span> <span class="st">&quot;source&quot;</span>,</span>
<span id="cb29-5"><a href="31_geonetworks.html#cb29-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">where1 =</span> <span class="st">&quot;tags&quot;</span>,</span>
<span id="cb29-6"><a href="31_geonetworks.html#cb29-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">where2 =</span> <span class="st">&quot;tags&quot;</span>)</span>
<span id="cb29-7"><a href="31_geonetworks.html#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="31_geonetworks.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hc_geo_geo)</span></code></pre></div>
<pre><code>FALSE              who       when    where1    where2 tags   news
FALSE 1: fr_TUN_ecomag 2019-01-01      _no_      _no_  157 157.00
FALSE 2: fr_TUN_ecomag 2019-01-01       TUN       TUN   21  18.75
FALSE 3: fr_TUN_ecomag 2019-01-01 XX_sahara XX_sahara    1   1.00
FALSE 4: fr_TUN_ecomag 2019-01-01       MAR       MAR    2   2.00
FALSE 5: fr_TUN_ecomag 2019-01-01       TUN XX_maghre    1   0.25
FALSE 6: fr_TUN_ecomag 2019-01-01 XX_maghre       TUN    1   0.25</code></pre>
</div>
</div>
<div id="linkages" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Linkages</h2>
<p>The objective of this step is to propose a random model of allocation of linkages between two groups of geographical units that can be the same or different. We start from an hypercube (<em>see. step 2</em>) which is transformed into an interaction matrix where a double constraint model is applied. Different options are introduced, in particular for the filtering of geographical units wit small number of occurences. As in previous section, we propose a function dedicated to the task of estimation of the model of interest.</p>
<div id="select-links" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Select links</h3>
<p>We want to produce a selection of the hypercube data set and to normalize the datain order to keep only two columns of location corresponding to <code>where1</code>, <code>where2</code>. The function will also help us to select data according to the dimensions who and when and the possible selection or exclusion of elements from where1 and where2</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="31_geonetworks.html#cb31-1" aria-hidden="true" tabindex="-1"></a>hc_filter <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">don =</span> hc,</span>
<span id="cb31-2"><a href="31_geonetworks.html#cb31-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">who =</span> <span class="st">&quot;who&quot;</span>,</span>
<span id="cb31-3"><a href="31_geonetworks.html#cb31-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">when =</span> <span class="st">&quot;when&quot;</span>,</span>
<span id="cb31-4"><a href="31_geonetworks.html#cb31-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where1 =</span> <span class="st">&quot;where1&quot;</span>,</span>
<span id="cb31-5"><a href="31_geonetworks.html#cb31-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where2 =</span> <span class="st">&quot;where2&quot;</span>,</span>
<span id="cb31-6"><a href="31_geonetworks.html#cb31-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">wgt =</span> <span class="st">&quot;tags&quot;</span>,</span>
<span id="cb31-7"><a href="31_geonetworks.html#cb31-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">self =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-8"><a href="31_geonetworks.html#cb31-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">when_start =</span> <span class="cn">NA</span>,</span>
<span id="cb31-9"><a href="31_geonetworks.html#cb31-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">when_end =</span> <span class="cn">NA</span>,</span>
<span id="cb31-10"><a href="31_geonetworks.html#cb31-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">who_exc =</span> <span class="cn">NA</span>,</span>
<span id="cb31-11"><a href="31_geonetworks.html#cb31-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">who_inc =</span> <span class="cn">NA</span>,</span>
<span id="cb31-12"><a href="31_geonetworks.html#cb31-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where1_exc =</span> <span class="cn">NA</span>,</span>
<span id="cb31-13"><a href="31_geonetworks.html#cb31-13" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where1_inc =</span> <span class="cn">NA</span>,</span>
<span id="cb31-14"><a href="31_geonetworks.html#cb31-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where2_exc =</span> <span class="cn">NA</span>,</span>
<span id="cb31-15"><a href="31_geonetworks.html#cb31-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">where2_inc =</span> <span class="cn">NA</span>)</span>
<span id="cb31-16"><a href="31_geonetworks.html#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="31_geonetworks.html#cb31-17" aria-hidden="true" tabindex="-1"></a>  {                          </span>
<span id="cb31-18"><a href="31_geonetworks.html#cb31-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-19"><a href="31_geonetworks.html#cb31-19" aria-hidden="true" tabindex="-1"></a>    df<span class="ot">&lt;-</span><span class="fu">data.table</span>(<span class="at">who =</span> don[[who]],</span>
<span id="cb31-20"><a href="31_geonetworks.html#cb31-20" aria-hidden="true" tabindex="-1"></a>                   <span class="at">when =</span> don[[when]],</span>
<span id="cb31-21"><a href="31_geonetworks.html#cb31-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">where1 =</span> don[[where1]],</span>
<span id="cb31-22"><a href="31_geonetworks.html#cb31-22" aria-hidden="true" tabindex="-1"></a>                   <span class="at">where2 =</span> don[[where2]],</span>
<span id="cb31-23"><a href="31_geonetworks.html#cb31-23" aria-hidden="true" tabindex="-1"></a>                   <span class="at">wgt =</span> don[[wgt]])</span>
<span id="cb31-24"><a href="31_geonetworks.html#cb31-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-25"><a href="31_geonetworks.html#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select time period</span></span>
<span id="cb31-26"><a href="31_geonetworks.html#cb31-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(when_start)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-27"><a href="31_geonetworks.html#cb31-27" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[when <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(when_start), ]}</span>
<span id="cb31-28"><a href="31_geonetworks.html#cb31-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(when_end)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-29"><a href="31_geonetworks.html#cb31-29" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[when <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(when_end), ]}</span>
<span id="cb31-30"><a href="31_geonetworks.html#cb31-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select who</span></span>
<span id="cb31-31"><a href="31_geonetworks.html#cb31-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(who_exc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-32"><a href="31_geonetworks.html#cb31-32" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[<span class="sc">!</span>(who <span class="sc">%in%</span> who_exc), ]}</span>
<span id="cb31-33"><a href="31_geonetworks.html#cb31-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(who_inc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-34"><a href="31_geonetworks.html#cb31-34" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[(who <span class="sc">%in%</span> who_inc), ]}</span>
<span id="cb31-35"><a href="31_geonetworks.html#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select where1</span></span>
<span id="cb31-36"><a href="31_geonetworks.html#cb31-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(where1_exc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-37"><a href="31_geonetworks.html#cb31-37" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[<span class="sc">!</span>(where1 <span class="sc">%in%</span> where1_exc), ]}</span>
<span id="cb31-38"><a href="31_geonetworks.html#cb31-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(where1_inc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-39"><a href="31_geonetworks.html#cb31-39" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[(where1 <span class="sc">%in%</span> where1_inc), ]}</span>
<span id="cb31-40"><a href="31_geonetworks.html#cb31-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select where2</span></span>
<span id="cb31-41"><a href="31_geonetworks.html#cb31-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(where2_exc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-42"><a href="31_geonetworks.html#cb31-42" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[<span class="sc">!</span>(where2 <span class="sc">%in%</span> where2_exc), ]}</span>
<span id="cb31-43"><a href="31_geonetworks.html#cb31-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(where2_inc)<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-44"><a href="31_geonetworks.html#cb31-44" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[(where2 <span class="sc">%in%</span> where2_inc), ]}</span>
<span id="cb31-45"><a href="31_geonetworks.html#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># eliminate internal links</span></span>
<span id="cb31-46"><a href="31_geonetworks.html#cb31-46" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> (self<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb31-47"><a href="31_geonetworks.html#cb31-47" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> df[(where1 <span class="sc">!=</span> where2), ]}</span>
<span id="cb31-48"><a href="31_geonetworks.html#cb31-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(df)</span>
<span id="cb31-49"><a href="31_geonetworks.html#cb31-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-50"><a href="31_geonetworks.html#cb31-50" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Application now:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="31_geonetworks.html#cb32-1" aria-hidden="true" tabindex="-1"></a>hc<span class="ot">&lt;-</span><span class="fu">hc_filter</span>(<span class="at">don =</span> hc_geo_geo,</span>
<span id="cb32-2"><a href="31_geonetworks.html#cb32-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">wgt =</span> <span class="st">&quot;tags&quot;</span>,</span>
<span id="cb32-3"><a href="31_geonetworks.html#cb32-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">where1_exc =</span> <span class="fu">c</span>(<span class="st">&quot;_no_&quot;</span>),</span>
<span id="cb32-4"><a href="31_geonetworks.html#cb32-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">where2_exc =</span> <span class="fu">c</span>(<span class="st">&quot;_no_&quot;</span>),</span>
<span id="cb32-5"><a href="31_geonetworks.html#cb32-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">self =</span> <span class="cn">FALSE</span></span>
<span id="cb32-6"><a href="31_geonetworks.html#cb32-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>`</p>
</div>
<div id="create-interaction-matrix" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Create interaction matrix</h3>
<p>Now, we transform the data in a matrix of interaction (i,j,Fij) whre we fill with 0 the empty cells. After that we eliminate the lines and columns wich do not fulfill one of the two conditions of salience and diversity :</p>
<ul>
<li><strong>Salience (s1,s2)</strong> : For example, we will eliminate a country that has not be mentioned at less 20 times in the news. To do that, we compute the marginal sums of the matrix in lines (1) and columns (2) and we check if the condition is fulfilled.<br />
</li>
<li><strong>Diversity (n1,n2,k)</strong> : We consider that a linkage between units i and j exist if Fij &gt; k. Then we compute the number of links where the condition is verified in lines (1) and columns. To do that we compute a boolean matrix where the value are 0 if Fij &lt; k and 1 if Fi &gt;= k. And we verify if the marginal sums of the matrix verify the conditions n1 and n2.</li>
</ul>
<p>The default values are</p>
<ul>
<li>s1 = s2 = 5</li>
<li>n1 = n2 = 3</li>
<li>k = 0</li>
</ul>
<p>They depend from the type of weight used. The previous parameter are adapted to the case where we use fractions of news as weighting criteria. They should be higher if we decide to use the number of tags.</p>
<p>To do that, we create a specific function called <code>build_mat</code> .</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="31_geonetworks.html#cb33-1" aria-hidden="true" tabindex="-1"></a>build_int <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">don =</span> don,       <span class="co"># a dataframe with columns i, j , Fij</span></span>
<span id="cb33-2"><a href="31_geonetworks.html#cb33-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">i =</span> <span class="st">&quot;where1&quot;</span>,</span>
<span id="cb33-3"><a href="31_geonetworks.html#cb33-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">j =</span> <span class="st">&quot;where2&quot;</span>,</span>
<span id="cb33-4"><a href="31_geonetworks.html#cb33-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Fij =</span> <span class="st">&quot;wgt&quot;</span>,</span>
<span id="cb33-5"><a href="31_geonetworks.html#cb33-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">s1 =</span> <span class="dv">1</span>,</span>
<span id="cb33-6"><a href="31_geonetworks.html#cb33-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">s2 =</span> <span class="dv">1</span>,</span>
<span id="cb33-7"><a href="31_geonetworks.html#cb33-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">n1 =</span> <span class="dv">1</span>,</span>
<span id="cb33-8"><a href="31_geonetworks.html#cb33-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">n2 =</span> <span class="dv">1</span>,</span>
<span id="cb33-9"><a href="31_geonetworks.html#cb33-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">k =</span> <span class="dv">0</span>)</span>
<span id="cb33-10"><a href="31_geonetworks.html#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="31_geonetworks.html#cb33-11" aria-hidden="true" tabindex="-1"></a>{  </span>
<span id="cb33-12"><a href="31_geonetworks.html#cb33-12" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span><span class="fu">data.table</span>(<span class="at">i=</span>don[[i]],<span class="at">j=</span>don[[j]],<span class="at">Fij=</span>don[[Fij]])</span>
<span id="cb33-13"><a href="31_geonetworks.html#cb33-13" aria-hidden="true" tabindex="-1"></a>  int <span class="ot">&lt;-</span>df[,.(<span class="at">Fij=</span><span class="fu">sum</span>(Fij)),.(i,j)]</span>
<span id="cb33-14"><a href="31_geonetworks.html#cb33-14" aria-hidden="true" tabindex="-1"></a>  int<span class="ot">&lt;-</span><span class="fu">dcast</span>(int,<span class="at">formula =</span> i<span class="sc">~</span>j,<span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb33-15"><a href="31_geonetworks.html#cb33-15" aria-hidden="true" tabindex="-1"></a>  mat<span class="ot">&lt;-</span><span class="fu">as.matrix</span>(int[,<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb33-16"><a href="31_geonetworks.html#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row.names</span>(mat)<span class="ot">&lt;-</span>int<span class="sc">$</span>i</span>
<span id="cb33-17"><a href="31_geonetworks.html#cb33-17" aria-hidden="true" tabindex="-1"></a>  mat<span class="ot">&lt;-</span>mat[<span class="fu">apply</span>(mat,<span class="dv">1</span>,sum)<span class="sc">&gt;=</span>s1,<span class="fu">apply</span>(mat,<span class="dv">2</span>,sum)<span class="sc">&gt;=</span>s2 ]</span>
<span id="cb33-18"><a href="31_geonetworks.html#cb33-18" aria-hidden="true" tabindex="-1"></a>  m0<span class="ot">&lt;-</span>mat</span>
<span id="cb33-19"><a href="31_geonetworks.html#cb33-19" aria-hidden="true" tabindex="-1"></a>  m0[m0<span class="sc">&lt;</span>k]<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb33-20"><a href="31_geonetworks.html#cb33-20" aria-hidden="true" tabindex="-1"></a>  m0[m0<span class="sc">&gt;=</span>k]<span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb33-21"><a href="31_geonetworks.html#cb33-21" aria-hidden="true" tabindex="-1"></a>  mat<span class="ot">&lt;-</span>mat[<span class="fu">apply</span>(m0,<span class="dv">1</span>,sum)<span class="sc">&gt;=</span>n1,<span class="fu">apply</span>(m0,<span class="dv">2</span>,sum)<span class="sc">&gt;=</span>n2 ]</span>
<span id="cb33-22"><a href="31_geonetworks.html#cb33-22" aria-hidden="true" tabindex="-1"></a>  int<span class="ot">&lt;-</span><span class="fu">melt</span>(mat)</span>
<span id="cb33-23"><a href="31_geonetworks.html#cb33-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(int) <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;i&quot;</span>,<span class="st">&quot;j&quot;</span>,<span class="st">&quot;Fij&quot;</span>)</span>
<span id="cb33-24"><a href="31_geonetworks.html#cb33-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(int)</span>
<span id="cb33-25"><a href="31_geonetworks.html#cb33-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Application now:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="31_geonetworks.html#cb34-1" aria-hidden="true" tabindex="-1"></a>int <span class="ot">&lt;-</span> <span class="fu">build_int</span>(<span class="at">don =</span> hc,</span>
<span id="cb34-2"><a href="31_geonetworks.html#cb34-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">s1=</span><span class="dv">1</span>,</span>
<span id="cb34-3"><a href="31_geonetworks.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">s2=</span><span class="dv">1</span>,</span>
<span id="cb34-4"><a href="31_geonetworks.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">n1=</span><span class="dv">1</span>,</span>
<span id="cb34-5"><a href="31_geonetworks.html#cb34-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">n2=</span><span class="dv">1</span>,</span>
<span id="cb34-6"><a href="31_geonetworks.html#cb34-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">k=</span><span class="dv">0</span>)</span>
<span id="cb34-7"><a href="31_geonetworks.html#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(int)</span></code></pre></div>
<pre><code>FALSE         i   j Fij
FALSE 1     AFG AFG   0
FALSE 2 AFRIQUE AFG   0
FALSE 3 AF_nord AFG   0
FALSE 4     AGO AFG   0
FALSE 5    ASIE AFG   1
FALSE 6     AUS AFG   0</code></pre>
</div>
<div id="estimate-random-model" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Estimate random model</h3>
<p>We can now solve the model and compute the most important and significant residuals according to various criteria. We will therefore build a model where i, j and Fij will be completed by a column Eij which describe the expected number of news where i and j would be associated if the allocation was made randomly.</p>
<p>It is important to check if the size of the matrix is not too large, in order to avoid computational crash … As a security, we introduce a parameter <code>maxsize = 100000</code> defined by the product of numer of lines and columns… If you decide to increase this parameter, it is at your own risk …</p>
<p>When i and j describe the same spatial units (e.g. state x state or reg x reg), it can be important to eliminate the diagonal if it is empty or if we decide to focus only on external relations between geographical objects. For this reason, we introduce a parameter <code>diag</code> = TRUE or FALSE in the function <code>rand_int()</code> that solves the model</p>
<p>We can eventually add to the data set further columns related to the residuals measures in different forms if we activate the parameter <code>resid=TRUE</code> :</p>
<ul>
<li>Rabs_ij = Fij-Eij : absolute residuals</li>
<li>Rrel_ij = Fij/Eij : relative residuals</li>
<li>Rchi_ij = sign(R_absij) x (Rabs_ij)^2 / Eij</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="31_geonetworks.html#cb36-1" aria-hidden="true" tabindex="-1"></a>rand_int <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">int =</span> int, <span class="co"># A table with columns i, j Fij</span></span>
<span id="cb36-2"><a href="31_geonetworks.html#cb36-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">maxsize =</span> <span class="dv">100000</span>,</span>
<span id="cb36-3"><a href="31_geonetworks.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">diag    =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-4"><a href="31_geonetworks.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">resid   =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb36-5"><a href="31_geonetworks.html#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Eliminate diagonal ?</span></span>
<span id="cb36-6"><a href="31_geonetworks.html#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (diag<span class="sc">==</span><span class="cn">FALSE</span>) { </span>
<span id="cb36-7"><a href="31_geonetworks.html#cb36-7" aria-hidden="true" tabindex="-1"></a>        int <span class="ot">&lt;-</span> int[<span class="fu">as.character</span>(int<span class="sc">$</span>i) <span class="sc">!=</span> <span class="fu">as.character</span>(int<span class="sc">$</span>j), ]}</span>
<span id="cb36-8"><a href="31_geonetworks.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-9"><a href="31_geonetworks.html#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute model if size not too large</span></span>
<span id="cb36-10"><a href="31_geonetworks.html#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">dim</span>(int)[<span class="dv">1</span>] <span class="sc">&lt;</span> maxsize) {</span>
<span id="cb36-11"><a href="31_geonetworks.html#cb36-11" aria-hidden="true" tabindex="-1"></a>       <span class="co"># Proceed to poisson regression model</span></span>
<span id="cb36-12"><a href="31_geonetworks.html#cb36-12" aria-hidden="true" tabindex="-1"></a>       mod <span class="ot">&lt;-</span> <span class="fu">glm</span>( <span class="at">formula =</span> Fij <span class="sc">~</span> i <span class="sc">+</span> j,<span class="at">family =</span> <span class="st">&quot;poisson&quot;</span>, <span class="at">data =</span> int)</span>
<span id="cb36-13"><a href="31_geonetworks.html#cb36-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-14"><a href="31_geonetworks.html#cb36-14" aria-hidden="true" tabindex="-1"></a>       <span class="co"># Add residuals if requested</span></span>
<span id="cb36-15"><a href="31_geonetworks.html#cb36-15" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span>(resid <span class="sc">==</span> <span class="cn">TRUE</span>)   { </span>
<span id="cb36-16"><a href="31_geonetworks.html#cb36-16" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Add estimates</span></span>
<span id="cb36-17"><a href="31_geonetworks.html#cb36-17" aria-hidden="true" tabindex="-1"></a>          int<span class="sc">$</span>Eij <span class="ot">&lt;-</span> mod<span class="sc">$</span>fitted.values</span>
<span id="cb36-18"><a href="31_geonetworks.html#cb36-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-19"><a href="31_geonetworks.html#cb36-19" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Add absolute residuals</span></span>
<span id="cb36-20"><a href="31_geonetworks.html#cb36-20" aria-hidden="true" tabindex="-1"></a>          int<span class="sc">$</span>Rabs_ij <span class="ot">&lt;-</span> int<span class="sc">$</span>Fij<span class="sc">-</span>int<span class="sc">$</span>Eij</span>
<span id="cb36-21"><a href="31_geonetworks.html#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="31_geonetworks.html#cb36-22" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Add relative residuals</span></span>
<span id="cb36-23"><a href="31_geonetworks.html#cb36-23" aria-hidden="true" tabindex="-1"></a>          int<span class="sc">$</span>Rrel_ij <span class="ot">&lt;-</span> int<span class="sc">$</span>Fij<span class="sc">/</span>int<span class="sc">$</span>Eij</span>
<span id="cb36-24"><a href="31_geonetworks.html#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="31_geonetworks.html#cb36-25" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Add chi-square residuals</span></span>
<span id="cb36-26"><a href="31_geonetworks.html#cb36-26" aria-hidden="true" tabindex="-1"></a>          int<span class="sc">$</span>Rchi_ij <span class="ot">&lt;-</span>  (int<span class="sc">$</span>Rabs_ij)<span class="sc">**</span><span class="dv">2</span> <span class="sc">/</span> int<span class="sc">$</span>Eij</span>
<span id="cb36-27"><a href="31_geonetworks.html#cb36-27" aria-hidden="true" tabindex="-1"></a>          int<span class="sc">$</span>Rchi_ij[int<span class="sc">$</span>Rabs_ij<span class="sc">&lt;</span><span class="dv">0</span>]<span class="ot">&lt;-</span> <span class="sc">-</span>int<span class="sc">$</span>Rchi_ij[int<span class="sc">$</span>Rabs_ij<span class="sc">&lt;</span><span class="dv">0</span>]</span>
<span id="cb36-28"><a href="31_geonetworks.html#cb36-28" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb36-29"><a href="31_geonetworks.html#cb36-29" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb36-30"><a href="31_geonetworks.html#cb36-30" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> { <span class="fu">paste</span> (<span class="st">&quot;Table &gt; 100000 -  </span><span class="sc">\n</span><span class="st"> </span></span>
<span id="cb36-31"><a href="31_geonetworks.html#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="st">                     modify maxsize =  parameter </span><span class="sc">\n</span></span>
<span id="cb36-32"><a href="31_geonetworks.html#cb36-32" aria-hidden="true" tabindex="-1"></a><span class="st">                     if you are sure that your computer can do it !&quot;</span>)}</span>
<span id="cb36-33"><a href="31_geonetworks.html#cb36-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Export results</span></span>
<span id="cb36-34"><a href="31_geonetworks.html#cb36-34" aria-hidden="true" tabindex="-1"></a>  int<span class="sc">$</span>i<span class="ot">&lt;-</span><span class="fu">as.character</span>(int<span class="sc">$</span>i)</span>
<span id="cb36-35"><a href="31_geonetworks.html#cb36-35" aria-hidden="true" tabindex="-1"></a>  int<span class="sc">$</span>j<span class="ot">&lt;-</span><span class="fu">as.character</span>(int<span class="sc">$</span>j)</span>
<span id="cb36-36"><a href="31_geonetworks.html#cb36-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(int)</span>
<span id="cb36-37"><a href="31_geonetworks.html#cb36-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-38"><a href="31_geonetworks.html#cb36-38" aria-hidden="true" tabindex="-1"></a> }</span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="31_geonetworks.html#cb37-1" aria-hidden="true" tabindex="-1"></a>mod<span class="ot">&lt;-</span><span class="fu">rand_int</span>(int,</span>
<span id="cb37-2"><a href="31_geonetworks.html#cb37-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">resid =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-3"><a href="31_geonetworks.html#cb37-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">diag =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>We can have a look at the more important positive residuals in absolute value :</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="31_geonetworks.html#cb38-1" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span>mod[<span class="fu">order</span>(<span class="sc">-</span>mod<span class="sc">$</span>Rabs_ij),]</span>
<span id="cb38-2"><a href="31_geonetworks.html#cb38-2" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span>tab[(tab<span class="sc">$</span>i <span class="sc">&gt;</span> tab<span class="sc">$</span>j),]</span>
<span id="cb38-3"><a href="31_geonetworks.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(tab,<span class="dv">10</span>) , <span class="at">digits=</span><span class="dv">2</span>, <span class="at">caption =</span> <span class="st">&quot;Positive residuals&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-29">Table 4.1: </span>Positive residuals</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">i</th>
<th align="left">j</th>
<th align="right">Fij</th>
<th align="right">Eij</th>
<th align="right">Rabs_ij</th>
<th align="right">Rrel_ij</th>
<th align="right">Rchi_ij</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">117</td>
<td align="left">XX_moyori</td>
<td align="left">AFRIQUE</td>
<td align="right">6</td>
<td align="right">0.61</td>
<td align="right">5.39</td>
<td align="right">9.85</td>
<td align="right">47.72</td>
</tr>
<tr class="even">
<td align="left">1971</td>
<td align="left">TUN</td>
<td align="left">LBY</td>
<td align="right">16</td>
<td align="right">11.42</td>
<td align="right">4.58</td>
<td align="right">1.40</td>
<td align="right">1.83</td>
</tr>
<tr class="odd">
<td align="left">1311</td>
<td align="left">TUN</td>
<td align="left">FRA</td>
<td align="right">26</td>
<td align="right">22.11</td>
<td align="right">3.89</td>
<td align="right">1.18</td>
<td align="right">0.69</td>
</tr>
<tr class="even">
<td align="left">1071</td>
<td align="left">TUN</td>
<td align="left">DEU</td>
<td align="right">14</td>
<td align="right">10.20</td>
<td align="right">3.80</td>
<td align="right">1.37</td>
<td align="right">1.42</td>
</tr>
<tr class="odd">
<td align="left">1911</td>
<td align="left">TUN</td>
<td align="left">JPN</td>
<td align="right">7</td>
<td align="right">4.15</td>
<td align="right">2.85</td>
<td align="right">1.69</td>
<td align="right">1.96</td>
</tr>
<tr class="even">
<td align="left">834</td>
<td align="left">USA</td>
<td align="left">CHN</td>
<td align="right">3</td>
<td align="right">0.24</td>
<td align="right">2.76</td>
<td align="right">12.26</td>
<td align="right">31.03</td>
</tr>
<tr class="odd">
<td align="left">2031</td>
<td align="left">TUN</td>
<td align="left">MAR</td>
<td align="right">12</td>
<td align="right">9.58</td>
<td align="right">2.42</td>
<td align="right">1.25</td>
<td align="right">0.61</td>
</tr>
<tr class="even">
<td align="left">1851</td>
<td align="left">TUN</td>
<td align="left">JOR</td>
<td align="right">5</td>
<td align="right">2.96</td>
<td align="right">2.04</td>
<td align="right">1.69</td>
<td align="right">1.41</td>
</tr>
<tr class="odd">
<td align="left">177</td>
<td align="left">XX_moyori</td>
<td align="left">AF_nord</td>
<td align="right">2</td>
<td align="right">0.07</td>
<td align="right">1.93</td>
<td align="right">28.94</td>
<td align="right">53.96</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">ITA</td>
<td align="left">GBR_ENG</td>
<td align="right">2</td>
<td align="right">0.07</td>
<td align="right">1.93</td>
<td align="right">28.80</td>
<td align="right">53.68</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="visualization" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Visualization</h2>
<div id="function" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Function</h3>
<p>We have created a prototype of geonetwork visualization function with different parameters making possible to display different graphs.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="31_geonetworks.html#cb39-1" aria-hidden="true" tabindex="-1"></a>geo_network<span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">don =</span> don,</span>
<span id="cb39-2"><a href="31_geonetworks.html#cb39-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">from =</span> <span class="st">&quot;i&quot;</span>,</span>
<span id="cb39-3"><a href="31_geonetworks.html#cb39-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">to =</span> <span class="st">&quot;j&quot;</span>, </span>
<span id="cb39-4"><a href="31_geonetworks.html#cb39-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">size =</span> <span class="st">&quot;Fij&quot;</span>,</span>
<span id="cb39-5"><a href="31_geonetworks.html#cb39-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">minsize =</span> <span class="dv">1</span>,</span>
<span id="cb39-6"><a href="31_geonetworks.html#cb39-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">maxsize =</span> <span class="cn">NA</span>,</span>
<span id="cb39-7"><a href="31_geonetworks.html#cb39-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">test =</span> <span class="st">&quot;Fij&quot;</span>,</span>
<span id="cb39-8"><a href="31_geonetworks.html#cb39-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mintest =</span> <span class="dv">1</span>,</span>
<span id="cb39-9"><a href="31_geonetworks.html#cb39-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">loops  =</span> <span class="cn">FALSE</span>, </span>
<span id="cb39-10"><a href="31_geonetworks.html#cb39-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title =</span> <span class="st">&quot;Network&quot;</span>)</span>
<span id="cb39-11"><a href="31_geonetworks.html#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="31_geonetworks.html#cb39-12" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb39-13"><a href="31_geonetworks.html#cb39-13" aria-hidden="true" tabindex="-1"></a>int<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">i =</span> <span class="fu">as.character</span>(don[,from]),</span>
<span id="cb39-14"><a href="31_geonetworks.html#cb39-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">j =</span> <span class="fu">as.character</span>(don[,to]),</span>
<span id="cb39-15"><a href="31_geonetworks.html#cb39-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> don[,size],</span>
<span id="cb39-16"><a href="31_geonetworks.html#cb39-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> don[,test]</span>
<span id="cb39-17"><a href="31_geonetworks.html#cb39-17" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb39-18"><a href="31_geonetworks.html#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.na</span>(minsize)<span class="sc">==</span><span class="cn">FALSE</span>) {int <span class="ot">=</span>int[int<span class="sc">$</span>size <span class="sc">&gt;=</span> minsize,]} </span>
<span id="cb39-19"><a href="31_geonetworks.html#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.na</span>(maxsize)<span class="sc">==</span><span class="cn">FALSE</span>) {int <span class="ot">=</span>int[int<span class="sc">$</span>size <span class="sc">&lt;=</span> maxsize,]} </span>
<span id="cb39-20"><a href="31_geonetworks.html#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.na</span>(mintest)<span class="sc">==</span><span class="cn">FALSE</span>) {int <span class="ot">=</span>int[int<span class="sc">$</span>test <span class="sc">&gt;=</span> mintest,]}</span>
<span id="cb39-21"><a href="31_geonetworks.html#cb39-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-22"><a href="31_geonetworks.html#cb39-22" aria-hidden="true" tabindex="-1"></a>nodes<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">code =</span> <span class="fu">unique</span>(<span class="fu">c</span>(int<span class="sc">$</span>i,int<span class="sc">$</span>j)))</span>
<span id="cb39-23"><a href="31_geonetworks.html#cb39-23" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>code<span class="ot">&lt;-</span><span class="fu">as.character</span>(nodes<span class="sc">$</span>code)</span>
<span id="cb39-24"><a href="31_geonetworks.html#cb39-24" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>id<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(nodes<span class="sc">$</span>code)</span>
<span id="cb39-25"><a href="31_geonetworks.html#cb39-25" aria-hidden="true" tabindex="-1"></a>nodes<span class="sc">$</span>label<span class="ot">&lt;-</span>nodes<span class="sc">$</span>code</span>
<span id="cb39-26"><a href="31_geonetworks.html#cb39-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-27"><a href="31_geonetworks.html#cb39-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-28"><a href="31_geonetworks.html#cb39-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust edge codes</span></span>
<span id="cb39-29"><a href="31_geonetworks.html#cb39-29" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> int <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">width =</span> <span class="dv">5</span><span class="sc">+</span><span class="dv">30</span><span class="sc">*</span>size <span class="sc">/</span> <span class="fu">max</span>(size)) <span class="sc">%&gt;%</span></span>
<span id="cb39-30"><a href="31_geonetworks.html#cb39-30" aria-hidden="true" tabindex="-1"></a>                <span class="fu">left_join</span>(nodes <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">i=</span>code, <span class="at">from =</span> id)) <span class="sc">%&gt;%</span>  </span>
<span id="cb39-31"><a href="31_geonetworks.html#cb39-31" aria-hidden="true" tabindex="-1"></a>                <span class="fu">left_join</span>(nodes <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">j=</span>code, <span class="at">to =</span> id )) </span>
<span id="cb39-32"><a href="31_geonetworks.html#cb39-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-33"><a href="31_geonetworks.html#cb39-33" aria-hidden="true" tabindex="-1"></a><span class="co"># compute nodesize</span></span>
<span id="cb39-34"><a href="31_geonetworks.html#cb39-34" aria-hidden="true" tabindex="-1"></a>tot<span class="ot">&lt;-</span>int <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(i) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">size =</span><span class="fu">sum</span> (size)) <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="at">code=</span>i,size)</span>
<span id="cb39-35"><a href="31_geonetworks.html#cb39-35" aria-hidden="true" tabindex="-1"></a>tot<span class="sc">$</span>code<span class="ot">&lt;-</span><span class="fu">as.factor</span>(tot<span class="sc">$</span>code)</span>
<span id="cb39-36"><a href="31_geonetworks.html#cb39-36" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nodes,tot) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">sqrt</span>(<span class="dv">10</span> <span class="sc">*</span>size<span class="sc">/</span><span class="fu">max</span>(size)))</span>
<span id="cb39-37"><a href="31_geonetworks.html#cb39-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-38"><a href="31_geonetworks.html#cb39-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-39"><a href="31_geonetworks.html#cb39-39" aria-hidden="true" tabindex="-1"></a><span class="co">#sel_nodes &lt;-nodes %&gt;% filter(code %in% unique(c(sel_edges$i,sel_edges$j)))</span></span>
<span id="cb39-40"><a href="31_geonetworks.html#cb39-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-41"><a href="31_geonetworks.html#cb39-41" aria-hidden="true" tabindex="-1"></a><span class="co"># eliminate loops</span></span>
<span id="cb39-42"><a href="31_geonetworks.html#cb39-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-43"><a href="31_geonetworks.html#cb39-43" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(loops <span class="sc">==</span> <span class="cn">FALSE</span>) {edges <span class="ot">&lt;-</span> edges[edges<span class="sc">$</span>from <span class="sc">&lt;</span> edges<span class="sc">$</span>to,]}</span>
<span id="cb39-44"><a href="31_geonetworks.html#cb39-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-45"><a href="31_geonetworks.html#cb39-45" aria-hidden="true" tabindex="-1"></a>net<span class="ot">&lt;-</span> <span class="fu">visNetwork</span>(nodes, </span>
<span id="cb39-46"><a href="31_geonetworks.html#cb39-46" aria-hidden="true" tabindex="-1"></a>                  edges, </span>
<span id="cb39-47"><a href="31_geonetworks.html#cb39-47" aria-hidden="true" tabindex="-1"></a>                  <span class="at">main =</span> title,</span>
<span id="cb39-48"><a href="31_geonetworks.html#cb39-48" aria-hidden="true" tabindex="-1"></a><span class="at">height =</span> <span class="st">&quot;700px&quot;</span>, </span>
<span id="cb39-49"><a href="31_geonetworks.html#cb39-49" aria-hidden="true" tabindex="-1"></a>                  <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)   <span class="sc">%&gt;%</span>   </span>
<span id="cb39-50"><a href="31_geonetworks.html#cb39-50" aria-hidden="true" tabindex="-1"></a>   <span class="fu">visNodes</span>(<span class="at">scaling =</span><span class="fu">list</span>(<span class="at">min =</span><span class="dv">20</span>, <span class="at">max=</span><span class="dv">60</span>, </span>
<span id="cb39-51"><a href="31_geonetworks.html#cb39-51" aria-hidden="true" tabindex="-1"></a>                          <span class="at">label=</span><span class="fu">list</span>(<span class="at">min=</span><span class="dv">20</span>,<span class="at">max=</span><span class="dv">80</span>, </span>
<span id="cb39-52"><a href="31_geonetworks.html#cb39-52" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">maxVisible =</span> <span class="dv">20</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb39-53"><a href="31_geonetworks.html#cb39-53" aria-hidden="true" tabindex="-1"></a>       <span class="fu">visOptions</span>(<span class="at">highlightNearest =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-54"><a href="31_geonetworks.html#cb39-54" aria-hidden="true" tabindex="-1"></a>     <span class="co">#               selectedBy = &quot;group&quot;, </span></span>
<span id="cb39-55"><a href="31_geonetworks.html#cb39-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               manipulation = TRUE,</span></span>
<span id="cb39-56"><a href="31_geonetworks.html#cb39-56" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nodesIdSelection =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-57"><a href="31_geonetworks.html#cb39-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">visInteraction</span>(<span class="at">navigationButtons =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-58"><a href="31_geonetworks.html#cb39-58" aria-hidden="true" tabindex="-1"></a>         <span class="fu">visLegend</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-59"><a href="31_geonetworks.html#cb39-59" aria-hidden="true" tabindex="-1"></a>      <span class="fu">visIgraphLayout</span>(<span class="at">layout =</span><span class="st">&quot;layout.fruchterman.reingold&quot;</span>,<span class="at">smooth =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-60"><a href="31_geonetworks.html#cb39-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-61"><a href="31_geonetworks.html#cb39-61" aria-hidden="true" tabindex="-1"></a>net</span>
<span id="cb39-62"><a href="31_geonetworks.html#cb39-62" aria-hidden="true" tabindex="-1"></a> <span class="fu">return</span>(net)</span>
<span id="cb39-63"><a href="31_geonetworks.html#cb39-63" aria-hidden="true" tabindex="-1"></a> } </span></code></pre></div>
</div>
<div id="raw-network" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Raw network</h3>
<p>We can firstly provide a basic view of the network using the default parameters wich visualize all connections greater to zero.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="31_geonetworks.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_network</span>(mod)</span></code></pre></div>
<div id="htmlwidget-cda2353c821c489886c6" style="width:100%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-cda2353c821c489886c6">{"x":{"nodes":{"code":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","TUN","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","ESP","FRA","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","DEU","SDN","IRQ","BFA","SAU","AGO","AUT","BGD","CAF","CPV","GHA","HUN","IND","JOR","JPN","MCO","MLI","MLT","MRT","OMN","POL","PSE","ROU","RUS","UKR","XX_golper","XX_sahara","XX_sahel","SYR","SGP"],"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],"label":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","TUN","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","ESP","FRA","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","DEU","SDN","IRQ","BFA","SAU","AGO","AUT","BGD","CAF","CPV","GHA","HUN","IND","JOR","JPN","MCO","MLI","MLT","MRT","OMN","POL","PSE","ROU","RUS","UKR","XX_golper","XX_sahara","XX_sahel","SYR","SGP"],"size":[7,4,15,15,4,14,10,16,2,215,34,20,4,1,9,4,13,2,8,7,36,3,9,15,7,5,2,19,3,1,17,1,3,1,6,2,1,1,1,1,1,1,1,5,7,1,1,2,2,1,2,1,1,2,1,1,2,2,1,1],"value":[0.570597402157456,0.431331092813754,0.835269069584557,0.835269069584557,0.431331092813754,0.806946584785929,0.681994339470473,0.862662185627507,0.304997140665209,3.16227766016838,1.25753542647403,0.964485644340824,0.431331092813754,0.215665546406877,0.646996639220631,0.431331092813754,0.777593185920953,0.304997140665209,0.609994281330419,0.570597402157456,1.29399327844126,0.373543683818814,0.646996639220631,0.835269069584557,0.570597402157456,0.482242822170412,0.304997140665209,0.940064322391058,0.373543683818814,0.215665546406877,0.8892118276421,0.215665546406877,0.373543683818814,0.215665546406877,0.528270543795374,0.304997140665209,0.215665546406877,0.215665546406877,0.215665546406877,0.215665546406877,0.215665546406877,0.215665546406877,0.215665546406877,0.482242822170412,0.570597402157456,0.215665546406877,0.215665546406877,0.304997140665209,0.304997140665209,0.215665546406877,0.304997140665209,0.215665546406877,0.215665546406877,0.304997140665209,0.215665546406877,0.215665546406877,0.304997140665209,0.304997140665209,0.215665546406877,0.215665546406877],"x":[-0.536921384886173,-0.760255108443677,-0.503445640172223,-0.460785689604176,-0.546213315109314,0.050370696131727,-0.0888948722172724,-0.407256361465664,-0.583730278324307,0.13982495926706,-0.294146544386768,-0.236107222824697,-0.77521772214052,-0.937707948672595,-0.33686576152268,0.688355555227778,0.636029215512644,1,0.137970325495536,-0.043942612885931,-0.330328253992838,0.953889308127577,-0.0274326012454689,0.365821015182447,-0.135738051838519,-0.0862312334600632,0.0335079449187778,-0.237528447927533,-0.247107514069921,-0.160340026110606,-0.134987689201792,-0.817352860408654,0.495668991488414,-0.842505260603824,-0.244714608852249,0.489871485515766,0.375710537702801,0.336301196402707,0.562646144510731,0.197834508314673,-0.0402860352373267,0.163113715830368,0.327381631994299,0.616885361683226,0.423427344881507,0.67792242144256,0.623439610846078,0.364345964837219,0.327832661245792,0.270149854564388,0.0794590171263512,0.485899841606799,-0.0739081424638224,-0.190717055987967,0.543482527330328,0.490269948831997,0.680480454518878,0.69660718701276,-1,0.543277891557844],"y":[0.479578618116339,0.396525179224005,0.321150164687802,0.119812779066462,-0.291708472173743,-0.197395876911291,-0.429000860189086,-0.0375789364620484,-0.728299904123013,0.309682527437011,-0.247808285171568,-0.171097077159171,0.279849286230874,0.815492837943479,0.453423930745296,-0.09919161089061,-0.291917776410952,-0.62592114450147,-0.139318214491825,-0.260681099912283,0.149105364446239,-0.418279106579136,-0.031088654209651,-0.392101875161685,0.0146726313930863,0.562674090245992,0.665008007999381,0.388481346896508,-0.616335201709484,-1,0.207925754032648,-0.0111848961533745,-0.128803986397597,-0.344534287257852,0.643584555121872,0.614187936835086,0.95703899087741,0.0573166292831746,0.446803554216201,1,0.94483897535436,0.765543675705881,-0.155273834329679,0.687205302080888,0.815583670403866,0.550249878974747,0.120589903839674,0.460948995702792,0.672984822761516,0.872242715022965,0.950453064419594,0.0812292546338311,0.794106728621403,0.845305135284972,0.819665287852701,0.279049881806901,0.258804884521209,0.382710969171697,0.46199452693266,-0.914318053824251]},"edges":{"i":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","TUN","XX_moyori","XX_moyori","TUN","CAN","GBR","ZAF","TUN","CHE","CHN","ESP","FRA","TUN","MAR","TUN","TUN","TUN","CHN","TUN","ASIE","EGY","TUN","TUN","FRA","TUN","XX_maghre","TUN","CHE","CHN","ITA","TUN","ITA","QAT","TUN","TUR","TUN","ESP","ITA","TUN","TUN","TUN","EUROPE","GBR","TUN","AF_nord","EUROPE","TUN","XX_moyori","TUN","TUN","EGY","FRA","TUN","TUR","TUR","TUN","TUN","TUN","TUN","TUN","ASIE","TUN","TUN","ASIE","TUN","TUR","TUN","TUN","QAT","TUN","FRA","USA","TUR","ASIE","CHN","EUROPE","MAR","TUR","XX_moyori","ASIE","PAK","TUN","CHN","GBR","TUN","TUN","CHN","MAR","TUN","ASIE","PAK","TUR","TUN","TUN","XX_sahara","GBR"],"j":["AFG","AFG","AFG","AFG","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AF_nord","AGO","AUS","AUS","AUS","AUT","BEL","BEL","BEL","BEL","BEL","BFA","BGD","CAF","CAN","CHE","CHE","CHN_HKG","CMR","CMR","CPV","DEU","DEU","DEU","EGY","ESP","ESP","ESP","ESP","FRA","FRA","FRA","FRA","GBR","GBR_ENG","GBR_ENG","GHA","HUN","IND","IRL","IRQ","IRQ","ITA","ITA","ITA","ITA","JOR","JPN","LBY","LBY","LBY","LBY","MAR","MCO","MLI","MLT","MRT","OMN","PAK","POL","PSE","QAT","QAT","QAT","ROU","RUS","SAU","SAU","SDN","SGP","SYR","TUN","TUN","TUN","TUN","TUN","TUN","TUR","TUR","UKR","USA","USA","USA","XX_golper","XX_maghre","XX_maghre","XX_maghre","XX_moyori","XX_moyori","XX_moyori","XX_sahara","XX_sahel","XX_sahel","ZAF"],"size":[1,1,1,1,1,1,1,1,2,22,6,2,2,1,1,1,1,1,1,1,2,4,1,1,1,3,1,5,1,1,1,1,2,14,1,3,1,1,1,2,2,1,26,1,9,1,2,1,1,1,1,1,2,1,1,12,1,5,7,1,1,16,1,1,1,1,2,2,1,1,2,1,1,5,1,1,2,1,5,1,1,1,1,6,7,12,6,2,1,1,1,3,1,10,1,1,1,4,1,1,1,1,1,1,1],"test":[1,1,1,1,1,1,1,1,2,22,6,2,2,1,1,1,1,1,1,1,2,4,1,1,1,3,1,5,1,1,1,1,2,14,1,3,1,1,1,2,2,1,26,1,9,1,2,1,1,1,1,1,2,1,1,12,1,5,7,1,1,16,1,1,1,1,2,2,1,1,2,1,1,5,1,1,2,1,5,1,1,1,1,6,7,12,6,2,1,1,1,3,1,10,1,1,1,4,1,1,1,1,1,1,1],"width":[6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,30.3846153846154,11.9230769230769,7.30769230769231,7.30769230769231,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,9.61538461538461,6.15384615384615,6.15384615384615,6.15384615384615,8.46153846153846,6.15384615384615,10.7692307692308,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,21.1538461538462,6.15384615384615,8.46153846153846,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,7.30769230769231,6.15384615384615,35,6.15384615384615,15.3846153846154,6.15384615384615,7.30769230769231,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,6.15384615384615,6.15384615384615,18.8461538461538,6.15384615384615,10.7692307692308,13.0769230769231,6.15384615384615,6.15384615384615,23.4615384615385,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,7.30769230769231,7.30769230769231,6.15384615384615,6.15384615384615,7.30769230769231,6.15384615384615,6.15384615384615,10.7692307692308,6.15384615384615,6.15384615384615,7.30769230769231,6.15384615384615,10.7692307692308,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,11.9230769230769,13.0769230769231,18.8461538461538,11.9230769230769,7.30769230769231,6.15384615384615,6.15384615384615,6.15384615384615,8.46153846153846,6.15384615384615,16.5384615384615,6.15384615384615,6.15384615384615,6.15384615384615,9.61538461538461,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615,6.15384615384615],"from":[1,2,3,4,5,6,7,8,9,10,4,4,10,16,17,18,10,19,6,20,21,10,8,10,10,10,6,10,1,26,10,10,21,10,25,10,19,6,12,10,12,15,10,3,10,20,12,10,10,10,7,17,10,5,7,10,4,10,10,26,21,10,3,3,10,10,10,10,10,1,10,10,1,10,3,10,10,15,10,21,24,3,1,6,7,8,3,4,1,2,10,6,17,10,10,6,8,10,1,2,3,10,10,57,17],"to":[13,13,13,13,11,11,11,11,11,11,11,5,36,22,22,22,37,23,23,23,23,23,34,38,39,16,19,19,14,27,27,40,31,31,31,26,20,20,20,20,21,21,21,21,17,29,29,41,42,43,30,33,33,12,12,12,12,44,45,28,28,28,28,8,46,47,48,49,50,2,51,52,15,15,15,53,54,35,35,32,60,59,10,10,10,10,10,10,3,3,55,24,24,24,56,25,25,25,4,4,4,57,58,58,18]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","scaling":{"min":20,"max":60,"label":{"min":20,"max":80,"maxVisible":20}},"physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true,"zoomSpeed":1},"edges":{"smooth":true},"physics":{"stabilization":false}},"groups":null,"width":"100%","height":"700px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Network","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","legend":{"width":0.2,"useGroups":true,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="raw-network-without-tunisia" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Raw network without Tunisia</h3>
<p>We can eliminate the host country of the media which is obviously present in the majority of news.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="31_geonetworks.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_network</span>(mod <span class="sc">%&gt;%</span> <span class="fu">filter</span>(i <span class="sc">!=</span> <span class="st">&quot;TUN&quot;</span>, j <span class="sc">!=</span><span class="st">&quot;TUN&quot;</span>))</span></code></pre></div>
<div id="htmlwidget-b8917499e53727bb92b3" style="width:100%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-b8917499e53727bb92b3">{"x":{"nodes":{"code":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","ESP","FRA","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","DEU","SDN","IRQ","BFA","SAU","SYR","SGP","XX_sahel","XX_sahara"],"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],"label":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","ESP","FRA","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","DEU","SDN","IRQ","BFA","SAU","SYR","SGP","XX_sahel","XX_sahara"],"size":[6,4,9,13,4,8,3,4,2,12,8,4,1,4,1,4,2,3,5,10,3,5,5,3,2,1,3,3,1,3,1,1,1,1,1,1,1,1],"value":[2.1483446221183,1.75411603861406,2.63117405792109,3.16227766016838,1.75411603861406,2.48069469178417,1.5191090506255,1.75411603861406,1.24034734589208,3.038218101251,2.48069469178417,1.75411603861406,0.877058019307029,1.75411603861406,0.877058019307029,1.75411603861406,1.24034734589208,1.5191090506255,1.96116135138184,2.77350098112615,1.5191090506255,1.96116135138184,1.96116135138184,1.5191090506255,1.24034734589208,0.877058019307029,1.5191090506255,1.5191090506255,0.877058019307029,1.5191090506255,0.877058019307029,0.877058019307029,0.877058019307029,0.877058019307029,0.877058019307029,0.877058019307029,0.877058019307029,0.877058019307029],"x":[0.305527076056995,0.132772081934624,0.219406087707089,-0.0881706576000687,-0.355287275554482,-0.59956234003649,-0.727399631153279,-0.107531829007876,-0.572442842096321,-0.439404474387066,-0.429799298216013,0.124778615114304,0.510334764397242,0.43163572337242,0.140738923644343,-0.437314391099192,-0.295531885322531,-0.815240577411175,-0.716564787995469,0.0523182111447027,-0.119929359148072,-0.453263011222496,-0.669943360797886,-0.276213238912852,0.778265072385278,1,0.447810287368432,-0.830669709434021,-1,-0.0445923393329344,0.293085197140015,-0.64578020025235,0.137620856003585,0.80227297239902,0.599651678516436,-0.945538894330832,0.66001631680105,0.806540126295436],"y":[-0.736159752145775,-0.861092192499367,-0.483565729030282,-0.650425289470924,-0.702981555311825,0.0402842423170329,-0.611485294294327,-0.222497213690589,-0.877704676022063,-0.49692621494453,-0.38516593942291,-0.734636908209573,-1,-0.400871661962417,0.980954444838339,0.798124121543464,1,0.0640742445407403,-0.15561681487895,-0.135371864902281,0.9180236622239,-0.0302701856490751,0.484497089824132,0.122811360455001,0.0477121898930146,0.168940164753818,-0.140215793197316,-0.345793967897991,-0.735840685011367,0.235455813130467,0.229464646303885,0.921261366040665,0.056874496054186,-0.381313219905833,-0.629530677739695,0.562860719155432,0.788675222094772,0.651200405882342]},"edges":{"i":["ASIE","PAK","TUR","XX_moyori","AF_nord","CHN","EUROPE","MAR","RWA","XX_moyori","XX_moyori","CAN","GBR","ZAF","CHE","CHN","ESP","FRA","MAR","CHN","ASIE","EGY","FRA","XX_maghre","CHE","CHN","ITA","ITA","QAT","TUR","ESP","ITA","EUROPE","GBR","AF_nord","EUROPE","XX_moyori","EGY","FRA","TUR","TUR","ASIE","ASIE","TUR","QAT","FRA","USA","TUR","ASIE","PAK","CHN","GBR","CHN","MAR","ASIE","PAK","TUR","XX_sahel","GBR"],"j":["AFG","AFG","AFG","AFG","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AFRIQUE","AF_nord","AUS","AUS","AUS","BEL","BEL","BEL","BEL","BFA","CHE","CHN_HKG","CMR","DEU","DEU","ESP","ESP","ESP","FRA","FRA","FRA","GBR_ENG","GBR_ENG","IRL","IRQ","ITA","ITA","ITA","LBY","LBY","LBY","MAR","PAK","QAT","QAT","SAU","SDN","SGP","SYR","TUR","TUR","USA","USA","XX_maghre","XX_maghre","XX_moyori","XX_moyori","XX_moyori","XX_sahara","ZAF"],"size":[1,1,1,1,1,1,1,1,2,6,2,1,1,1,1,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1],"test":[1,1,1,1,1,1,1,1,2,6,2,1,1,1,1,1,1,2,1,1,1,1,2,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1],"width":[10,10,10,10,10,10,10,10,15,35,15,10,10,10,10,10,10,15,10,10,10,10,15,10,10,10,10,15,10,10,10,15,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,20,10,10,10,10,10,10,10,10],"from":[1,2,3,4,5,6,7,8,9,4,4,15,16,17,18,6,19,20,8,6,1,25,20,24,18,6,11,11,14,3,19,11,7,16,5,7,4,25,20,3,3,1,1,3,14,20,23,3,1,2,6,16,6,8,1,2,3,37,16],"to":[12,12,12,12,10,10,10,10,10,10,5,21,21,21,22,22,22,22,33,18,13,26,30,30,19,19,19,20,20,20,28,28,29,32,11,11,11,27,27,27,8,2,14,14,34,31,36,35,3,3,23,23,24,24,4,4,4,38,17]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","scaling":{"min":20,"max":60,"label":{"min":20,"max":80,"maxVisible":20}},"physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true,"zoomSpeed":1},"edges":{"smooth":true},"physics":{"stabilization":false}},"groups":null,"width":"100%","height":"700px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Network","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","legend":{"width":0.2,"useGroups":true,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="preferential-links" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Preferential links</h3>
<p>But we can also visualize the most significant links by changing the criteria of size and introducing a test of significance :</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="31_geonetworks.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geo_network</span>(mod,</span>
<span id="cb42-2"><a href="31_geonetworks.html#cb42-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="st">&quot;Rabs_ij&quot;</span>,</span>
<span id="cb42-3"><a href="31_geonetworks.html#cb42-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">minsize =</span> <span class="fl">0.5</span>,</span>
<span id="cb42-4"><a href="31_geonetworks.html#cb42-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">test =</span> <span class="st">&quot;Rchi_ij&quot;</span>,</span>
<span id="cb42-5"><a href="31_geonetworks.html#cb42-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mintest =</span> <span class="fl">2.71</span>)</span></code></pre></div>
<div id="htmlwidget-2b2ffb8dd787334249bd" style="width:100%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-2b2ffb8dd787334249bd">{"x":{"nodes":{"code":["ASIE","PAK","TUR","XX_moyori","AF_nord","RWA","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","CHN","ESP","FRA","MAR","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","SDN","IRQ","EUROPE","BFA","SAU","SYR","SGP","DEU","XX_sahel","XX_sahara"],"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],"label":["ASIE","PAK","TUR","XX_moyori","AF_nord","RWA","AFRIQUE","ITA","AFG","CHN_HKG","QAT","CAN","GBR","ZAF","CHE","CHN","ESP","FRA","MAR","AUS","BEL","USA","XX_maghre","EGY","CMR","LBY","GBR_ENG","IRL","SDN","IRQ","EUROPE","BFA","SAU","SYR","SGP","DEU","XX_sahel","XX_sahara"],"size":[5.61316925767623,3.81166140451813,4.56686755241251,10.0623658330612,3.67788192284031,1.92001686707061,8.1506946582851,3.67511473213462,3.81166140451813,0.992040638676678,2.70943728060752,0.986371411549542,2.88067957032389,1.96339651004671,2.72366739891561,6.25388046364462,4.56370569829493,2.57243897999596,1.85202816674367,2.93481474402158,4.31405616642156,3.73810577952818,2.61944562672395,1.87858373345178,0.98864275412323,0.889940979328551,2.90663157771491,0.988589838863544,0.957595465392933,0.955242130916407,0.988589838863544,0.981614156109858,0.938104940228157,0.982783761135628,0.982783761135668,0.862150426696702,0.995472615331902,0.995472615331902],"value":[2.36185927415028,1.94628800443935,2.13039020597859,3.16227766016838,1.91182809643799,1.3813459878234,2.84608102980345,1.91110874376019,1.94628800443935,0.992920964041541,1.64092790201772,0.990079770107213,1.6919885702079,1.39686345685153,1.64523138210396,2.4930141102761,2.12965259433564,1.59890437012482,1.3566685029563,1.70781291991455,2.0705839637313,1.92741725212925,1.61344677248874,1.36636027609635,0.991219055571632,0.940438827338479,1.69959303375705,0.991192528640968,0.975530807459061,0.974331364385931,0.991192528640968,0.987689313938971,0.965551983083227,0.988277560589952,0.988277560589972,0.925638633170207,0.994636992243595,0.994636992243595],"x":[-0.509931667890394,-0.630836854904834,-0.679006934936351,-0.66117825088253,-0.626461236942633,-1,-0.816780760066915,-0.506848310221727,-0.763768557171246,-0.236328839986449,-0.481594511351025,0.973244020258411,0.871874418696863,0.697688063487647,-0.147137900641863,0.0182721032391926,-0.262301638066544,0.242085117099163,0.632075356823287,0.864173449252912,0.00362045382189757,0.0289840956384171,0.354172002719671,0.0564514133768468,-0.129377699364294,0.250615739728895,-0.508325883758572,0.603015317804371,0.464156554457118,1,0.729281831833569,0.847361893704588,-0.413691912487291,-0.82911155033413,0.0845421645550446,0.469043654169393,0.2460342406571,0.31229571135496],"y":[0.282134231851931,0.179312757927964,0.42417376397619,-0.0193503560955798,-0.321102853975436,-0.342712907494195,-0.231362998221278,-0.587355043144987,0.214772107217253,0.300827382745813,0.562145643576797,0.394419569270406,0.013404299193889,0.120413535942482,-0.874441369184019,-0.657958217677945,-0.743159274770712,-1,-0.594842437571647,0.224710350030348,-0.884177519629986,-0.373352923788414,-0.56666171748909,0.965095126333521,1,0.96733189371736,-0.795243208920415,0.803421204428469,-0.991054671183973,-0.158510370818323,0.677756039230919,-0.570138408298758,0.789076725411734,0.614794202216604,-0.13941552587477,-0.354752615274869,0.56053611042143,0.387543099446567]},"edges":{"i":["ASIE","PAK","TUR","XX_moyori","AF_nord","RWA","XX_moyori","XX_moyori","CAN","GBR","ZAF","CHE","CHN","ESP","FRA","MAR","CHE","ASIE","EGY","XX_maghre","CHE","CHN","ITA","IRL","ESP","ITA","GBR","AF_nord","EGY","ASIE","ASIE","TUR","QAT","FRA","USA","TUR","ASIE","PAK","CHN","CHN","MAR","ASIE","PAK","XX_sahel","GBR"],"j":["AFG","AFG","AFG","AFG","AFRIQUE","AFRIQUE","AFRIQUE","AF_nord","AUS","AUS","AUS","BEL","BEL","BEL","BEL","BFA","CHN","CHN_HKG","CMR","DEU","ESP","ESP","ESP","EUROPE","GBR_ENG","GBR_ENG","IRQ","ITA","LBY","PAK","QAT","QAT","SAU","SDN","SGP","SYR","TUR","TUR","USA","XX_maghre","XX_maghre","XX_moyori","XX_moyori","XX_sahara","ZAF"],"size":[0.9680538328916,0.981807816948498,0.93089987733901,0.93089987733901,0.839669139982303,1.92001686707061,5.39100865123219,1.93089987733901,0.986371411549542,0.955242130916405,0.993201201555629,0.917282541155484,0.854224257070626,0.927705853592456,1.61484351460302,0.981614156109858,0.870571809394616,0.992040638676678,0.98864275412323,0.8621504266967,0.935813048365513,0.886881189393435,0.837237927922127,0.988589838863544,0.976067679021403,1.9305638986935,0.955242130916407,0.90731290551899,0.889940979328551,0.968053832891602,0.927705853592456,0.843626486786911,0.938104940228156,0.957595465392935,0.982783761135668,0.982783761135627,0.878657549811948,0.930899877339014,2.75532201839251,0.886881189393436,0.870414010633815,0.878657549811948,0.930899877339014,0.995472615331902,0.970195308491082],"test":[29.3346059386799,52.9868563158289,12.5408544624626,12.5408544624625,4.39743331109679,46.0905272751678,47.7231315953245,53.9561174818697,71.3887989984412,20.3871977679153,145.091612119819,10.1720636980672,5.00562759416968,11.9046726956016,6.77054567565622,52.4080568307187,5.85572023967617,123.646180743464,86.0608730220055,5.39213390684834,13.6436774015707,6.95338149227555,4.30669958303283,85.6525913890635,39.8084295661192,53.6763570651382,20.3871977679164,8.8816756327384,7.19609298589474,29.3346059386815,11.9046726956014,4.55131840798762,14.2182733504816,21.6247880996275,56.1019121983142,56.1019121981769,6.36248146172309,12.5408544624634,31.0277180445981,6.95338149227561,5.84646961923293,6.36248146172308,12.5408544624634,218.882600115386,31.5815695101709],"width":[10.3870466299679,10.4635850939922,10.1802915051504,10.1802915051504,9.6726087508154,15.6845508398419,35,15.7451128476543,10.4889806826266,10.3157517973825,10.5269872438173,10.1045134621282,9.75360537703114,10.1625173336371,13.9863156548669,10.4625074060241,9.84457658510138,10.5205289187392,10.5016202982568,9.79771309493063,10.207632424138,9.93533537100181,9.65907949005478,10.5013258342903,10.4316422519465,15.7432431865171,10.3157517973825,10.0490342209613,9.95236255533633,10.3870466299679,10.1625173336371,9.69463067877337,10.22038639289,10.3288476833035,10.469016049034,10.4690160490338,9.8895722859457,10.1802915051504,20.3328747734215,9.93533537100182,9.84369846318945,9.8895722859457,10.1802915051504,10.5396272556771,10.3989635590883],"from":[1,2,3,4,5,6,4,4,12,13,14,15,16,17,18,19,15,1,24,23,15,16,8,28,17,8,13,5,24,1,1,3,11,18,22,3,1,2,16,16,19,1,2,37,13],"to":[9,9,9,9,7,7,7,5,20,20,20,21,21,21,21,32,16,10,25,36,17,17,17,31,27,27,30,8,26,2,11,11,33,29,35,34,3,3,22,23,23,4,4,38,14]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","scaling":{"min":20,"max":60,"label":{"min":20,"max":80,"maxVisible":20}},"physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true,"zoomSpeed":1},"edges":{"smooth":true},"physics":{"stabilization":false}},"groups":null,"width":"100%","height":"700px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Network","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","legend":{"width":0.2,"useGroups":true,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>

</div>
</div>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="22-mediacloud_to_quanteda.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ClaudeGrasland/media_cookbook/blob/master/31_geonetworks.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
