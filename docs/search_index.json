[["index.html", "The media cookbook Working paper of the ANR-DFG Imageun Project Chapter 1 Introduction", " The media cookbook Working paper of the ANR-DFG Imageun Project Claude Grasland 2021-10-19 Chapter 1 Introduction The aim of this cookbook is to exchange ideas and programs between members of the Media Group of the ANR-DFG project IMAGEUN. "],["21-corpus-mediacloud.html", "Chapter 2 Import from Media Cloud 2.1 Selection of media with source manager 2.2 Checking the stability through time 2.3 Selection of news specifically related to a topic (option) 2.4 Download and storage of news", " Chapter 2 Import from Media Cloud library(quanteda) library(dplyr) library(ggplot2) library(tidytext) library(knitr) knitr::opts_chunk$set(cache = TRUE, echo = TRUE, comment = &quot;&quot;) (tbd : presentation of the MediaCloud project) Mediacloud can be freely used by researchers. All you have to do is to create an account at the following adress : https://explorer.mediacloud.org You have different ways to get title of news. We will focus here on a simple example of data obtained through the mediacloud interface. We suppose that you want to extract news from the Tunisian newspapers speaking from Europe. 2.1 Selection of media with source manager We use the application called Source Manager and we introduce a research by collection which is the most convenient to explore what is available in a country. In our example, the target country is Tunisia and we have three collections that are propsed : We have selected the collection named Tunisia National because we are interested in the most important newspapers of the country. The buble graphic on the right indicates immediately the media that has produced the highest number of news, but it is wise to explore in more details the list on the left which indicates for each media the statting date of data collection. When a media appears interesting, we click on its name to obtain a brief summary of the metadata. For example, in the case of Léconomiste Maghrebin the metadata indicates : The media looks promising, but before to go further, it can be better to have a look at the website of the media to have a more concrete idea of the content if we dont know in advance what it is about in terms of content, what is the ideological orientation, etc. Here we can see that this is an ecnomic journal, published in french, with news organized in concentric geographic circles (Nation &gt; Maghreb &gt; Africa &gt; World) which is precisely what we are looking for in the IMAGEUN project. We will further complete the informations about this, but before to do that we have to check in more details if the production of the media is regular through time with another tool offered by mediacloud, the explorer. 2.2 Checking the stability through time We have clicked on search in explorer on the metadata page of the Source Manager and obtain a news interfacce where we modify the date to cover the full period of collection of the media (or our period of interest). In the research field, we let the search term * which indicates a research on all news. Below your request, you obtain a graphic entitled Attention Over Time with the distribution of the number of news published per day which help you to verify if the distribution of news is regular through time. You just have to modify the type of graphic in order to visualize Story Count and you can choose the time span you want (day, week or month) for the evaluation of the regularity of news flow. In our example, we notice that at daily level they are some brief period of break in 2019, but the flow is reasonnabely regular with approximatively 5 news per day at the beginning and 10 to 20 in the final period. We also notice a classical week cycle with a decrease of news published during the week-end. Going down, you will find a news panel entitled Total Attention which gives you the total number of stories found. In our example, we have a total of 13626 stories produced by our media over the period. 2.3 Selection of news specifically related to a topic (option) You can eventually use Mediacloud to check the number of news produced about a specific topic, for example Europe or European Union or EU. The request shouldbe put in lower case with \"\" for compounds. Detailed explanation are available in the query guide. This time you can use the graphic option Stories percentage rather than Story count if you want to viusalize the salience of the topic through time. In our example, we have 369 news that appears to be related to our request about Europe or EU with a relatively regular pattern at month level of 1 to 3 % of news and exceptionaly 5 to 7 %. 2.4 Download and storage of news According to your selection (all news or a specific topic) you will download more or less title. Here, me make the choice to get all news, which means that we have to repeat the original request with *. Finally, by clicking on the button Download all story URLS, you can get a .csv file that you can easily load in your favorite programming language as we will see in the next section. "],["22-mediacloud_to_quanteda.html", "Chapter 3 Creation of a quanteda corpus 3.1 Example 3.2 Germany 3.3 France 3.4 Royaume-Uni 3.5 Ireland 3.6 Turkey 3.7 Tunisia", " Chapter 3 Creation of a quanteda corpus library(quanteda) library(dplyr) library(ggplot2) library(tidytext) library(knitr) library(readtext) knitr::opts_chunk$set(cache = TRUE, echo = TRUE, comment = &quot;&quot;) In the previous section (ref) whe have obtained a .csv file of news collected from MediaCloud. We will try now to put this data in a standard form and we have chosen the format of the quanteda package as reference for data organization and storage. But of course the researchers involved in the project can prefer to use other R packages like tm or tidytext. And they can also prefer to use another programming language for Python. It is the reason why we explain how to transform and export the data that has been prepared and harmonized with quanteda in various format like .csv or JSON. 3.1 Example We detail here an example of importation with the example of the newspaper Léconomiste maghrebin 3.1.1 Importation of text to R This step is not always obvious because many problems of encoding can appear that are more or less easy to solve. In principle , the data from Media Cloud are exported in standard UTF-8 but as we will see it is not necessary the case. We try firstly to use the standard R function read.csv(): store &lt;- &quot;corpus/TUN/&quot; media &lt;- &quot;fr_TUN_ecomag&quot; type &lt;-&quot;.csv&quot; fic &lt;- paste(store,media,type,sep=&quot;&quot;) df&lt;-read.csv(fic, sep=&quot;,&quot;, header=T, encoding = &quot;UTF-8&quot;, stringsAsFactors = F) head(df) stories_id publish_date 1 1129295780 2019-01-02 03:42:46 2 1129295771 2019-01-02 04:06:27 3 1129295760 2019-01-02 06:05:08 4 1129578051 2019-01-02 10:05:06 5 1129461662 2019-01-02 07:52:36 6 1129461636 2019-01-02 08:57:54 title 1 Les tarifs de l&amp;#8217;ADSL réduits à partir du 1er janvier 2019 2 6ème Sfax Marathon International des Oliviers 3 Télécharger la version finale de la Loi de finances 2019 4 Chawki Tabib : 245 dossiers de corruption présumée transmis au ministère public 5 Panoro Energy finalise l&amp;#8217;acquisition de OMV Tunisia 6 La partie syndicale maintient le boycott des examens du secondaire url 1 https://www.leconomistemaghrebin.com/2019/01/02/tarifs-adsl-reduits-1-janvier-2019/ 2 https://www.leconomistemaghrebin.com/2019/01/02/sfax-marathon-international-oliviers/ 3 https://www.leconomistemaghrebin.com/2019/01/02/telecharger-la-version-finale-de-la-loi-de-finances-2019/ 4 https://www.leconomistemaghrebin.com/2019/01/02/chawki-tabib-245-dossiers-transferes-au-ministere-public/ 5 https://www.leconomistemaghrebin.com/2019/01/02/panoro-energy-finalise-lacquisition-de-omv-tunisia/ 6 https://www.leconomistemaghrebin.com/2019/01/02/partie-syndicale-boycott-examens-secondaire/ language ap_syndicated themes media_id media_name 1 fr False 623820 L&#39;Economiste Maghrebin 2 fr False 623820 L&#39;Economiste Maghrebin 3 en False 623820 L&#39;Economiste Maghrebin 4 fr False 623820 L&#39;Economiste Maghrebin 5 fr False 623820 L&#39;Economiste Maghrebin 6 fr False 623820 L&#39;Economiste Maghrebin media_url 1 http://www.leconomistemaghrebin.com/ 2 http://www.leconomistemaghrebin.com/ 3 http://www.leconomistemaghrebin.com/ 4 http://www.leconomistemaghrebin.com/ 5 http://www.leconomistemaghrebin.com/ 6 http://www.leconomistemaghrebin.com/ str(df) &#39;data.frame&#39;: 12794 obs. of 10 variables: $ stories_id : int 1129295780 1129295771 1129295760 1129578051 1129461662 1129461636 1130259352 1131673651 1132241460 1132432991 ... $ publish_date : chr &quot;2019-01-02 03:42:46&quot; &quot;2019-01-02 04:06:27&quot; &quot;2019-01-02 06:05:08&quot; &quot;2019-01-02 10:05:06&quot; ... $ title : chr &quot;Les tarifs de l&amp;#8217;ADSL réduits à partir du 1er janvier 2019&quot; &quot;6ème Sfax Marathon International des Oliviers&quot; &quot;Télécharger la version finale de la Loi de finances 2019&quot; &quot;Chawki Tabib : 245 dossiers de corruption présumée transmis au ministère public&quot; ... $ url : chr &quot;https://www.leconomistemaghrebin.com/2019/01/02/tarifs-adsl-reduits-1-janvier-2019/&quot; &quot;https://www.leconomistemaghrebin.com/2019/01/02/sfax-marathon-international-oliviers/&quot; &quot;https://www.leconomistemaghrebin.com/2019/01/02/telecharger-la-version-finale-de-la-loi-de-finances-2019/&quot; &quot;https://www.leconomistemaghrebin.com/2019/01/02/chawki-tabib-245-dossiers-transferes-au-ministere-public/&quot; ... $ language : chr &quot;fr&quot; &quot;fr&quot; &quot;en&quot; &quot;fr&quot; ... $ ap_syndicated: chr &quot;False&quot; &quot;False&quot; &quot;False&quot; &quot;False&quot; ... $ themes : chr &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ... $ media_id : int 623820 623820 623820 623820 623820 623820 623820 623820 623820 623820 ... $ media_name : chr &quot;L&#39;Economiste Maghrebin&quot; &quot;L&#39;Economiste Maghrebin&quot; &quot;L&#39;Economiste Maghrebin&quot; &quot;L&#39;Economiste Maghrebin&quot; ... $ media_url : chr &quot;http://www.leconomistemaghrebin.com/&quot; &quot;http://www.leconomistemaghrebin.com/&quot; &quot;http://www.leconomistemaghrebin.com/&quot; &quot;http://www.leconomistemaghrebin.com/&quot; ... The importation was successfull for 13623 news but message of errors appeared for 3 news where R sent a message of error telling : Error in gregexpr(calltext, singleline, fixed = TRUE) : regular expression is invalid UTF-8 Looking in more details, we discover also some problems of encoding in news like in the following example where the text of the news appears differently if we apply the standard functions paste() o0 the specialized function r knitr::kable for printing. paste(df[9, 3]) [1] &quot;Néji Jalloul : &amp;#8220;Nidaa Tounes peut revenir si&amp;#8230;&amp;#8221;&quot; kable((df[9,3])) x Néji Jalloul : Nidaa Tounes peut revenir si 3.1.2 encoding problems It is sometime possible to adapt manually the encoding problem whan they are not too much as in present example. df$text&lt;-df$title # standardize apostrophe df$text&lt;-gsub(&quot;&amp;#8217;&quot;,&quot;&#39;&quot;,df$text) # standardize punct df$text&lt;-gsub(&#39;&amp;#8230;&#39;,&#39;.&#39;,df$text) # standardize hyphens df$text&lt;-gsub(&#39;&amp;#8211;&#39;,&#39;-&#39;,df$text) # Remove quotation marks df$text&lt;-gsub(&#39;&amp;#171;&amp;#160;&#39;,&#39;&#39;,df$text) df$text&lt;-gsub(&#39;&amp;#160;&amp;#187;&#39;,&#39;&#39;,df$text) df$text&lt;-gsub(&#39;&amp;#8220;&#39;,&#39;&#39;,df$text) df$text&lt;-gsub(&#39;&amp;#8221;&#39;,&#39;&#39;,df$text) df$text&lt;-gsub(&#39;&amp;#8216;&#39;,&#39;&#39;,df$text) df$text&lt;-gsub(&#39;&amp;#8243;&#39;,&#39;&#39;,df$text) We can introduce othr cleaning procedures here or keep it for later analysis 3.1.3 Transformation in quanteda format We propose a storage based on quanteda format by just transforming the data that has been produced by readtext. We keep only the name of the source and the date of publication. # Create Quanteda corpus qd&lt;-corpus(df,docid_field = &quot;stories_id&quot;) # Select docvar fields and rename media qd$date &lt;-as.Date(qd$publish_date) qd$source &lt;-media docvars(qd)&lt;-docvars(qd)[,c(&quot;source&quot;,&quot;date&quot;)] # Add global meta meta(qd,&quot;meta_source&quot;)&lt;-&quot;Media Cloud &quot; meta(qd,&quot;meta_time&quot;)&lt;-&quot;Download the 2021-09-30&quot; meta(qd,&quot;meta_author&quot;)&lt;-&quot;Elaborated by Claude Grasland&quot; meta(qd,&quot;project&quot;)&lt;-&quot;ANR-DFG Project IMAGEUN&quot; We have created a quanteda object with a lot of information stored in various fields. The structure of the object is the following one str(qd) &#39;corpus&#39; Named chr [1:12794] &quot;Les tarifs de l&#39;ADSL réduits à partir du 1er janvier 2019&quot; ... - attr(*, &quot;names&quot;)= chr [1:12794] &quot;1129295780&quot; &quot;1129295771&quot; &quot;1129295760&quot; &quot;1129578051&quot; ... - attr(*, &quot;docvars&quot;)=&#39;data.frame&#39;: 12794 obs. of 5 variables: ..$ docname_: chr [1:12794] &quot;1129295780&quot; &quot;1129295771&quot; &quot;1129295760&quot; &quot;1129578051&quot; ... ..$ docid_ : Factor w/ 12794 levels &quot;1129295780&quot;,&quot;1129295771&quot;,..: 1 2 3 4 5 6 7 8 9 10 ... ..$ segid_ : int [1:12794] 1 1 1 1 1 1 1 1 1 1 ... ..$ source : chr [1:12794] &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; ... ..$ date : Date[1:12794], format: &quot;2019-01-02&quot; &quot;2019-01-02&quot; ... - attr(*, &quot;meta&quot;)=List of 3 ..$ system:List of 6 .. ..$ package-version:Classes &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 .. .. ..$ : int [1:3] 3 0 0 .. ..$ r-version :Classes &#39;R_system_version&#39;, &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 .. .. ..$ : int [1:3] 4 1 0 .. ..$ system : Named chr [1:3] &quot;Windows&quot; &quot;x86-64&quot; &quot;claude&quot; .. .. ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;sysname&quot; &quot;machine&quot; &quot;user&quot; .. ..$ directory : chr &quot;C:/git/media_cookbook&quot; .. ..$ created : Date[1:1], format: &quot;2021-10-07&quot; .. ..$ source : chr &quot;data.frame&quot; ..$ object:List of 2 .. ..$ unit : chr &quot;documents&quot; .. ..$ summary:List of 2 .. .. ..$ hash: chr(0) .. .. ..$ data: NULL ..$ user :List of 4 .. ..$ meta_source: chr &quot;Media Cloud &quot; .. ..$ meta_time : chr &quot;Download the 2021-09-30&quot; .. ..$ meta_author: chr &quot;Elaborated by Claude Grasland&quot; .. ..$ project : chr &quot;ANR-DFG Project IMAGEUN&quot; We can look at the first titles with head() kable(head(qd,3)) x 1129295780 Les tarifs de lADSL réduits à partir du 1er janvier 2019 1129295771 6ème Sfax Marathon International des Oliviers 1129295760 Télécharger la version finale de la Loi de finances 2019 We can get meta information on each stories with summary() summary(head(qd,3)) Corpus consisting of 3 documents, showing 3 documents: Text Types Tokens Sentences source date 1129295780 11 11 1 fr_TUN_ecomag 2019-01-02 1129295771 6 6 1 fr_TUN_ecomag 2019-01-02 1129295760 8 10 1 fr_TUN_ecomag 2019-01-02 We can get meta information about the full document meta(qd) $meta_source [1] &quot;Media Cloud &quot; $meta_time [1] &quot;Download the 2021-09-30&quot; $meta_author [1] &quot;Elaborated by Claude Grasland&quot; $project [1] &quot;ANR-DFG Project IMAGEUN&quot; 3.1.4 Storage of the quanteda object We can finally save the object in .RDS format in a directory dedicated to our quanteda files. It can be usefull to give some information in the name of the file store &lt;- &quot;quanteda/&quot; type&lt;- &quot;.RDS&quot; myfile &lt;- paste(store,media,type,sep=&quot;&quot;) myfile [1] &quot;quanteda/fr_TUN_ecomag.RDS&quot; saveRDS(qd,myfile) qd[1:3] Corpus consisting of 3 documents and 2 docvars. 1129295780 : &quot;Les tarifs de l&#39;ADSL réduits à partir du 1er janvier 2019&quot; 1129295771 : &quot;6ème Sfax Marathon International des Oliviers&quot; 1129295760 : &quot;Télécharger la version finale de la Loi de finances 2019&quot; summary(qd,3) Corpus consisting of 12794 documents, showing 3 documents: Text Types Tokens Sentences source date 1129295780 11 11 1 fr_TUN_ecomag 2019-01-02 1129295771 6 6 1 fr_TUN_ecomag 2019-01-02 1129295760 8 10 1 fr_TUN_ecomag 2019-01-02 We have kept all the information present in the initial file, but also added specific metadata of interest for us. The size of the storage is now equal to 0.6 Mb which means a division by 6 as compared to the initial .csv file downloaded from Media Cloud. 3.1.5 Backtransformation of quanteda to data.table or tibble In the following steps, we will make an intensive use of quanteda, but sometimes it can be usefull to export the results in a more practical format or to use other packages. For this reasons, it is important to know that the tidytextpackage can easily transform quanteda object in tibbles which are more classical and easy to manage td &lt;- tidy(qd) head(td) # A tibble: 6 x 3 text source date &lt;chr&gt; &lt;chr&gt; &lt;date&gt; 1 Les tarifs de l&#39;ADSL réduits à partir du 1er janvier 20~ fr_TUN_ec~ 2019-01-02 2 6ème Sfax Marathon International des Oliviers fr_TUN_ec~ 2019-01-02 3 Télécharger la version finale de la Loi de finances 2019 fr_TUN_ec~ 2019-01-02 4 Chawki Tabib : 245 dossiers de corruption présumée tran~ fr_TUN_ec~ 2019-01-02 5 Panoro Energy finalise l&#39;acquisition de OMV Tunisia fr_TUN_ec~ 2019-01-02 6 La partie syndicale maintient le boycott des examens du~ fr_TUN_ec~ 2019-01-02 str(td) tibble [12,794 x 3] (S3: tbl_df/tbl/data.frame) $ text : chr [1:12794] &quot;Les tarifs de l&#39;ADSL réduits à partir du 1er janvier 2019&quot; &quot;6ème Sfax Marathon International des Oliviers&quot; &quot;Télécharger la version finale de la Loi de finances 2019&quot; &quot;Chawki Tabib : 245 dossiers de corruption présumée transmis au ministère public&quot; ... $ source: chr [1:12794] &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; &quot;fr_TUN_ecomag&quot; ... $ date : Date[1:12794], format: &quot;2019-01-02&quot; &quot;2019-01-02&quot; ... 3.2 Germany 3.2.1 Frankfurter Allgemeine Zeitung qd&lt;-readRDS(&quot;quanteda/de_DEU_frankf.RDS&quot;) summary(qd,3) Corpus consisting of 88313 documents, showing 3 documents: Text Types Tokens Sentences source date regs nbregs 930016745 5 5 1 de_DEU_frankf 2020-09-06 0 1118202030 10 10 1 de_DEU_frankf 2021-07-06 0 1128764967 14 14 1 de_DEU_frankf 2019-01-01 Q1286 1 paste(qd[1:5]) [1] &quot;Bundestagswahl: Durchmarsch der AfD&quot; [2] &quot;Kahl folgt auf Schindler: CSU kritisiert Wechsel an BND-Spitze&quot; [3] &quot;Dramatisches Ende einer Bergtour: Drei Deutsche nach eisiger Nacht in Tiroler Alpen gerettet&quot; [4] &quot;Trotz Gelbwesten-Protesten: Macron kündigt für 2019 weitere Reformen an&quot; [5] &quot;May wirbt in Neujahrsansprache für Brexit-Abkommen&quot; 3.2.2 Süddeutsche Zeitung qd&lt;-readRDS(&quot;quanteda/de_DEU_suddeu.RDS&quot;) summary(qd,5) Corpus consisting of 35444 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 931884497 4 4 1 de_DEU_suddeu 2019-06-17 0 1128842071 8 8 1 de_DEU_suddeu 2019-01-01 0 1128842047 8 8 1 de_DEU_suddeu 2019-01-01 0 1128842007 4 4 1 de_DEU_suddeu 2019-01-01 0 1128842024 5 5 1 de_DEU_suddeu 2019-01-01 0 paste(qd[1:5]) [1] &quot;EU setzt Russland Ultimatum&quot; [2] &quot;Flüchtlinge : Großbritannien verlegt Schiffe in den Ärmelkanal&quot; [3] &quot;Zugang zum Internet : Buena Vista Netz Club&quot; [4] &quot;Brasilien: Bolsonaros Plan&quot; [5] &quot;Dirty Dancing: Getanzter Dreck&quot; 3.3 France 3.3.1 Le Figaro qd&lt;-readRDS(&quot;quanteda/fr_FRA_figaro.RDS&quot;) summary(qd,5) Corpus consisting of 128807 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128863317 12 12 1 fr_FRA_figaro 2019-01-01 0 1128915698 11 11 1 fr_FRA_figaro 2019-01-01 0 1128915693 8 8 1 fr_FRA_figaro 2019-01-01 0 1128915594 8 8 1 fr_FRA_figaro 2019-01-01 0 1128915683 8 8 1 fr_FRA_figaro 2019-01-01 0 paste(qd[1:5]) [1] &quot;Légion d&#39;honneur : autant de femmes distinguées que d&#39;hommes ce 1er janvier&quot; [2] &quot;Tokyo : une voiture fonce dans la foule, 9 blessés&quot; [3] &quot;Thaïlande : le roi sera couronné en mai&quot; [4] &quot;Ces joueurs qui pourraient enflammer le mercato hivernal&quot; [5] &quot;Strasbourg : 9 blessés à cause des pétards&quot; 3.3.2 Le Monde qd&lt;-readRDS(&quot;quanteda/fr_FRA_lmonde.RDS&quot;) summary(qd,5) Corpus consisting of 49731 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128825289 12 12 1 fr_FRA_lmonde 2019-01-01 0 1128864671 11 11 1 fr_FRA_lmonde 2019-01-01 0 1128864634 9 9 1 fr_FRA_lmonde 2019-01-01 0 1128864655 13 13 1 fr_FRA_lmonde 2019-01-01 0 1128908122 11 11 1 fr_FRA_lmonde 2019-01-01 0 paste(qd[1:5]) [1] &quot;Les pesticides de synthèse interdits aux particuliers à partir du 1er janvier&quot; [2] &quot;Mauritanie : un député antiesclavagiste libéré après cinq mois de prison&quot; [3] &quot;Jeanne Calment était-elle vraiment la doyenne de lhumanité ?&quot; [4] &quot;Italie : après ladoption du budget, 2019 commence dans une ambiance chaotique&quot; [5] &quot;Pérou : destitution de deux procureurs qui enquêtaient sur laffaire Odebrecht&quot; 3.4 Royaume-Uni 3.4.1 The Guardian qd&lt;-readRDS(&quot;quanteda/en_GBR_guardi.RDS&quot;) summary(qd,5) Corpus consisting of 77875 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128777161 12 12 1 en_GBR_guardi 2019-01-01 0 1128777148 10 10 1 en_GBR_guardi 2019-01-01 Q7204 1 1128795880 11 11 1 en_GBR_guardi 2019-01-01 0 1128795872 9 9 1 en_GBR_guardi 2019-01-01 Q15 1 1128795860 12 13 1 en_GBR_guardi 2019-01-01 0 paste(qd[1:5]) [1] &quot;Toxic legacy taints ANC as it nears 25-year rule in South Africa&quot; [2] &quot;Why Trumps Middle East peace plan is just a sideshow&quot; [3] &quot;Preparations for the Harbin ice and snow festival  in pictures&quot; [4] &quot;Turning air into drinking water: Africa&#39;s inspired inventors&quot; [5] &quot;&#39;Resign from Facebook&#39;: experts offer Mark Zuckerberg advice for 2019&quot; 3.4.2 The Daily Telegraph qd&lt;-readRDS(&quot;quanteda/en_GBR_telegr.RDS&quot;) summary(qd,5) Corpus consisting of 41803 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1001621055 10 13 2 en_GBR_telegr 2020-03-15 0 794012047 6 7 1 en_GBR_telegr 2021-04-15 0 1020025042 11 11 1 en_GBR_telegr 2020-07-06 Q46 1 1071998286 7 7 1 en_GBR_telegr 2021-06-26 0 1080057597 11 12 1 en_GBR_telegr 2020-06-15 0 paste(qd[1:5]) [1] &quot;Guant?namo &#39;suicides&#39; were at secret &#39;black&#39; site&quot; [2] &quot;IKEA founder &#39;was Nazi recruiter&#39;&quot; [3] &quot;Europe tells Britain to justify itself over fingerprinting children in schools&quot; [4] &quot;Sumo champion Asashoryu outrages sport with celebration&quot; [5] &quot;Barack Obama meets Jewish leaders over &#39;tough line&#39; on Israel&quot; 3.5 Ireland 3.5.1 The Irish Time qd&lt;-readRDS(&quot;quanteda/en_IRL_irtime.RDS&quot;) summary(qd,5) Corpus consisting of 108479 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1003842232 8 9 1 en_IRL_irtime 2020-01-15 0 1128791232 8 8 1 en_IRL_irtime 2019-01-01 0 1128791226 7 7 1 en_IRL_irtime 2019-01-01 0 1128803852 10 10 1 en_IRL_irtime 2019-01-01 0 1128874798 11 11 1 en_IRL_irtime 2019-01-01 0 paste(qd[1:5]) [1] &quot;Strong corporate tax receipts sustainable until 2020&quot; [2] &quot;Number of British people becoming Irish citizens surges&quot; [3] &quot;7 tips to build your physical stamina&quot; [4] &quot;Having a baby abroad changed my perspective on living away&quot; [5] &quot;New Years Eve celebrations around the world to ring in 2019&quot; 3.5.2 The Belfast Telegraph qd&lt;-readRDS(&quot;quanteda/en_NIR_beltel.RDS&quot;) summary(qd,5) Corpus consisting of 99932 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128845104 8 8 1 en_NIR_beltel 2019-01-01 0 1128845083 11 11 1 en_NIR_beltel 2019-01-01 0 1128845064 9 9 1 en_NIR_beltel 2019-01-01 0 1128845042 11 11 1 en_NIR_beltel 2019-01-01 0 1128905097 10 10 1 en_NIR_beltel 2019-01-01 0 paste(qd[1:5]) [1] &quot;Officer disarmed knifeman in Foyleside Centre court told&quot; [2] &quot;Hoaxers are putting lives at risk, warns fire service officer&quot; [3] &quot;The volunteers providing a lifeline to elderly Belfast residents&quot; [4] &quot;Tributes to Northern Ireland man Christopher Donnelly after death in US&quot; [5] &quot;Belfast bar to build rooftop terrace in £350k extension&quot; 3.6 Turkey 3.6.1 The Yeni Sati qd&lt;-readRDS(&quot;quanteda/tr_TUR_yenisa.RDS&quot;) summary(qd,5) Corpus consisting of 97638 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128735746 4 4 1 tr_TUR_yenisa 2019-01-01 0 1128760707 5 5 1 tr_TUR_yenisa 2019-01-01 0 1128776505 7 7 1 tr_TUR_yenisa 2019-01-01 0 1128776514 7 7 1 tr_TUR_yenisa 2019-01-01 0 1128796514 4 4 1 tr_TUR_yenisa 2019-01-01 0 paste(qd[1:5]) [1] &quot;Bingöl&#39;de 4.2 siddetinde deprem&quot; [2] &quot;Pentagon&#39;da deprem: Görevden alindi&quot; [3] &quot;Cumhurbaskani Erdogan en seçkin dünya lideri seçildi&quot; [4] &quot;Japonya&#39;da araçli saldiri: Yayalarin arasinda daldi&quot; [5] &quot;Almanya&#39;da Mekke&#39;nin fethi kutlandi&quot; 3.6.2 Cumhuryet qd&lt;-readRDS(&quot;quanteda/tr_TUR_cumhur.RDS&quot;) summary(qd,5) Corpus consisting of 133713 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1129020777 7 7 1 tr_TUR_cumhur 2019-01-01 0 1129020771 8 8 1 tr_TUR_cumhur 2019-01-01 0 1129020761 5 5 1 tr_TUR_cumhur 2019-01-01 0 1129000336 6 6 1 tr_TUR_cumhur 2019-01-01 0 1129020744 4 4 1 tr_TUR_cumhur 2019-01-01 0 paste(qd[1:5]) [1] &quot;Hakkari-Sirnak kara yolunda çig düsmesi sonucu kapandi&quot; [2] &quot;Adana&#39;da 10 araç birbirine girdi: Yaralilar var&quot; [3] &quot;CHP binasinda partililerden oturma eylemi&quot; [4] &quot;Suriye sinirina askeri sevkiyat devam ediyor&quot; [5] &quot;Isveç&#39;te camiye silahli saldiri&quot; 3.7 Tunisia 3.7.1 Réalités qd&lt;-readRDS(&quot;quanteda/fr_TUN_realit.RDS&quot;) summary(qd,5) Corpus consisting of 23042 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128872823 8 8 1 fr_TUN_realit 2019-01-01 0 1128936210 11 11 1 fr_TUN_realit 2019-01-01 0 1128961861 12 12 1 fr_TUN_realit 2019-01-01 0 1129004162 10 10 1 fr_TUN_realit 2019-01-01 0 1129004150 5 5 1 fr_TUN_realit 2019-01-01 0 paste(qd[1:5]) [1] &quot;L&#39;Est de la Turquie frappé par un séisme&quot; [2] &quot;Enfidha : un Omda auteur d&#39;un trafic de logements sociaux ?&quot; [3] &quot;Russie : la mort d&#39;un tunisien en prison suscite encore des interrogations&quot; [4] &quot;Abattage de vaches malades à Sousse: Ouverture d&#39;une enquête&quot; [5] &quot;Quels remèdes aux incertitudes ?&quot; 3.7.2 Léconomiste Maghrebin qd&lt;-readRDS(&quot;quanteda/fr_TUN_ecomag.RDS&quot;) summary(qd,5) Corpus consisting of 12794 documents, showing 5 documents: Text Types Tokens Sentences source date 1129295780 11 11 1 fr_TUN_ecomag 2019-01-02 1129295771 6 6 1 fr_TUN_ecomag 2019-01-02 1129295760 8 10 1 fr_TUN_ecomag 2019-01-02 1129578051 12 12 1 fr_TUN_ecomag 2019-01-02 1129461662 7 7 1 fr_TUN_ecomag 2019-01-02 paste(qd[1:5]) [1] &quot;Les tarifs de l&#39;ADSL réduits à partir du 1er janvier 2019&quot; [2] &quot;6ème Sfax Marathon International des Oliviers&quot; [3] &quot;Télécharger la version finale de la Loi de finances 2019&quot; [4] &quot;Chawki Tabib : 245 dossiers de corruption présumée transmis au ministère public&quot; [5] &quot;Panoro Energy finalise l&#39;acquisition de OMV Tunisia&quot; 3.7.3 La Presse qd&lt;-readRDS(&quot;quanteda/fr_TUN_presse.RDS&quot;) summary(qd,5) Corpus consisting of 11553 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1319140184 16 21 1 fr_TUN_presse 2019-04-24 0 1332556981 6 6 1 fr_TUN_presse 2019-07-08 0 1378389487 11 12 1 fr_TUN_presse 2019-08-29 0 1378389531 21 24 1 fr_TUN_presse 2019-08-29 0 1378389503 12 12 1 fr_TUN_presse 2019-08-29 0 paste(qd[1:5]) [1] &quot;Grève de 24 heures à l&#39;aéroport de Tunis Carthage à partir de ce soir à minuit | La Presse de Tunisie&quot; [2] &quot;Accueil | La Presse de Tunisie&quot; [3] &quot;Nomination de Najet Neili, coordinatrice des Journées cinématographiques de Carthage 2019&quot; [4] &quot;40ème jour du décès du président de la République Béji Caïd Essebsi : « On fait tout pour empêcher lorganisation de la cérémonie »&quot; [5] &quot;Iyadh Elloumi : « Nous entamerons une grève de la faim »&quot; 3.7.4 Babnet qd&lt;-readRDS(&quot;quanteda/ar_TUN_babnet.RDS&quot;) summary(qd,5) Corpus consisting of 42649 documents, showing 5 documents: Text Types Tokens Sentences source date regs nbregs 1128915717 17 17 1 ar_TUN_babnet 2019-01-01 0 1128915704 13 13 1 ar_TUN_babnet 2019-01-01 0 1128915643 11 11 1 ar_TUN_babnet 2019-01-01 0 1128915651 16 16 1 ar_TUN_babnet 2019-01-01 0 1128915618 6 6 1 ar_TUN_babnet 2019-01-01 0 paste(qd[1:5]) [1] &quot;&lt;U+0633&gt;&lt;U+0639&gt;&lt;U+062F&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062D&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0631&gt;&lt;U+064A&gt;: &lt;U+0639&gt;&lt;U+0644&gt;&lt;U+0649&gt; &lt;U+0643&gt;&lt;U+0644&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0648&gt;&lt;U+0649&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0623&gt;&lt;U+0646&gt; &lt;U+062A&gt;&lt;U+062A&gt;&lt;U+0646&gt;&lt;U+0627&gt;&lt;U+0632&gt;&lt;U+0644&gt; &lt;U+0644&gt;&lt;U+062A&gt;&lt;U+0634&gt;&lt;U+0643&gt;&lt;U+064A&gt;&lt;U+0644&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062D&gt;&lt;U+0643&gt;&lt;U+0648&gt;&lt;U+0645&gt;&lt;U+0629&gt; &lt;U+0648&gt;&lt;U+0648&gt;&lt;U+0627&gt;&lt;U+062B&gt;&lt;U+0642&gt; &lt;U+0645&gt;&lt;U+0646&gt; &lt;U+0623&gt;&lt;U+0646&gt;&lt;U+0646&gt;&lt;U+0627&gt; &lt;U+0633&gt;&lt;U+0646&gt;&lt;U+0635&gt;&lt;U+0644&gt; &lt;U+0625&gt;&lt;U+0644&gt;&lt;U+0649&gt; &lt;U+062D&gt;&lt;U+0644&gt; &quot; [2] &quot;&lt;U+0645&gt;&lt;U+0642&gt;&lt;U+062A&gt;&lt;U+0644&gt; &lt;U+0623&gt;&lt;U+0643&gt;&lt;U+062B&gt;&lt;U+0631&gt; &lt;U+0645&gt;&lt;U+0646&gt; 300 &lt;U+0634&gt;&lt;U+062E&gt;&lt;U+0635&gt; &lt;U+0641&gt;&lt;U+064A&gt; &lt;U+062D&gt;&lt;U+0648&gt;&lt;U+0627&gt;&lt;U+062F&gt;&lt;U+062B&gt; &lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0631&gt; &lt;U+0628&gt;&lt;U+062A&gt;&lt;U+0627&gt;&lt;U+064A&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+062F&gt; &lt;U+062E&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0644&gt; &lt;U+0627&gt;&lt;U+062D&gt;&lt;U+062A&gt;&lt;U+0641&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+062A&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0627&gt;&lt;U+0645&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+062F&gt;&lt;U+064A&gt;&lt;U+062F&gt; &quot; [3] &quot; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+0632&gt;&lt;U+0648&gt;&lt;U+0642&gt;&lt;U+064A&gt; &lt;U+064A&gt;&lt;U+0637&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0628&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062A&gt;&lt;U+0648&gt;&lt;U+0646&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+064A&gt;&lt;U+0646&gt; &lt;U+0628&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+062B&gt;&lt;U+064A&gt;&lt;U+0631&gt; &lt;U+0645&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0645&gt;&lt;U+0644&gt; &lt;U+0648&gt;&lt;U+064A&gt;&lt;U+062F&gt;&lt;U+0639&gt;&lt;U+0648&gt;&lt;U+0647&gt;&lt;U+0645&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+0641&gt;&lt;U+0651&gt; &lt;U+0639&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+062A&gt;&lt;U+0645&gt; &lt;U+0648&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062E&gt;&lt;U+0635&gt;&lt;U+0627&gt;&lt;U+0645&gt; &quot; [4] &quot; &lt;U+0645&gt;&lt;U+0639&gt; &lt;U+0627&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0642&gt; &lt;U+0633&gt;&lt;U+0646&gt;&lt;U+0629&gt; 2019: &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0628&gt;&lt;U+0646&gt;&lt;U+0643&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+0643&gt;&lt;U+0632&gt;&lt;U+064A&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062A&gt;&lt;U+0648&gt;&lt;U+0646&gt;&lt;U+0633&gt;&lt;U+064A&gt; &lt;U+064A&gt;&lt;U+0633&gt;&lt;U+0645&gt;&lt;U+062D&gt; &lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0624&gt;&lt;U+0633&gt;&lt;U+0633&gt;&lt;U+0627&gt;&lt;U+062A&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062F&gt;&lt;U+0641&gt;&lt;U+0639&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0642&gt; &lt;U+0641&gt;&lt;U+064A&gt; &lt;U+0627&gt;&lt;U+0633&gt;&lt;U+062F&gt;&lt;U+0627&gt;&lt;U+0621&gt; &lt;U+062E&gt;&lt;U+062F&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+062A&gt;&lt;U+0647&gt;&lt;U+0627&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0645&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0621&gt;&quot; [5] &quot;Seoul Welcomes Kim&#39;s New Year Address &quot; "],["23-Wikidata.html", "Chapter 4 Wikidata 4.1 Introduction 4.2 Wikidata 4.3 The package WikidataR 4.4 Dictionary of world regions 4.5 Detection of world regions 4.6 Tagging function", " Chapter 4 Wikidata library(knitr) library(dplyr) library(WikidataR) library(quanteda) Authors : Claude Grasland &amp; Etienne Toureille 4.1 Introduction The objective of this short note is to explore the possibility of Wikidata for the production of multilingual dictionaries of world regions and more generally regional imaginations. In order to test the interest of this approach, we will try to produce multilingual dictionaries for the identification of five groups of entities : Europe and its subregions Africa and its subregions Asia and its subregions Mediterranea Middle East, Near East, Persian Gulf  The dictionary will be established in five languages of interest for the project IMAGEUN : english : applied to media of UK and Ireland french : applied to media of France and Tunisia german : applied to media of Germany turkish : applied to media of Turkey arabic : applied to media of Tunisia 4.2 Wikidata Wikidata defines itself as a free and open knowledge base that can be read and edited by both humans and machines. as central storage for the structured data of its Wikimedia sister projects including Wikipedia, Wikivoyage, Wiktionary, Wikisource, and others. a support to many other sites and services beyond just Wikimedia projects! The content of Wikidata is available under a free license, exported using standard formats, and can be interlinked to other open data sets on the linked data web. 4.2.1 Codification of entities The first interest of wikidata is to provide unique code of identifications of objects. For example a research about Africa will produce a list of different objects characterized by a unique code : knitr::include_graphics(&quot;pics/Wikidata001.png&quot;) 4.2.2 Informations on entities Once we have selected an entity (e.g. Q15) we obtain a new page with more detailed informations in english but also in all other languages available in Wikipedia. knitr::include_graphics(&quot;pics/Wikidata002.png&quot;) A lot of information are available concerning the entity but, at this stage, the most important ones for our research are : the translation in different languages the equivalent words or expression in different languages the definitions in different languages the ambiguity of the term in each language and the potential risks of confusion with other entities. Of course we should not take for granted the answers proposed by wikidata (as noticed by Georg, Wikipedia is a matter of research for IMAGEUN ) but without any doubt, it offers a very good opportunity to clarify our questions and help us to build tools for recognition of world regions and other geographical imaginations in a multilingual perspective. 4.2.3 Wikipedia entities as nodes of an ontolongy It appears crucial to introduce here a clear distinction between Wikipedia entities and textual units associated to the names and definiton of this units. A wikipedia entity like Q15 is an element of an ontology designed by its author for specific purposes. The specificity of the wikidata ontology is the fact that it is a multilinligual web where Q15 is a node of the web present in different linguistic layers. It means that we dont have a single name or a single definition of Q15, except if we adopt the neocolonial perspective to choose the english language as reference. Depending on the context (i.e. the language or sub-language), Q15 could be defined as : (fr) : A continent named Afrique\" (en) : A continent on the Earths northern and southern hemispheres named Africa or African continent (de) : A Kontinent auf der Nord- und Südhalbkugel der Erde named Afrika (tr) : A Dünyann kuzey ve güney yarkürelerindeki bir kta named Afrika or Afrika ktas (ar) : The \"               \" 1 named  or   In other words the existence of the same code of wikipedia entities does not offer any guarantee of concordance between the geographical objects found in news published in different languages or different countries. But - and it is the important point - it help us to point similarities and differences between set of geographical entities that are more or less comparable in each language. 4.2.4 A tool for cross-linguistical experiments Having in mind the limits of the equivalence of entities across languages, it can nevertheless be an interesting experience to select a set of wikipedia entities (Q15, Q258, Q4412 ) and to examine their relative frequency in our different media from different countries with different languages. A typical hypothesis could be something like : Is Q15 more mentionned than Q46 in Tunisian newspapers ? which is not equivalent to the question Is Africa more mentionned than Europe in Tunisian newspapers but rather equivalent to the two joint questions Is the textual unit Afrique more mentionned than the textual unit Europe in Tunisian newspapers published in french language. Is the textual unit  more mentionned than the textual unit  in Tunisian newspapers published in arabic language. 4.3 The package WikidataR The package WikidataR is an interface for the use of the Wikidata API in R language. Equivalent tools are available in Python and other languages for those non familiar with R. And it is of course possible to use directly the API. The first step is to install the most recent version of the R package WikidataR which install also related packages of interest. #install.packages(&quot;WikidataR&quot;) library(WikidataR) 4.3.1 Basic operations (based on Etienne Toureille previous experiments) 4.3.1.1 identification of entities of interest The function find_item will help to find all wikipedia entities (=items) associated to a textual unit (word or group of word) in given language. Lets start with the research of entities associated to Afrique in french language : mytext &lt;- &quot;Afrique&quot; items &lt;- find_item(search_term = mytext, language = &quot;fr&quot;, limit=30) class(items) [1] &quot;find_item&quot; length(items) [1] 30 The resulting object is an object from type find_item which is in practice a list describing the entities that has been recognized associated to the textual unit that we have chosen. In the french cas, we have found 50 entities that match with our textual unit. Lets have a look at the first one : items[[1]] $id [1] &quot;Q15&quot; $title [1] &quot;Q15&quot; $pageid [1] 111 $repository [1] &quot;wikidata&quot; $url [1] &quot;//www.wikidata.org/wiki/Q15&quot; $concepturi [1] &quot;http://www.wikidata.org/entity/Q15&quot; $label [1] &quot;Africa&quot; $description [1] &quot;continent on the Earth&#39;s northern and southern hemispheres&quot; $match $match$type [1] &quot;label&quot; $match$language [1] &quot;fr&quot; $match$text [1] &quot;Afrique&quot; $aliases $aliases[[1]] [1] &quot;Afrique&quot; As we can see we can easily identify the code the label and description in english but also the text responsible from the matching answer in french. We can therefore create a function item_info that extract all elements of interest and put them in a table in order to have a complete view. item_info &lt;- function(my_item){ if (is.null(my_item$id) == F){item_id = my_item$id} else {item_id = NA} if (is.null(my_item$label) ==F){item_label = my_item$label} else {item_label = NA} if (is.null(my_item$desc) == F) {item_desc= my_item$desc} else {item_desc = NA} if (is.null(my_item$match$lang) ==F){item_lang = my_item$match$lang} else {item_lang = NA} if (is.null(my_item$match$text) ==F){item_text = my_item$match$text} else {item_text = NA} res&lt;-data.frame(item_id,item_label,item_desc,item_lang,item_text) return(res) } For example : item_info(items[[1]]) item_id item_label item_desc 1 Q15 Africa continent on the Earth&#39;s northern and southern hemispheres item_lang item_text 1 fr Afrique We build then a second function that extract all the wikipedia entities associated to a textual unit for a given language extract_entities &lt;- function(mytext= &quot;Afrique&quot;, mylang = &quot;fr&quot;, maxres = 20) { # Extract items items &lt;- find_item(search_term = mytext, language = mylang, limit = maxres) # Create empty dataset res&lt;-data.frame() res$item_id &lt;- as.character() res$item_label &lt;- as.character() res$item_desc &lt;- as.character() res$item_lang &lt;- as.character() res$item_text &lt;- as.character() # Fill dataset k&lt;-length(items) for (i in 1:k) { res &lt;- rbind(res,item_info(items[[i]])) } # Return dataset return(res) } For example : tab &lt;- extract_entities(&quot;Afrique&quot;,&quot;fr&quot;,20) kable(tab) item_id item_label item_desc item_lang item_text Q15 Africa continent on the Earths northern and southern hemispheres fr Afrique Q181238 Africa Roman province on the northern African coast covering parts of present-day Tunisia, Algeria, and Libya fr Afrique Q203548 African Plate continental plate underlying Africa fr Afrique Q258 South Africa sovereign state in Southern Africa fr Afrique du Sud Q4412 West Africa region of Africa fr Afrique de lOuest Q132959 Sub-Saharan Africa area of the continent of Africa that lies south of the Sahara Desert fr Afrique subsaharienne Q27394 Southern Africa southernmost region of the African continent fr Afrique australe Q27407 East Africa easterly region of the African continent fr Afrique de lEst Q27381 North Africa northernmost region of the African continent fr Afrique du Nord Q2826196 Afrique Wikimedia disambiguation page fr Afrique Q23639892 Africa artwork by Eugène Delaplanche in Paris, France fr Afrique Q66022909 Afrique NA fr Afrique Q153963 German East Africa former German posesssion in the African Great Lakes region between 18841919 fr Afrique orientale allemande Q4690138 Afrique album by Count Basie fr Afrique Q65574303 Afrique NA fr Afrique Q56317928 Afrique NA fr Afrique Q210682 French West Africa French colonial federation (18951958) fr Afrique-Occidentale française Q27433 Central Africa core region of the African continent fr Afrique centrale Q106179043 Afrique NA en Afrique Q271894 French Equatorial Africa federation of French colonial possessions in Central Africa fr Afrique-Équatoriale française As we can see, many of the entities proposed in he list are not interesting and we will probably have to select one by one the entities of interest. But we have clearly to keep two different list of entities : the target entities : that we consider as potential world regions or candidate to te title of geographic imagination. the control entites : that we have to identify or eliminate if we want to identify correctly our target entities like the country of South Africa In the case of Africa, we could for example establish a more limited list entit &lt;- c(&quot;Q15&quot;, &quot;Q4412&quot;,&quot;Q132959&quot;, &quot;Q27394&quot;,&quot;Q27407&quot;,&quot;Q27381&quot;,&quot;Q27433&quot;,&quot;Q258&quot;) tab&lt;-tab %&gt;% filter(item_id %in% entit) kable(tab) item_id item_label item_desc item_lang item_text Q15 Africa continent on the Earths northern and southern hemispheres fr Afrique Q258 South Africa sovereign state in Southern Africa fr Afrique du Sud Q4412 West Africa region of Africa fr Afrique de lOuest Q132959 Sub-Saharan Africa area of the continent of Africa that lies south of the Sahara Desert fr Afrique subsaharienne Q27394 Southern Africa southernmost region of the African continent fr Afrique australe Q27407 East Africa easterly region of the African continent fr Afrique de lEst Q27381 North Africa northernmost region of the African continent fr Afrique du Nord Q27433 Central Africa core region of the African continent fr Afrique centrale But this list which was based on the french textual units associated to Afrique should certainly be completed by equivalent list established for other languages with different seeds (Africa in english, Afrika in german, ) 4.3.2 Elaboration of a cross_linguistic dictionnary Admitting that we have established a list of wikipedia entities of interest, we can now turn to the creation of a dictionary for the identification of these entities in different languages. We will use for that purpose the powerful function get_properties item_prop &lt;- get_property(&quot;Q15&quot;)[[1]] The result is a very large object (list of list) which provide all the informations (or links toward these information) in all languages wher the object is available. The problem is therefore to understand the structure of this object and to extract exactly what we need. In our case, we want to extract for each language of interest. The information will be separated in two datasets : dictionary of definitions dictionary of labels and aliases We create two functions dedicated to each of the tasks extract_def &lt;- function(item = c(&quot;Q15&quot;, &quot;Q246&quot;), langs = c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) { # Create empty dataset res&lt;-data.frame() res$id &lt;- as.character() res$lang &lt;- as.character() res$label &lt;- as.character() res$desc &lt;- as.character() # Loop of items n &lt;- length(item) for (i in 1:n) { # Extract item properties item_prop &lt;- get_property(item[i])[[1]] # Loop of language p&lt;-length(langs) for (j in 1:p) { id &lt;- item[i] lang &lt;- langs[j] if(is.null(item_prop[[&quot;labels&quot;]][[lang]]$value)==F) {label &lt;- item_prop[[&quot;labels&quot;]][[lang]]$value} else { label &lt;- NA} if(is.null(item_prop[[&quot;descriptions&quot;]][[lang]]$value)==F) {desc &lt;- item_prop[[&quot;descriptions&quot;]][[lang]]$value} else { desc &lt;- NA} add &lt;-data.frame(id,lang,label,desc) res&lt;- rbind(res,add) } } # Export result return(res) } The function works proprerly as long as the entities are available in all languages. It should be adapted to prevent errors when an entity is not available in one language. entit &lt;- c(&quot;Q15&quot;, &quot;Q4412&quot;,&quot;Q132959&quot;, &quot;Q27394&quot;,&quot;Q27407&quot;,&quot;Q27381&quot;,&quot;Q27433&quot;,&quot;Q258&quot;) tab&lt;-extract_def(entit,c(&quot;fr&quot;,&quot;de&quot;,&quot;tr&quot;,&quot;en&quot;,&quot;ar&quot;)) kable(tab) id lang label desc Q15 fr Afrique continent Q15 de Afrika Kontinent auf der Nord- und Südhalbkugel der Erde Q15 tr Afrika Dünyanin kuzey ve güney yarikürelerindeki bir kita Q15 en Africa continent on the Earths northern and southern hemispheres Q15 ar &lt;U+0625&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+062B&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+064A&gt; &lt;U+0623&gt;&lt;U+0643&gt;&lt;U+0628&gt;&lt;U+0631&gt; &lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+062A&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt; &lt;U+0645&gt;&lt;U+0646&gt; &lt;U+062D&gt;&lt;U+064A&gt;&lt;U+062B&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0633&gt;&lt;U+0627&gt;&lt;U+062D&gt;&lt;U+0629&gt; &lt;U+0648&gt;&lt;U+0639&gt;&lt;U+062F&gt;&lt;U+062F&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0633&gt;&lt;U+0643&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+060C&gt; &lt;U+062A&gt;&lt;U+0623&gt;&lt;U+062A&gt;&lt;U+064A&gt; &lt;U+0641&gt;&lt;U+064A&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+062A&gt;&lt;U+0628&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062B&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0628&gt;&lt;U+0639&gt;&lt;U+062F&gt; &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Q4412 fr Afrique de lOuest région dAfrique Q4412 de Westafrika Kontinentalteil Q4412 tr Bati Afrika Afrikanin batisindaki 16 ülkenin bulundugu alan Q4412 en West Africa region of Africa Q4412 ar &lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q132959 fr Afrique subsaharienne partie du continent africain au sud du Sahara Q132959 de Subsahara-Afrika südlich der Sahara gelegener Teil Afrikas Q132959 tr Sahraalti Afrika NA Q132959 en Sub-Saharan Africa area of the continent of Africa that lies south of the Sahara Desert Q132959 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+062D&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0621&gt; &lt;U+062C&gt;&lt;U+0632&gt;&lt;U+0621&gt; &lt;U+0645&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+064A&gt;&lt;U+0642&gt;&lt;U+0639&gt; &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+062D&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0621&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+0628&gt;&lt;U+0631&gt;&lt;U+0649&gt; Q27394 fr Afrique australe région la plus méridionale du continent africain Q27394 de Südliches Afrika Region in Afrika Q27394 tr Güney Afrika NA Q27394 en Southern Africa southernmost region of the African continent Q27394 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q27407 fr Afrique de lEst région dAfrique Q27407 de Ostafrika Region in Afrika Q27407 tr Dogu Afrika NA Q27407 en East Africa easterly region of the African continent Q27407 ar &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q27381 fr Afrique du Nord région en Afrique Q27381 de Nordafrika Region in Afrika Q27381 tr Kuzey Afrika Afrika kitasinin Fas, Cezayir, Tunus, Libya, Misir ve Sudani içeren kuzey bölgesi Q27381 en North Africa northernmost region of the African continent Q27381 ar &lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0633&gt;&lt;U+0643&gt;&lt;U+0627&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0641&gt;&lt;U+064A&gt; &lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0627&gt; Q27433 fr Afrique centrale Région dAfrique Q27433 de Zentralafrika Region in Afrika Q27433 tr Orta Afrika Afrika kitasinin Burundi, Orta Afrika Cumhuriyeti, Çad, Kongo Demokratik Cumhuriyeti ve Ruandayi barindiran orta kismi Q27433 en Central Africa core region of the African continent Q27433 ar &lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt; &lt;U+0631&gt;&lt;U+0626&gt;&lt;U+064A&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q258 fr Afrique du Sud pays dAfrique Q258 de Südafrika Staat im südlichen Afrika Q258 tr Güney Afrika Cumhuriyeti Güney Afrikada bulunan bir ülke Q258 en South Africa sovereign state in Southern Africa Q258 ar &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+062F&gt;&lt;U+0648&gt;&lt;U+0644&gt;&lt;U+0629&gt; &lt;U+0641&gt;&lt;U+064A&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; 4.3.3 Extraction of aliases Now we have to extract the aliases which are two texts corresponding to the same entity in a given,language. For example, the Q27394 which correspond to the southern part of Africa (a subregion, not a country) is associated in spanish language to one main label and three equivalenbt alisases item_prop &lt;- get_property(&quot;Q27394&quot;)[[1]] item_prop$labels$es$value [1] &quot;África austral&quot; item_prop$aliases$es language value 1 es África meridional 2 es África del Sur 3 es sur de África But in french language, no aliases are mentioned : item_prop$labels$fr$value [1] &quot;Afrique australe&quot; item_prop$aliases$fr NULL The fact that no aliases are mentioned in french language can be considered as non logical as compared to spanish language. And we could certainly imagine to add in french the translation of two spanish aliases: Afrique méridionale, Sud de lAfrique. But we can not add Afrique du Sud because it is related in french to the state and not to the subregion. Despite the fact that they are not complete, the aliases are certainly a good solution when we want to obtain more efficient dictionaries. For example, if we want to obtain the state of southern Africa (Q258), we can complete the official label by 4 alias in french language and 3 aliases in spanish, taking into account the fact that the text is in upper orlowercase, withor without accent,  item_prop &lt;- get_property(&quot;Q258&quot;)[[1]] item_prop$labels$es$value [1] &quot;Sudáfrica&quot; item_prop$aliases$es language value 1 es República de Sudáfrica 2 es Sudafrica 3 es Republica de Sudafrica item_prop$labels$fr$value [1] &quot;Afrique du Sud&quot; item_prop$aliases$fr language value 1 fr République sud-africaine 2 fr République dAfrique du Sud 3 fr république sud-africaine 4 fr république dAfrique du Sud lang=&quot;fr&quot; is.null(item_prop[[&quot;aliases&quot;]][[lang]])!=F [1] FALSE ali &lt;- item_prop[[&quot;aliases&quot;]][[lang]]$value n&lt;-length(ali) for (i in 1:n) { print(ali[i])} [1] &quot;République sud-africaine&quot; [1] &quot;République dAfrique du Sud&quot; [1] &quot;république sud-africaine&quot; [1] &quot;république dAfrique du Sud&quot; We propose therefore a function called extract_alias which propose for each entity of interest a list of texts and aliases adapte to each language. We do not store the definition which has been otained previously with the function extract_def : extract_alias &lt;- function(items = c(&quot;Q15&quot;, &quot;Q258&quot;), langs = c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) { # Create empty dataset res&lt;-data.frame() res$id &lt;- as.character() res$lang &lt;- as.character() res$label &lt;- as.character() # Loop of items n &lt;- length(items) for (i in 1:n) { # Extract item properties item_prop &lt;- get_property(items[i])[[1]] # Loop of language p&lt;-length(langs) for (j in 1:p) { id &lt;- items[i] lang &lt;- langs[j] if(is.null(item_prop[[&quot;labels&quot;]][[lang]]$value)==F) {label &lt;- item_prop[[&quot;labels&quot;]][[lang]]$value} else { label &lt;- NA} if(is.null(item_prop[[&quot;descriptions&quot;]][[lang]]$value)==F) {desc &lt;- item_prop[[&quot;descriptions&quot;]][[lang]]$value}else { desc &lt;- NA} add &lt;-data.frame(id,lang,label) res&lt;- rbind(res,add) # Loop of aliases if (is.null(item_prop[[&quot;aliases&quot;]][[lang]])==F) { ali &lt;- item_prop[[&quot;aliases&quot;]][[lang]]$value n&lt;-length(ali) for (k in 1:n) { label &lt;- ali[k] add &lt;-data.frame(id,lang,label) res&lt;- rbind(res,add) } } } } # Export result return(res) } Lets try the function on the case of the continent of Africa (Q15), the subregion South of Africa (Q27394) and the state of Southern Africa (Q258) in five languages : tab&lt;- extract_alias(items = c(&quot;Q15&quot;, &quot;Q27394&quot;, &quot;Q258&quot;), langs = c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) kable(tab) id lang label Q15 fr Afrique Q15 de Afrika Q15 en Africa Q15 en African continent Q15 en Ancient Libya Q15 tr Afrika Q15 tr Afrika kitasi Q15 ar &lt;U+0625&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Q15 ar &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q15 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Q15 ar &lt;U+0625&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q15 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q27394 fr Afrique australe Q27394 de Südliches Afrika Q27394 de Südafrika Q27394 en Southern Africa Q27394 tr Güney Afrika Q27394 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q27394 ar &lt;U+0625&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Q27394 ar &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Q27394 ar &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0647&gt; Q27394 ar &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; (&lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt;) Q258 fr Afrique du Sud Q258 fr République sud-africaine Q258 fr République dAfrique du Sud Q258 fr république sud-africaine Q258 fr république dAfrique du Sud Q258 de Südafrika Q258 de Suedafrika Q258 de Republik Südafrika Q258 en South Africa Q258 en Republic of South Africa Q258 en RSA Q258 en SA Q258 en za Q258 en &lt;U+0001F1FF&gt;&lt;U+0001F1E6&gt; Q258 en zaf Q258 tr Güney Afrika Cumhuriyeti Q258 ar &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; The function works ! 4.3.4 Conclusion It is now possible to develop a global research strategy for the analysis of world regions : 1. Define a set of target regions in one language : In our example, it was based on the use of the term Afrique in french language, but we can imagine a different list. 2. Identify the code of the wikidata entities associated to this target regions : We have generally a lot of entities of minor interest. 3. Identify the code of the other wikidata entities that should be added for control : As we have seen, some entities are likely to create confusion and ambiguity in the definition of target entities. This entity will be transformed in compound or eliminate from the text before to look for the target entities. 4. Extract the properties of the entities in the different languages of interest : this step can be an opportunity to return to step 1. For example, it it appears that some subdivisions of Africa are available in english or german language but not in french. 5. Compare the definitions of Wikipedia entities in different languages : it is important to check if the assumption of identity of the entities is correct or not. If not, some entities will be eliminated from the list. 6. Extract the dictionary of recognition of entities : which can be done in a multilanguage perspective. It is obviously possible to apply the same procedure to different objects like organizations, people, etc 4.4 Dictionary of world regions We realize a test of the method described above on a preliminary dictionary of world regions 4.4.1 Load the list of world regions We start from a provisional list of 65 world regions established by C. Grasland : ent&lt;-read.table(&quot;dict/wikireg_V1.csv&quot;, sep=&quot;;&quot;, header=T, encoding = &quot;UTF-8&quot;) 4.4.2 Extract définitions We extract the definitions of the regions in the different languages. ## NOT RUN ### worldreg_def &lt;- extract_def(ent$wikidata,c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) write.table(x = worldreg_def, file = &quot;dict/worldreg001_def.csv&quot;, fileEncoding = &quot;UTF-8&quot;, sep = &quot;;&quot;) saveRDS(object = worldreg_def, file = &quot;dict/worldreg001_def.RDS&quot;) 4.4.3 Extract aliases and create dictionary ## NOT RUN ### worldreg_dict &lt;- extract_alias(ent$wikidata,c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) write.table(x = worldreg_dict, file = &quot;dict/worldreg001_dict.csv&quot;, fileEncoding = &quot;UTF-8&quot;, sep = &quot;;&quot;) saveRDS(object = worldreg_dict, file = &quot;dict/worldreg001_dict.RDS&quot;) 4.4.4 Extract dictionary of control units We need to add a supplementary dictionary of units that are introduced in order to avoid confusion. For the moment it is limited to the state of southern Africa, but many other units shouyld be added like Europe 1 (a french radio), Council of Europe (an organization), etc ## NOT RUN ### ent_ctrl &lt;- c(&quot;Q258&quot;, # Republic of southern Africa &quot;Q8908&quot;, # Council of Europe &quot;Q314407&quot;) # French Radio Europe 1 worldreg_ctrl &lt;- extract_alias(ent_ctrl,c(&quot;fr&quot;,&quot;de&quot;,&quot;en&quot;,&quot;tr&quot;,&quot;ar&quot;)) write.table(x = worldreg_ctrl, file = &quot;dict/worldreg001_ctrl.csv&quot;, fileEncoding = &quot;UTF-8&quot;, sep = &quot;;&quot;) saveRDS(object = worldreg_ctrl, file = &quot;dict/worldreg001_ctrl.RDS&quot;) 4.5 Detection of world regions We describe now how to apply the dictionary to our different media : 4.5.1 Example of Le Figaro (fr_FRA_figaro) Before to elaborate a generic function, we describe step by step the procedure : 4.5.1.1 Load corpus ### Load corpus qd &lt;- readRDS(&quot;quanteda/fr_FRA_figaro.RDS&quot;) summary(qd,3) Corpus consisting of 128807 documents, showing 3 documents: Text Types Tokens Sentences source date regs nbregs 1128863317 12 12 1 fr_FRA_figaro 2019-01-01 0 1128915698 11 11 1 fr_FRA_figaro 2019-01-01 0 1128915693 8 8 1 fr_FRA_figaro 2019-01-01 0 4.5.1.2 Tokenize # Tokenize text toks&lt;-tokens(qd) # Split french apostroph (optional ) #toks&lt;- tokens_split(toks, &quot;&#39;&quot;) 4.5.1.3 Load dictionaries and create compounds ## Control dictionary ctrl&lt;-readRDS(&quot;dict/worldreg001_ctrl.RDS&quot;) ctrl&lt;-ctrl[ctrl$lang==&quot;fr&quot; &amp; is.na(ctrl$label)==F,] ctrl&lt;-ctrl[ntoken(ctrl$label)&gt;1,] toks&lt;-tokens_compound(toks,pattern=phrase(ctrl$label)) ## Target dictionary dict&lt;-readRDS(&quot;dict/worldreg001_dict.RDS&quot;) dict&lt;-dict[dict$lang==&quot;fr&quot; &amp; is.na(dict$label)==F,] target&lt;-dict[ntoken(dict$label)&gt;1,] toks&lt;-tokens_compound(toks,pattern=phrase(target$label)) 4.5.1.4 Store world regions in a field # create quanteda dictionary keys &lt;-gsub(&quot; &quot;,&quot;_&quot;,dict$label) qd_dict&lt;-as.list(keys) names(qd_dict)&lt;-dict$id qd_dict&lt;-dictionary(qd_dict) # Identify geo tags (states or reg or org ...) toks_tags &lt;- tokens_lookup(toks, qd_dict) toks_tags &lt;- lapply(toks_tags, unique) toks_tags&lt;-as.tokens(toks_tags) list_tags&lt;-function(x){res&lt;-paste(x, collapse=&#39; &#39;)} qd$regs&lt;-as.character(lapply(toks_tags,FUN=list_tags)) qd$nbregs&lt;-ntoken(toks_tags) 4.5.1.5 Check results In order to check the results we print the sample of news where two world regions or more was present. table(qd$nbregs) 0 1 2 3 127503 1274 29 1 check&lt;-qd[qd$nbregs&gt;1] kable(check) x 1233402821 Sommet Trump-Kim à Hanoï: quels enjeux pour les alliés des États-Unis en Europe et en Asie? 1257748531 Tarkett réorganise sa production en Amérique du Nord 1273320449 Asie, Afrique, Europe: la nouvelle stratégie de lÉtat islamique 1472261066 Morning meeting AOF France / Europe - Début de séance dans le vert en perspective 1487858483 Afrique centrale, Amazonie LAustralie nest pas la seule région du globe touchée par des incendies dévastateurs 1538695782 Afrique, Asie, Russie: ces pays qui prétendent échapper au coronavirus 1566082859 «On risque en Afrique davoir une mortalité beaucoup plus élevée quen Europe» 1614628752 La filiale française de Hertz devrait être épargnée par la faillite en Amérique du Nord 1615672526 Coronavirus: plus de 40.000 morts en Amérique latine et aux Caraïbes 1622310115 Coronavirus: plus dun million de cas en Amérique latine et aux Caraïbes 1643134082 Coronavirus: plus de 100.000 morts en Amérique latine et dans les Caraïbes 1644080764 Un vent de sable du Sahara fait suffoquer les Caraïbes 1655624031 Covid-19: plus de 3 millions de cas en Amérique latine et aux Caraïbes 1669473785 Coronavirus: plus de 4 millions de cas en Amérique latine et dans les Caraïbes 1674749497 Coronavirus: plus de 200.000 morts en Amérique latine et aux Caraïbes 1702445480 General Motors et Honda font alliance en Amérique du Nord 1791252333 Présidentielle américaine: Europe, Asie, Otan. Le monde retient son souffle 1822430945 Telefonica vend ses tours de télécommunication en Europe et Amérique latine pour 7,7 milliards deuros 1855542096 Polynésie: un marin chute dun cargo et survit 16 heures dans locéan Pacifique 1889567911 Pénuries de puces: Stellantis suspend la production dans 5 usines en Amérique du Nord 1891681233 Canal de Suez bloqué : quelles conséquences pour les opérations de larmée française au Moyen-Orient et en Asie ? 1930291586 Amazon prévoit dembaucher 75.000 personnes en Amérique du Nord 1938506703 Covid-19 : plus dun million de décès en Amérique latine et aux Caraïbes 1957509487 Deux cas de Covid-19 à bord dune des premières croisières en Amérique du Nord depuis la pandémie 1971360149 Nike dopé à Wall Street par les solides ventes en Amérique du Nord et en ligne 1975903379 Climat : le «dôme de chaleur» a déjà fait des dizaines de morts en Amérique du Nord 1983023021 Juin 2021 a été le mois de juin le plus chaud jamais mesuré en Amérique du Nord 2021112587 Bab al-Mandab, «porte des lamentations» entre Afrique et Moyen-Orient 2023259245 Air Caraïbes et Corsair plongent aux Antilles 2055701082 Bonduelle réduit la voilure en Amérique du Nord With only one exception (Air Caraïbes is not a region), we have obtained genuine cases of linkages between world regions. This cases ae not very frequent but interesting : We have many examples of association of regions and states (Afrique, Asie, Russie) which clearly suggest that very large states are considered as equivalent to world regions (\"Afrique centrale, Amazonie  LAustralie nest pas la seule région du globe touchée par les incendies) We notice some frequent associations like the dyad Amérique Latine / Caraïbes which is observed 7 times. We can produce another case for the difficult case of Europe (Q46) in order to see if we have not forgotten to control some compounds : check&lt;-qd[qd$regs==&quot;Q46&quot;] ndoc(check) [1] 387 kable(check[1:10]) x 1129625564 Contrôle des chômeurs : comment ça marche ailleurs en Europe ? 1147907423 Le mur entre les deux Europe, un mirage pour lavenir 1162263438 En Europe, le rejet de laccord sur le Brexit fait craindre lhypothèse dun «no deal» 1165265804 Marque «Big Mac» révoquée en Europe : quest-ce que ça change ? 1171500116 La Model 3 de Tesla autorisée à circuler en Europe 1171610557 Europe: la lune de miel ratée entre Macron et Merkel 1174229396 Un congé paternité de dix jours minimum en Europe 1193017366 Fusion Axa/XL : 711 postes potentiellement supprimés en Europe 1193073299 «Oney Bank sera la banque digitale du groupe BPCE en Europe» 1194469225 La pêche électrique sera interdite en Europe en 2021 The manual analysis of the 387 occurences of Europe reveals a very good performance. Only 10 news (i.e. less than 3% ) are related to entities different from the world region Europe. The mistakes are related to : other subregions of Europe with complements in upper case (e.g. Europe Centrale) entities to be added to the control list like political parties (e.g. Europe Ecologie), companies (e.g. Google Europe), media (Radio Free Europe), films (Princesse Europe),  But as a whole the number of mistakes is very reduced and could be debated in certain cases : Google Europe can be considered for example as a reference to the world region Europe. The third check made on America reveals that the procedure of tagging is correct from textual point of view (20 occurences of Amérique are observed) but not from the semantic point of view. In all cases but one, the text Amérique is in fact associated to USA (Q30) and not to the continent of America (Q828). It means that in this particular case, the ontology of Wikipedia is associated to a systematic error (95%). check&lt;-qd[qd$regs==&quot;Q828&quot;] ndoc(check) [1] 20 kable(check) x 1235792670 A lONU, Angelina Jolie plaide pour une Amérique impliquée dans le monde 1329952114 Trump va exalter une Amérique rassemblée dans son discours controversé du 4 juillet 1392884385 Festival de Deauville: le triomphe de Bull, portrait dune Amérique à labandon 1467944990 Mémoires dAmérique, de John Edgar Wideman: être un Noir en Amérique 1623085311 Joe Biden relance sa campagne dans une Amérique embrasée par la mort de George Floyd 1706477036 Nostalgie dun autre monde, dOttessa Mosfegh: pauvre Amérique 1711967705 Deux sortes dhommes: les aventures inédites de Johnny en Amérique 1721258584 Madeleine Albright: «Je souhaite le retour dune Amérique généreuse et charitable» 1721934240 «New York Cannibals» de Boucq et Charyn : course-poursuite dans une Amérique folle à lier 1739715186 Périscope N° 23 : La guerre civile couve-t-elle en Amérique? 1749481184 Présidentielle: une Amérique polarisée à lextrême face à un choix existentiel 1751973473 La Pennsylvanie, champ de bataille et baromètre dune Amérique divisée 1779295690 Joe Biden annonce le retour dune Amérique «prête à guider le monde» 1822984973 Joe Biden au chevet dune Amérique en  récession prête à rebondir 1824745835 Voyage au cur dune Amérique déchirée 1858468930 Ces perles de verre vénitiennes retrouvées en Alaska se trouvaient en Amérique avant Christophe Colomb 1891681226 Mort de George Floyd: procès à haut risque dans une Amérique fracturée 1900048007 Alerte rouge en Amérique face à la pénurie de ketchup en sachet 1915868003 Face au Congrès, Biden vante une Amérique allant «de nouveau de lavant» 2039056596 11-Septembre: à New York, le tombeau dune Amérique disparue 4.5.1.6 What about the apostroph  ? This example of Amérique reveals another problem which is related to the tokenization. In our example we have found only 20 occurences of Amérique because the dictionary extracted from Wikipedia has not included the textual units lAmérique which appears in 144 news of the textual unitdAmérique which is present in 22 news. We have therefore cleary understimate the real number of mention and the same is cetainly also true for other names of world regions like lEurope (477 cases), lAfrique (98 cases), lAsie (16 cases). It appears therfore more relevant - at less in the french case - to replace the apostroph by a blank  4.6 Tagging function We try therefore to elaborate a function where the user can decide (optionally) to remove the apostroph and/or to use lower case. extract_tags &lt;- function(qd = qd, # the corpus of interest lang = &quot;fr&quot;, # the language to be used dict = dict, # the dictionary of target entities ctrl = ctrl, # the dictionary of entities to be controled split = TRUE, # keep apostrophs ? tolow = FALSE # Tokenize text ) { # Tokenize x&lt;-texts(qd) if(split) { x &lt;- gsub(&quot;&#39;&quot;,&quot; &quot;,x)} if(tolow) { x &lt;- tolower(x)} toks&lt;-tokens(x) # Load dictionaries and create compounds ## Control dictionary ctrl&lt;-ctrl[ctrl$lang==lang &amp; is.na(ctrl$label)==F,] ctrl&lt;-ctrl[ntoken(ctrl$label)&gt;1,] labels &lt;-ctrl$label if(split) {labels&lt;- gsub(&quot;&#39;&quot;,&quot; &quot;,labels)} if(tolow) {labels &lt;- tolower(labels)} toks&lt;-tokens_compound(toks,pattern=phrase(labels)) ## Target dictionary dict&lt;-dict[dict$lang==lang &amp; is.na(dict$label)==F,] target&lt;-dict[ntoken(dict$label)&gt;1,] labels &lt;-dict$label if(split) {labels&lt;- gsub(&quot;&#39;&quot;,&quot; &quot;,labels)} if(tolow) {labels &lt;- tolower(labels)} toks&lt;-tokens_compound(toks,pattern=phrase(labels)) # create quanteda dictionary keys &lt;-gsub(&quot; &quot;,&quot;_&quot;,labels) qd_dict&lt;-as.list(keys) names(qd_dict)&lt;-dict$id qd_dict&lt;-dictionary(qd_dict) # Identify geo tags (states or reg or org ...) toks_tags &lt;- tokens_lookup(toks, qd_dict) toks_tags &lt;- lapply(toks_tags, unique) toks_tags&lt;-as.tokens(toks_tags) list_tags&lt;-function(x){res&lt;-paste(x, collapse=&#39; &#39;)} qd$regs&lt;-as.character(lapply(toks_tags,FUN=list_tags)) qd$nbregs&lt;-ntoken(toks_tags) # Export results return(qd) } 4.6.1 Le Figaro ctrl&lt;-readRDS(&quot;dict/worldreg001_ctrl.RDS&quot;) dict&lt;-readRDS(&quot;dict/worldreg001_dict.RDS&quot;) dict&lt;-dict[dict$id != &quot;Q2017699&quot;,] # Correct Mistake qd &lt;- readRDS(&quot;quanteda/fr_FRA_figaro.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;fr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/fr_FRA_figaro.RDS&quot;) qd1&lt;-qd table(qd1$nbregs) 4.6.2 Le Monde qd &lt;- readRDS(&quot;quanteda/fr_FRA_lmonde.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;fr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/fr_FRA_lmonde.RDS&quot;) qd2&lt;-qd table(qd2$nbregs) 4.6.3 FAZ qd &lt;- readRDS(&quot;quanteda/de_DEU_frankf.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;de&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/de_DEU_frankf.RDS&quot;) qd3&lt;-qd table(qd$nbregs) 4.6.4 Süddeutsche Zeitung qd &lt;- readRDS(&quot;quanteda/de_DEU_suddeu.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;de&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/de_DEU_suddeu.RDS&quot;) qd4&lt;-qd table(qd$nbregs) 4.6.5 Guardian qd &lt;- readRDS(&quot;quanteda/en_GBR_guardi.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;en&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/en_GBR_guardi.RDS&quot;) qd5&lt;-qd table(qd$nbregs) 4.6.6 Daily Telegraph qd &lt;- readRDS(&quot;quanteda/en_GBR_telegr.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;en&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/en_GBR_telegr.RDS&quot;) qd6&lt;-qd table(qd$nbregs) 4.6.7 Belfast Telegraph qd &lt;- readRDS(&quot;quanteda/en_NIR_beltel.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;en&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/en_NIR_beltel.RDS&quot;) qd7&lt;-qd table(qd$nbregs) 4.6.8 Irish Times qd &lt;- readRDS(&quot;quanteda/en_IRL_irtime.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;en&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/en_IRL_irtime.RDS&quot;) qd8&lt;-qd table(qd$nbregs) 4.6.9 Cumhuryet qd &lt;- readRDS(&quot;quanteda/tr_TUR_cumhur.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;tr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/tr_TUR_cumhur.RDS&quot;) qd9&lt;-qd table(qd$nbregs) 4.6.10 Yeni Safak qd &lt;- readRDS(&quot;quanteda/tr_TUR_yenisa.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;tr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/tr_TUR_yenisa.RDS&quot;) qd10&lt;-qd table(qd$nbregs) 4.6.11 Babnet qd &lt;- readRDS(&quot;quanteda/ar_TUN_babnet.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;ar&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/ar_TUN_babnet.RDS&quot;) qd11&lt;-qd table(qd$nbregs) 4.6.12 Réalités qd &lt;- readRDS(&quot;quanteda/fr_TUN_realit.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;fr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/fr_TUN_realit.RDS&quot;) qd12&lt;-qd table(qd$nbregs) 4.6.13 Economiste Maghrebin qd &lt;- readRDS(&quot;quanteda/fr_TUN_ecomag.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;fr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/fr_TUN_ecomag.RDS&quot;) qd13&lt;-qd table(qd$nbregs) 4.6.14 La Presse qd &lt;- readRDS(&quot;quanteda/fr_TUN_presse.RDS&quot;) qd &lt;- extract_tags (qd = qd, lang=&quot;fr&quot;, dict = dict, ctrl = ctrl, split = TRUE, tolow = FALSE) saveRDS(qd,&quot;quanteda/fr_TUN_presse.RDS&quot;) qd14&lt;-qd table(qd$nbregs) 4.6.15 Global corpus qd &lt;- c(qd1,qd2,qd3,qd4,qd5,qd6,qd7,qd8,qd9,qd10,qd11,qd12,qd13,qd14) saveRDS(qd,&quot;quanteda/corpus_worldreg_001.RDS&quot;) second largest continent in the world in terms of area and population, comes second only to Asia. "],["24-Hypercube.html", "Chapter 5 Hypercube 5.1 Objectives 5.2 Prepare data 5.3 World Region 5.4 Analysis of the Media x Region table", " Chapter 5 Hypercube library(knitr) library(dplyr) library(quanteda) library(data.table) library(tidytext) library(FactoMineR) library(Factoshiny) library(explor) 5.1 Objectives We have created a list of tags relate to world regions for news published in 14 newspapers. We propose now to build an hypercube in order to explore the results. 5.2 Prepare data 5.2.1 Load corpus qd&lt;-readRDS(&quot;quanteda/corpus_worldreg_001.RDS&quot;) 5.2.2 Load hypercube function hypercube &lt;-function(qd = qd, when = &quot;date&quot;, when_cut = &quot;year&quot;, who = &quot;source&quot;, where1 = &quot;tags&quot;, where2 = &quot;tags&quot;) { # create data.table accroding to parameter chosen don&lt;-docvars(qd) df&lt;-data.table(id = docid(qd), who = don[,who], when = as.character(cut(don[,when],breaks=when_cut)), where1 = don[,where1], where2 = don[,where2]) # add code _no_ for empty fields df$where1[df$where1==&quot;&quot;]&lt;-&quot;_no_&quot; df$where2[df$where2==&quot;&quot;]&lt;-&quot;_no_&quot; # unnest where1 df&lt;-unnest_tokens(df,where1,where1,to_lower=F) # unnest where2 df&lt;-unnest_tokens(df,where2,where2,to_lower=F) # define number of occurence by id nb&lt;-df[,.N,list(id)] %&gt;% mutate(wgt = 1/N) %&gt;% select(-N) df&lt;-df %&gt;% left_join(nb) rm(nb) # Aggregate hc&lt;- df[,.( tags = .N, news=sum(wgt)) ,.(who, when,where1,where2)] # Convert date to time hc$when&lt;-as.Date(hc$when) # return hypercube return(hc) } 5.2.3 Create Hypercube hc_reg &lt;- hypercube(qd = qd, when = &quot;date&quot;, when_cut = &quot;months&quot;, who = &quot;source&quot;, where1 = &quot;regs&quot;, where2 = &quot;regs&quot;) Joining, by = &quot;id&quot; kable(head(hc_reg)) who when where1 where2 tags news fr_FRA_figaro 2019-01-01 no no 3417 3417 fr_FRA_figaro 2019-01-01 Q46 Q46 15 15 fr_FRA_figaro 2019-01-01 Q4918 Q4918 2 2 fr_FRA_figaro 2019-01-01 Q7204 Q7204 1 1 fr_FRA_figaro 2019-01-01 Q51 Q51 1 1 fr_FRA_figaro 2019-01-01 Q18 Q18 1 1 5.2.4 Load Wikidata entity names reg_def&lt;-readRDS(&quot;dict/worldreg001_def.RDS&quot;) tab_def&lt;-dcast(reg_def, formula =id~lang, value.var=&quot;label&quot;) Warning in dcast(reg_def, formula = id ~ lang, value.var = &quot;label&quot;): The dcast generic in data.table has been passed a data.frame and will attempt to redirect to the reshape2::dcast; please note that reshape2 is deprecated, and this redirection is now deprecated as well. Please do this redirection yourself like reshape2::dcast(reg_def). In the next version, this warning will become an error. kable(head(tab_def)) id ar de en fr tr Q1070940 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0648&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0627&gt;&lt;U+062F&gt;&lt;U+0626&gt; Asien-Pazifik Asia-Pacific Asie-Pacifique Asya-Pasifik Q11708 &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Südostasien Southeast Asia Asie du Sud-Est Güneydogu Asya Q1239 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0646&gt;&lt;U+062F&gt;&lt;U+064A&gt; Indischer Ozean Indian Ocean océan Indien Hint Okyanusu Q12585 &lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+062A&gt;&lt;U+064A&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0629&gt; Lateinamerika Latin America Amérique latine Latin Amerika Q128011 &lt;U+062C&gt;&lt;U+0632&gt;&lt;U+0631&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0646&gt;&lt;U+062A&gt;&lt;U+064A&gt;&lt;U+0644&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+0628&gt;&lt;U+0631&gt;&lt;U+0649&gt; Große Antillen Greater Antilles Grandes Antilles Büyük Antiller Q12824780 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0649&gt; Kleinasien Asia Minor Asie mineure Anadolu 5.3 World Region 5.3.1 Which % of news ? What is the percentage of news where at less one world region is mentionned ? hc_reg$tagged&lt;-hc_reg$where1!=&quot;_no_&quot; df&lt;-hc_reg[,list(nb = sum(news)), list(who, tagged)] %&gt;% dcast(formula = who~tagged, value.var = &quot;nb&quot;) names(df)&lt;-c(&quot;media&quot;,&quot;No&quot;, &quot;Yes&quot;) df$Tot = df$No+df$Yes df$Pct = 100*df$Yes/df$Tot df&lt;-df[order(df$Pct)] kable(df, digits=2) media No Yes Tot Pct en_NIR_beltel 99494 438 99932 0.44 fr_TUN_realit 22886 156 23042 0.68 fr_TUN_presse 11466 87 11553 0.75 en_IRL_irtime 107619 860 108479 0.79 ar_TUN_babnet 42258 391 42649 0.92 fr_TUN_ecomag 12637 157 12794 1.23 tr_TUR_cumhur 132014 1699 133713 1.27 fr_FRA_figaro 126984 1823 128807 1.42 en_GBR_telegr 41152 651 41803 1.56 de_DEU_suddeu 34886 558 35444 1.57 fr_FRA_lmonde 48946 785 49731 1.58 tr_TUR_yenisa 96089 1549 97638 1.59 de_DEU_frankf 86352 1961 88313 2.22 en_GBR_guardi 76092 1783 77875 2.29 We observe that the share is comprised between 0.44% (Belfast Telegraph, Ulster) and 2.29% (The Guardian, United Kingdom). 5.3.2 Which regions are the most mentionned ? Iw we put together all newspapers, we obtain the following table # Compute df&lt;-hc_reg[where1 !=&quot;_no_&quot;,list(nb = sum(news)), list(where1)] df&lt;-merge(tab_def,df,by.x=&quot;id&quot;,by.y=&quot;where1&quot;,all.x=F,all.y=T) df&lt;-df[order(df$nb, decreasing = T),] row.names(df)&lt;-1:dim(df)[1] kable(df, digits=0,row.names = T) id ar de en fr tr nb 1 Q46 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; Europa Europe Europe Avrupa 4546 2 Q828 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+062A&gt;&lt;U+0627&gt;&lt;U+0646&gt; Amerika Americas Amérique Amerika 2431 3 Q15 &lt;U+0625&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Afrika Africa Afrique Afrika 1022 4 Q4918 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0628&gt;&lt;U+062D&gt;&lt;U+0631&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0636&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062A&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt; Mittelmeer Mediterranean Sea mer Méditerranée Akdeniz 912 5 Q12824780 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0649&gt; Kleinasien Asia Minor Asie mineure Anadolu 457 6 Q7204 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt; Mittlerer Osten Middle East Moyen-Orient Orta Dogu 332 7 Q48 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Asien Asia Asie Asya 293 8 Q66065 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0633&gt;&lt;U+0627&gt;&lt;U+062D&gt;&lt;U+0644&gt; Sahelzone Sahel Sahel Sahel 240 9 Q98 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0627&gt;&lt;U+062F&gt;&lt;U+0626&gt; Pazifischer Ozean Pacific Ocean océan Pacifique Büyük Okyanus 200 10 Q25322 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+0646&gt;&lt;U+0637&gt;&lt;U+0642&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0637&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+064A&gt;&lt;U+0629&gt; Arktis Arctic Arctique Arktika 180 11 Q97 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0637&gt;&lt;U+0644&gt;&lt;U+0633&gt;&lt;U+064A&gt; Atlantischer Ozean Atlantic Ocean océan Atlantique Atlas Okyanusu 180 12 Q1286 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0644&gt;&lt;U+0628&gt; Alpen Alps Alpes Alpler 174 13 Q28227 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0631&gt;&lt;U+0628&gt;&lt;U+064A&gt; Maghreb Maghreb Maghreb Magrip 136 14 Q27394 &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Südliches Afrika Southern Africa Afrique australe Güney Afrika 126 15 Q6583 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+062D&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0621&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+0628&gt;&lt;U+0631&gt;&lt;U+0649&gt; Sahara Sahara Sahara Sahra 122 16 Q12585 &lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+062A&gt;&lt;U+064A&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0629&gt; Lateinamerika Latin America Amérique latine Latin Amerika 122 17 Q664609 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0643&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0628&gt;&lt;U+064A&gt; Karibik Caribbean Caraïbes Karayipler 110 18 Q51 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0637&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Antarktika Antarctica Antarctique Antarktika 105 19 Q2841453 NA Amazonien Amazonia Amazonie NA 104 20 Q48214 &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0623&gt;&lt;U+062F&gt;&lt;U+0646&gt;&lt;U+0649&gt; Naher Osten Near East Proche-Orient Yakin Dogu 84 21 Q35942 &lt;U+0628&gt;&lt;U+0648&gt;&lt;U+0644&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0632&gt;&lt;U+064A&gt;&lt;U+0627&gt; Polynesien Polynesia Polynésie Polinezya 82 22 Q18 &lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Südamerika South America Amérique du Sud Güney Amerika 74 23 Q23522 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0628&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0646&gt; Balkanhalbinsel Balkans Balkans Balkanlar 71 24 Q5401 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Eurasien Eurasia Eurasie Avrasya 65 25 Q11708 &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Südostasien Southeast Asia Asie du Sud-Est Güneydogu Asya 56 26 Q27611 &lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt;&lt;U+0649&gt; Zentralamerika Central America Amérique centrale Orta Amerika 48 27 Q166131 &lt;U+062C&gt;&lt;U+0632&gt;&lt;U+0631&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0623&gt;&lt;U+0646&gt;&lt;U+062A&gt;&lt;U+064A&gt;&lt;U+0644&gt; Antillen Antilles Antilles Antiller 46 28 Q34675 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062E&gt;&lt;U+0644&gt;&lt;U+064A&gt;&lt;U+062C&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0639&gt;&lt;U+0631&gt;&lt;U+0628&gt;&lt;U+064A&gt; Persischer Golf Persian Gulf golfe Persique Basra Körfezi 46 29 Q37660 &lt;U+0628&gt;&lt;U+062D&gt;&lt;U+0631&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+064A&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt; Südchinesisches Meer South China Sea mer de Chine méridionale Güney Çin Denizi 43 30 Q49 &lt;U+0623&gt;&lt;U+0645&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+064A&gt;&lt;U+0629&gt; Nordamerika North America Amérique du Nord Kuzey Amerika 40 31 Q27468 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Osteuropa Eastern Europe Europe de lEst Dogu Avrupa 36 32 Q18869 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0648&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0632&gt; Kaukasus Caucasus Caucase Kafkasya 34 33 Q27381 &lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Nordafrika North Africa Afrique du Nord Kuzey Afrika 31 34 Q27275 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt;&lt;U+0649&gt; Zentralasien Central Asia Asie centrale Orta Asya 30 35 Q5451 &lt;U+0647&gt;&lt;U+064A&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+064A&gt;&lt;U+0627&gt; Himalaya Himalayas Himalaya Himalaya Daglari 30 36 Q4412 &lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Westafrika West Africa Afrique de lOuest Bati Afrika 29 37 Q1070940 &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0648&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0627&gt;&lt;U+062F&gt;&lt;U+0626&gt; Asien-Pazifik Asia-Pacific Asie-Pacifique Asya-Pasifik 26 38 Q132959 &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+062D&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0621&gt; Subsahara-Afrika Sub-Saharan Africa Afrique subsaharienne Sahraalti Afrika 25 39 Q1239 &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0645&gt;&lt;U+062D&gt;&lt;U+064A&gt;&lt;U+0637&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0646&gt;&lt;U+062F&gt;&lt;U+064A&gt; Indischer Ozean Indian Ocean océan Indien Hint Okyanusu 24 40 Q27407 &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Ostafrika East Africa Afrique de lEst Dogu Afrika 21 41 Q21195 &lt;U+0625&gt;&lt;U+0633&gt;&lt;U+0643&gt;&lt;U+0646&gt;&lt;U+062F&gt;&lt;U+0646&gt;&lt;U+0627&gt;&lt;U+0641&gt;&lt;U+064A&gt;&lt;U+0627&gt; Skandinavien Scandinavia Scandinavie Iskandinavya 20 42 Q27509 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt;&lt;U+0649&gt; Mitteleuropa Central Europe Europe centrale Orta Avrupa 19 43 Q27449 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Südeuropa Southern Europe Europe du Sud Güney Avrupa 18 44 Q771405 &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Südasien South Asia Asie du Sud Güney Asya 16 45 Q27433 &lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; Zentralafrika Central Africa Afrique centrale Orta Afrika 16 46 Q5463 &lt;U+062C&gt;&lt;U+0628&gt;&lt;U+0627&gt;&lt;U+0644&gt; &lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0643&gt;&lt;U+064A&gt; Rocky Mountains Rocky Mountains montagnes Rocheuses Rocky Daglari 15 47 Q27479 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0645&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+064A&gt;&lt;U+0629&gt; Nordeuropa Northern Europe Europe du Nord Kuzey Avrupa 11 48 Q27231 &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0622&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Ostasien East Asia Asie de lEst Dogu Asya 10 49 Q538 &lt;U+062C&gt;&lt;U+0632&gt;&lt;U+064A&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Ozeanien Insular Oceania Océanie Okyanusya 9 50 Q27496 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0629&gt; Westeuropa Western Europe Europe de lOuest Bati Avrupa 8 51 Q5456 &lt;U+0623&gt;&lt;U+0646&gt;&lt;U+062F&gt;&lt;U+064A&gt;&lt;U+0632&gt; Anden Andes cordillère des Andes And Daglari 5 52 Q210682 &lt;U+063A&gt;&lt;U+0631&gt;&lt;U+0628&gt; &lt;U+0623&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+064A&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0641&gt;&lt;U+0631&gt;&lt;U+0646&gt;&lt;U+0633&gt;&lt;U+064A&gt; Französisch-Westafrika French West Africa Afrique-Occidentale française Fransiz Bati Afrikasi 4 53 Q60140 &lt;U+0634&gt;&lt;U+0628&gt;&lt;U+0647&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0642&gt;&lt;U+0627&gt;&lt;U+0631&gt;&lt;U+0629&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0647&gt;&lt;U+0646&gt;&lt;U+062F&gt;&lt;U+064A&gt;&lt;U+0629&gt; indischer Subkontinent Indian subcontinent sous-continent indien Hint altkitasi 3 54 Q16389571 &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0648&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt; &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; Ostmitteleuropa East-Central Europe Europe médiane NA 2 55 Q3359409 &lt;U+0645&gt;&lt;U+064A&gt;&lt;U+0643&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0633&gt;&lt;U+064A&gt;&lt;U+0627&gt; Mikronesien Micronesia Micronésie Mikronezya 2 56 Q37394 &lt;U+0645&gt;&lt;U+064A&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+0646&gt;&lt;U+064A&gt;&lt;U+0632&gt;&lt;U+064A&gt;&lt;U+0627&gt; Melanesien Melanesia Mélanésie Melanezya 2 57 Q45341 &lt;U+0628&gt;&lt;U+062D&gt;&lt;U+0631&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0635&gt;&lt;U+064A&gt;&lt;U+0646&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt;&lt;U+064A&gt; Ostchinesisches Meer East China Sea mer de Chine orientale Dogu Çin Denizi 2 58 Q900636 &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; &lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0648&gt;&lt;U+0633&gt;&lt;U+0637&gt;&lt;U+0649&gt; &lt;U+0648&gt;&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt;&lt;U+064A&gt;&lt;U+0629&gt; Mittel- und Osteuropa Central and Eastern Europe Europe centrale et orientale NA 2 59 Q263686 &lt;U+062C&gt;&lt;U+0646&gt;&lt;U+0648&gt;&lt;U+0628&gt; &lt;U+0634&gt;&lt;U+0631&gt;&lt;U+0642&gt; &lt;U+0623&gt;&lt;U+0648&gt;&lt;U+0631&gt;&lt;U+0648&gt;&lt;U+0628&gt;&lt;U+0627&gt; Südosteuropa Southeast Europe Europe du Sud-Est Güneydogu Avrupa 2 5.3.3 Top regions by media We eliminate Q828 (Americas) as it refers generally to a country # Compute df&lt;-hc_reg[where1 !=&quot;_no_&quot;,list(nb = sum(news)), list(where1, who)] %&gt;% group_by(who) %&gt;% filter(where1 != &quot;Q828&quot;)%&gt;% mutate(pct = 100*nb/sum(nb), rnk = rank(-nb)) reg_def_en&lt;-reg_def[reg_def$lang==&quot;en&quot;,c(1,3)] df&lt;-merge(df,reg_def_en,by.x=&quot;where1&quot;,by.y=&quot;id&quot;) res &lt;- df %&gt;% filter(rnk &lt; 11) %&gt;% select(who, rnk,label, pct) %&gt;% mutate(who=substr(who,4,12)) res&lt;-res[order(res$who, res$rnk),] kable(res,digits=c(0,1)) who rnk label pct 70 DEU_frank 1.0 Europe 54.0 19 DEU_frank 2.0 Africa 6.4 41 DEU_frank 3.0 Southern Africa 5.9 94 DEU_frank 4.0 Mediterranean Sea 4.7 73 DEU_frank 5.0 Asia 3.9 8 DEU_frank 6.0 Alps 3.2 126 DEU_frank 7.0 Middle East 2.3 44 DEU_frank 8.0 Eastern Europe 1.9 31 DEU_frank 9.0 Balkans 1.8 29 DEU_frank 10.0 South America 1.4 63 DEU_sudde 1.0 Europe 47.8 27 DEU_sudde 2.0 Africa 8.0 119 DEU_sudde 3.0 Middle East 7.8 90 DEU_sudde 4.0 Mediterranean Sea 7.2 11 DEU_sudde 5.0 Alps 4.6 39 DEU_sudde 6.0 Southern Africa 3.3 84 DEU_sudde 7.0 Near East 2.4 28 DEU_sudde 8.0 South America 2.3 3 DEU_sudde 9.5 Latin America 1.6 35 DEU_sudde 9.5 Arctic 1.6 57 FRA_figar 1.0 Europe 39.3 85 FRA_figar 2.0 Mediterranean Sea 8.2 24 FRA_figar 3.0 Africa 5.9 107 FRA_figar 4.0 Sahel 4.9 52 FRA_figar 5.0 Amazonia 4.6 7 FRA_figar 6.0 Alps 3.7 54 FRA_figar 7.0 Polynesia 3.3 121 FRA_figar 8.0 Middle East 2.9 138 FRA_figar 9.0 Pacific Ocean 2.5 80 FRA_figar 10.0 Asia 2.2 65 FRA_lmond 1.0 Europe 27.2 21 FRA_lmond 2.0 Africa 18.5 110 FRA_lmond 3.0 Sahel 9.9 93 FRA_lmond 4.0 Mediterranean Sea 8.6 83 FRA_lmond 5.0 Near East 4.2 122 FRA_lmond 6.0 Middle East 3.8 51 FRA_lmond 7.0 Amazonia 2.5 9 FRA_lmond 8.5 Alps 2.5 55 FRA_lmond 8.5 Polynesia 2.5 104 FRA_lmond 10.0 Sahara 2.1 62 GBR_guard 1.0 Europe 36.6 16 GBR_guard 2.0 Africa 9.6 34 GBR_guard 3.0 Arctic 7.2 141 GBR_guard 4.0 Pacific Ocean 7.0 120 GBR_guard 5.0 Middle East 6.7 133 GBR_guard 6.0 Atlantic Ocean 4.4 71 GBR_guard 7.0 Asia 3.0 2 GBR_guard 8.0 Latin America 2.9 96 GBR_guard 9.0 Antarctica 2.6 114 GBR_guard 10.0 Caribbean 2.4 59 GBR_teleg 1.0 Europe 50.6 25 GBR_teleg 2.0 Africa 12.5 74 GBR_teleg 3.0 Asia 4.8 113 GBR_teleg 4.0 Caribbean 4.0 137 GBR_teleg 5.0 Pacific Ocean 3.3 125 GBR_teleg 6.0 Middle East 2.8 1 GBR_teleg 7.5 Southeast Asia 2.6 33 GBR_teleg 7.5 Arctic 2.6 56 GBR_teleg 9.5 South China Sea 1.8 134 GBR_teleg 9.5 Atlantic Ocean 1.8 61 IRL_irtim 1.0 Europe 56.4 132 IRL_irtim 2.0 Atlantic Ocean 4.5 17 IRL_irtim 3.0 Africa 4.4 75 IRL_irtim 4.0 Asia 3.9 140 IRL_irtim 5.0 Pacific Ocean 3.8 124 IRL_irtim 6.0 Middle East 3.7 115 IRL_irtim 7.0 Caribbean 2.5 50 IRL_irtim 8.0 Maghreb 1.9 10 IRL_irtim 9.0 Alps 1.7 4 IRL_irtim 10.0 Latin America 1.6 58 NIR_belte 1.0 Europe 51.1 26 NIR_belte 2.0 Africa 7.4 130 NIR_belte 3.0 Atlantic Ocean 7.3 32 NIR_belte 4.0 Arctic 5.7 127 NIR_belte 5.0 Middle East 4.6 72 NIR_belte 6.0 Asia 4.5 112 NIR_belte 7.0 Caribbean 3.4 139 NIR_belte 8.0 Pacific Ocean 3.1 30 NIR_belte 10.0 South America 1.3 45 NIR_belte 10.0 Central America 1.3 53 NIR_belte 10.0 Persian Gulf 1.3 15 TUN_babne 1.0 Africa 46.3 60 TUN_babne 2.0 Europe 22.7 48 TUN_babne 3.5 Maghreb 6.8 108 TUN_babne 3.5 Sahel 6.8 128 TUN_babne 5.0 Middle East 5.5 76 TUN_babne 6.0 Asia 4.8 89 TUN_babne 7.5 Mediterranean Sea 1.4 131 TUN_babne 7.5 Atlantic Ocean 1.4 13 TUN_babne 9.0 Sub-Saharan Africa 0.8 22 TUN_ecoma 1.0 Africa 34.3 49 TUN_ecoma 2.0 Maghreb 18.6 88 TUN_ecoma 3.0 Mediterranean Sea 14.7 64 TUN_ecoma 4.0 Europe 11.9 38 TUN_ecoma 5.0 North Africa 5.8 111 TUN_ecoma 6.5 Sahel 4.2 118 TUN_ecoma 6.5 Middle East 4.2 101 TUN_ecoma 8.0 Sahara 2.9 78 TUN_ecoma 9.0 Asia 1.9 12 TUN_ecoma 10.5 Sub-Saharan Africa 0.6 43 TUN_ecoma 10.5 Central Africa 0.6 91 TUN_press 1.0 Mediterranean Sea 30.8 14 TUN_press 2.0 Africa 30.2 106 TUN_press 3.0 Sahel 15.1 47 TUN_press 4.0 Maghreb 6.4 68 TUN_press 5.0 Europe 4.7 37 TUN_press 6.0 North Africa 4.1 103 TUN_press 7.0 Sahara 3.5 77 TUN_press 8.0 Asia 2.3 129 TUN_press 9.0 Middle East 1.7 135 TUN_press 10.0 Pacific Ocean 1.2 20 TUN_reali 1.0 Africa 40.0 69 TUN_reali 2.0 Europe 14.2 46 TUN_reali 3.0 Maghreb 11.0 109 TUN_reali 4.0 Sahel 9.7 86 TUN_reali 5.0 Mediterranean Sea 9.0 100 TUN_reali 6.0 Sahara 8.1 116 TUN_reali 7.0 Middle East 2.9 36 TUN_reali 8.0 North Africa 2.6 136 TUN_reali 9.0 Pacific Ocean 1.9 82 TUN_reali 10.0 Asia 0.6 66 TUR_cumhu 1.0 Europe 52.2 5 TUR_cumhu 2.0 Asia Minor 17.5 87 TUR_cumhu 3.0 Mediterranean Sea 13.4 23 TUR_cumhu 4.0 Africa 3.4 81 TUR_cumhu 5.0 Asia 2.4 99 TUR_cumhu 6.0 Eurasia 2.0 42 TUR_cumhu 7.0 Southern Africa 1.6 95 TUR_cumhu 8.0 Antarctica 1.2 105 TUR_cumhu 9.0 Sahara 1.0 123 TUR_cumhu 10.0 Middle East 0.9 67 TUR_yenis 1.0 Europe 46.8 92 TUR_yenis 2.0 Mediterranean Sea 21.1 6 TUR_yenis 3.0 Asia Minor 11.0 18 TUR_yenis 4.0 Africa 6.2 79 TUR_yenis 5.0 Asia 2.6 98 TUR_yenis 6.0 Eurasia 2.1 102 TUR_yenis 7.0 Sahara 1.4 117 TUR_yenis 8.0 Middle East 1.3 40 TUR_yenis 9.0 Southern Africa 1.3 97 TUR_yenis 10.0 Antarctica 1.1 5.4 Analysis of the Media x Region table 5.4.1 Matrix creation # Matrix reg_med &lt;-hc_reg[where1 !=&quot;_no_&quot;,list(nb = sum(news)), list(where1, who)] %&gt;% dcast(formula = where1~who, value.var = &quot;nb&quot;,fill = 0) mat&lt;-as.matrix(reg_med[,-1]) # Labels lab&lt;-reg_med[,1] %&gt;% rename(id=where1) %&gt;% left_join(tab_def) Joining, by = &quot;id&quot; # Row.names (choose the language you want !) row.names(mat)&lt;-lab$en # Filter ambiguous units mat&lt;-mat[row.names(mat) != &quot;Americas&quot;,] mat&lt;-mat[row.names(mat) != &quot;Asia Minor&quot;,] mat&lt;-mat[row.names(mat) != &quot;Southern Africa&quot;,] mat[1:5,1:5] ar_TUN_babnet de_DEU_frankf de_DEU_suddeu en_GBR_guardi Asia-Pacific 0.0 0.0 0 9.0 Southeast Asia 0.0 12.0 6 8.0 Indian Ocean 0.0 0.0 2 3.0 Latin America 1.5 9.0 8 29.5 Alps 0.0 29.5 23 19.0 en_GBR_telegr Asia-Pacific 0 Southeast Asia 13 Indian Ocean 5 Latin America 8 Alps 5 5.4.2 Matrix selection # Select units &gt; 20 sel&lt;-mat[apply(mat,1,sum)&gt;20,] # Exclude units mentionned by less than 3 media sel &lt;- sel[apply(sel&gt;0,1,sum)&gt;1,] 5.4.3 Correspondance analysis afc &lt;- CA(sel, graph = F) #explor(afc) 5.4.3.1 Factors 1-2 res &lt;- explor::prepare_results(afc) explor::CA_var_plot(res, xax = 1, yax = 2, lev_sup = FALSE, var_sup = FALSE, var_sup_choice = , var_hide = &quot;None&quot;, var_lab_min_contrib = 0, col_var = &quot;Position&quot;, symbol_var = NULL, size_var = &quot;Contrib&quot;, size_range = c(52.5, 700), labels_size = 10, point_size = 56, transitions = TRUE, labels_positions = &quot;auto&quot;, xlim = c(-1.15, 1.94), ylim = c(-1.52, 1.56)) 5.4.3.2 Factors 3-4 res &lt;- explor::prepare_results(afc) explor::CA_var_plot(res, xax = 3, yax = 4, lev_sup = FALSE, var_sup = FALSE, var_sup_choice = , var_hide = &quot;None&quot;, var_lab_min_contrib = 0, col_var = &quot;Position&quot;, symbol_var = NULL, size_var = &quot;Contrib&quot;, size_range = c(52.5, 700), labels_size = 10, point_size = 56, transitions = TRUE, labels_positions = &quot;auto&quot;, xlim = c(-1.76, 1.08), ylim = c(-1.38, 1.46)) 5.4.4 Cluster analysis 1 (world regions) cah1 &lt;- HCPC(afc,nb.clust = 5,graph = FALSE) plot.HCPC(cah1,choice=&quot;tree&quot;) 5.4.5 Cluster analysis 2 (medias) cah2 &lt;- HCPC(afc,nb.clust = 5,graph = FALSE,cluster.CA = &quot;columns&quot;) plot.HCPC(cah2,choice=&quot;tree&quot;) "],["31_geonetworks.html", "Chapter 6 Geonetworks 6.1 Geotags 6.2 Hypercubes 6.3 Linkages 6.4 Visualization", " Chapter 6 Geonetworks We present here the program used for the elaboration of networks of states and regions that has been presented at the 3rd IMAGEUN workshop in Paris the 12-13 July 2021. 6.1 Geotags During this first step, we proceed in three steps to (1) the selection of the corpus, (2) the tokenization and cleaning of the text and (3) the creation of compounds and the extraction of tags related togeographical names. 6.1.1 Select corpus We load a coprus of title of news stored in quanteda forma # Load external corpus qd&lt;-readRDS(&quot;quanteda/fr_FRA_figaro.RDS&quot;) 6.1.2 Tokenize We proceed to a first tokenization with minimal option and we save the results in a file as the time of computation is very long. In the french case, we eliminate the apostrophe # Tokenize text toks&lt;-tokens(qd) # Split french apostroph toks&lt;- tokens_split(toks, &quot;&#39;&quot;) 6.1.3 identify geotags We produce a list of tags based on a dictionary. To do that it is necessary to transform the keywords in blankspace into compounds. It is also important to add external compounds that can be a problem. List of tags are produced for the whole dictionary but also for the different subtypes. Tags are uique at sentence level. # Load tags dictionary tags&lt;-read.csv2(&quot;data/corpora/TUN/geo_names_fr_V2.csv&quot;, header=T, sep=&quot;;&quot;) # create compounds presents in the dictionnary tags$ntoks&lt;-ntoken(tokens(tags$tokens)) sel&lt;-tags[tags$ntoks&gt;1,] toks2&lt;-tokens_compound(toks, pattern=phrase(sel$tokens)) # Create other compounds of interest not present in dictionary (e.g. Europe 1) comp &lt;- phrase(c(&quot;europe 1&quot;, &quot;france inter&quot;, &quot;union européenne&quot;, &quot;conseil de l europe&quot;, &quot;agence france presse&quot;)) toks2&lt;-tokens_compound(toks2, pattern=comp) # Build dictionnary keys &lt;-gsub(&quot; &quot;,&quot;_&quot;,tags$tokens) dict&lt;-as.list(keys) names(dict)&lt;-tags$code dico&lt;-dictionary(dict) # Identify geo tags (states or reg or org ...) toks_tags &lt;- tokens_lookup(toks2, dico) toks_tags &lt;- lapply(toks_tags, unique) toks_tags&lt;-as.tokens(toks_tags) list_tags&lt;-function(x){res&lt;-paste(x, collapse=&#39; &#39;)} qd$tags&lt;-as.character(lapply(toks_tags,FUN=list_tags)) qd$nbtags&lt;-ntoken(toks_tags) # Save corpus saveRDS(qd,&quot;quanteda/fr_FRA_figaro_geo.Rdata&quot;) 6.2 Hypercubes During this second step, we will produce aggregates of news called hypercubes which provide a number of to links between geographical units found in the text. Different options are possible which desserve the creation of a function with parameters. 6.2.1 Load data We start from the results of the previous step and we load the dictionary used for tagging and the tags describing the texts. Th example chosen is * Le Figaro*. # Load quanteda corpus with geotags qd&lt;-readRDS(&quot;quanteda/fr_FRA_figaro_geo.Rdata&quot;) 6.2.2 Hypercube Function We start by the creation of a global hypercube crossing all the geographical tags by media and data, whatever their type (state or region). hypercube &lt;-function(qd = qd, when = &quot;date&quot;, when_cut = &quot;year&quot;, who = &quot;source&quot;, where1 = &quot;tags&quot;, where2 = &quot;tags&quot;) { # create data.table accroding to parameter chosen don&lt;-docvars(qd) df&lt;-data.table(id = docid(qd), who = don[,who], when = as.character(cut(don[,when],breaks=when_cut)), where1 = don[,where1], where2 = don[,where2]) # add code _no_ for empty fields df$where1[df$where1==&quot;&quot;]&lt;-&quot;_no_&quot; df$where2[df$where2==&quot;&quot;]&lt;-&quot;_no_&quot; # unnest where1 df&lt;-unnest_tokens(df,where1,where1,to_lower=F) # unnest where2 df&lt;-unnest_tokens(df,where2,where2,to_lower=F) # define number of occurence by id nb&lt;-df[,.N,list(id)] %&gt;% mutate(wgt = 1/N) %&gt;% select(-N) df&lt;-df %&gt;% left_join(nb) rm(nb) # Aggregate hc&lt;- df[,.( tags = .N, news=sum(wgt)) ,.(who, when,where1,where2)] # Convert date to time hc$when&lt;-as.Date(hc$when) # return hypercube return(hc) } 6.2.3 Build hypercube Depending on the hypothesis, different types of hypercubes can be quickly created with the function. This hypercube is dedicated to the creation of a full network linking geographical tags. We present here an example where we mix all geo names (states and regions together). But we can further create differences between links relating states, links relating regions, linkes relating states and regions, etc. hc_geo_geo &lt;- hypercube(qd = qd, when = &quot;date&quot;, when_cut = &quot;months&quot;, who = &quot;source&quot;, where1 = &quot;tags&quot;, where2 = &quot;tags&quot;) head(hc_geo_geo) FALSE who when where1 where2 tags news FALSE 1: fr_FRA_figaro 2019-01-01 _no_ _no_ 2769 2769.00 FALSE 2: fr_FRA_figaro 2019-01-01 COD COD 25 25.00 FALSE 3: fr_FRA_figaro 2019-01-01 QAT QAT 3 3.00 FALSE 4: fr_FRA_figaro 2019-01-01 CHN_HKG CHN_HKG 4 4.00 FALSE 5: fr_FRA_figaro 2019-01-01 GAB GAB 5 5.00 FALSE 6: fr_FRA_figaro 2019-01-01 SYR SYR 49 46.75 6.3 Linkages The objective of this step is to propose a random model of allocation of linkages between two groups of geographical units that can be the same or different. We start from an hypercube (see. step 2) which is transformed into an interaction matrix where a double constraint model is applied. Different options are introduced, in particular for the filtering of geographical units wit small number of occurences. As in previous section, we propose a function dedicated to the task of estimation of the model of interest. 6.3.1 Select links We want to produce a selection of the hypercube data set and to normalize the datain order to keep only two columns of location corresponding to where1, where2. The function will also help us to select data according to the dimensions who and when and the possible selection or exclusion of elements from where1 and where2 hc_filter &lt;- function(don = hc, who = &quot;who&quot;, when = &quot;when&quot;, where1 = &quot;where1&quot;, where2 = &quot;where2&quot;, wgt = &quot;tags&quot;, self = FALSE, when_start = NA, when_end = NA, who_exc = NA, who_inc = NA, where1_exc = NA, where1_inc = NA, where2_exc = NA, where2_inc = NA) { df&lt;-data.table(who = don[[who]], when = don[[when]], where1 = don[[where1]], where2 = don[[where2]], wgt = don[[wgt]]) # Select time period if (is.na(when_start)==FALSE) { df &lt;- df[when &gt;= as.Date(when_start), ]} if (is.na(when_end)==FALSE) { df &lt;- df[when &lt;= as.Date(when_end), ]} # Select who if (is.na(who_exc)==FALSE) { df &lt;- df[!(who %in% who_exc), ]} if (is.na(who_inc)==FALSE) { df &lt;- df[(who %in% who_inc), ]} # Select where1 if (is.na(where1_exc)==FALSE) { df &lt;- df[!(where1 %in% where1_exc), ]} if (is.na(where1_inc)==FALSE) { df &lt;- df[(where1 %in% where1_inc), ]} # Select where2 if (is.na(where2_exc)==FALSE) { df &lt;- df[!(where2 %in% where2_exc), ]} if (is.na(where2_inc)==FALSE) { df &lt;- df[(where2 %in% where2_inc), ]} # eliminate internal links if (self==FALSE) { df &lt;- df[(where1 != where2), ]} return(df) } Application now: hc&lt;-hc_filter(don = hc_geo_geo, wgt = &quot;tags&quot;, where1_exc = c(&quot;_no_&quot;), where2_exc = c(&quot;_no_&quot;), self = FALSE ) ` 6.3.2 Create interaction matrix Now, we transform the data in a matrix of interaction (i,j,Fij) whre we fill with 0 the empty cells. After that we eliminate the lines and columns wich do not fulfill one of the two conditions of salience and diversity : Salience (s1,s2) : For example, we will eliminate a country that has not be mentioned at less 20 times in the news. To do that, we compute the marginal sums of the matrix in lines (1) and columns (2) and we check if the condition is fulfilled. Diversity (n1,n2,k) : We consider that a linkage between units i and j exist if Fij &gt; k. Then we compute the number of links where the condition is verified in lines (1) and columns. To do that we compute a boolean matrix where the value are 0 if Fij &lt; k and 1 if Fi &gt;= k. And we verify if the marginal sums of the matrix verify the conditions n1 and n2. The default values are s1 = s2 = 5 n1 = n2 = 3 k = 0 They depend from the type of weight used. The previous parameter are adapted to the case where we use fractions of news as weighting criteria. They should be higher if we decide to use the number of tags. To do that, we create a specific function called build_mat . build_int &lt;- function(don = don, # a dataframe with columns i, j , Fij i = &quot;where1&quot;, j = &quot;where2&quot;, Fij = &quot;wgt&quot;, s1 = 1, s2 = 1, n1 = 1, n2 = 1, k = 0) { df&lt;-data.table(i=don[[i]],j=don[[j]],Fij=don[[Fij]]) int &lt;-df[,.(Fij=sum(Fij)),.(i,j)] int&lt;-dcast(int,formula = i~j,fill = 0) mat&lt;-as.matrix(int[,-1]) row.names(mat)&lt;-int$i mat&lt;-mat[apply(mat,1,sum)&gt;=s1,apply(mat,2,sum)&gt;=s2 ] m0&lt;-mat m0[m0&lt;k]&lt;-0 m0[m0&gt;=k]&lt;-1 mat&lt;-mat[apply(m0,1,sum)&gt;=n1,apply(m0,2,sum)&gt;=n2 ] int&lt;-melt(mat) names(int) &lt;-c(&quot;i&quot;,&quot;j&quot;,&quot;Fij&quot;) return(int) } Application now: int &lt;- build_int(don = hc, s1=1, s2=1, n1=1, n2=1, k=0) head(int) FALSE i j Fij FALSE 1 AFG AFG 0 FALSE 2 AFRIQUE AFG 0 FALSE 3 AF_centra AFG 0 FALSE 4 AF_est AFG 0 FALSE 5 AF_nord AFG 0 FALSE 6 AF_ouest AFG 0 6.3.3 Estimate random model We can now solve the model and compute the most important and significant residuals according to various criteria. We will therefore build a model where i, j and Fij will be completed by a column Eij which describe the expected number of news where i and j would be associated if the allocation was made randomly. It is important to check if the size of the matrix is not too large, in order to avoid computational crash  As a security, we introduce a parameter maxsize = 100000 defined by the product of numer of lines and columns If you decide to increase this parameter, it is at your own risk  When i and j describe the same spatial units (e.g. state x state or reg x reg), it can be important to eliminate the diagonal if it is empty or if we decide to focus only on external relations between geographical objects. For this reason, we introduce a parameter diag = TRUE or FALSE in the function rand_int() that solves the model We can eventually add to the data set further columns related to the residuals measures in different forms if we activate the parameter resid=TRUE : Rabs_ij = Fij-Eij : absolute residuals Rrel_ij = Fij/Eij : relative residuals Rchi_ij = sign(R_absij) x (Rabs_ij)^2 / Eij rand_int &lt;- function(int = int, # A table with columns i, j Fij maxsize = 100000, diag = FALSE, resid = FALSE) { # Eliminate diagonal ? if (diag==FALSE) { int &lt;- int[as.character(int$i) != as.character(int$j), ]} # Compute model if size not too large if (dim(int)[1] &lt; maxsize) { # Proceed to poisson regression model mod &lt;- glm( formula = Fij ~ i + j,family = &quot;poisson&quot;, data = int) # Add residuals if requested if(resid == TRUE) { # Add estimates int$Eij &lt;- mod$fitted.values # Add absolute residuals int$Rabs_ij &lt;- int$Fij-int$Eij # Add relative residuals int$Rrel_ij &lt;- int$Fij/int$Eij # Add chi-square residuals int$Rchi_ij &lt;- (int$Rabs_ij)**2 / int$Eij int$Rchi_ij[int$Rabs_ij&lt;0]&lt;- -int$Rchi_ij[int$Rabs_ij&lt;0] } } else { paste (&quot;Table &gt; 100000 - \\n modify maxsize = parameter \\n if you are sure that your computer can do it !&quot;)} # Export results int$i&lt;-as.character(int$i) int$j&lt;-as.character(int$j) return(int) } 6.3.3.1 Model wit France mod&lt;-rand_int(int, resid = TRUE, diag = FALSE) We can have a look at the more important positive residuals in absolute value : tab&lt;-mod[order(-mod$Rabs_ij),] tab&lt;-tab[(tab$i &gt; tab$j),] kable(head(tab,10) , digits=2, caption = &quot;Positive residuals&quot;) Table 6.1: Positive residuals i j Fij Eij Rabs_ij Rrel_ij Rchi_ij 20869 TUR SYR 45 5.26 39.74 8.56 300.54 10992 USA IRN 33 6.49 26.51 5.08 108.20 10637 PAK IND 24 0.65 23.35 37.20 845.54 8658 ITA FRA 61 38.02 22.98 1.60 13.89 8642 GBR_ENG FRA 35 17.65 17.35 1.98 17.06 4674 USA CHN 26 8.95 17.05 2.91 32.51 18766 UKR RUS 17 1.60 15.40 10.65 148.68 7506 FRA EUROPE 60 45.85 14.15 1.31 4.36 8674 MCO FRA 17 4.35 12.65 3.91 36.76 2160 FRA AUS 25 12.59 12.41 1.99 12.22 6.4 Visualization 6.4.1 Function We have created a prototype of geonetwork visualization function with different parameters making possible to display different graphs. geo_network&lt;- function(don = don, from = &quot;i&quot;, to = &quot;j&quot;, size = &quot;Fij&quot;, minsize = 1, maxsize = NA, test = &quot;Fij&quot;, mintest = 1, loops = FALSE, title = &quot;Network&quot;) { int&lt;-data.frame(i = as.character(don[,from]), j = as.character(don[,to]), size = don[,size], test = don[,test] ) if (is.na(minsize)==FALSE) {int =int[int$size &gt;= minsize,]} if (is.na(maxsize)==FALSE) {int =int[int$size &lt;= maxsize,]} if (is.na(mintest)==FALSE) {int =int[int$test &gt;= mintest,]} nodes&lt;-data.frame(code = unique(c(int$i,int$j))) nodes$code&lt;-as.character(nodes$code) nodes$id&lt;-1:length(nodes$code) nodes$label&lt;-nodes$code # Adjust edge codes edges &lt;- int %&gt;% mutate(width = 5+30*size / max(size)) %&gt;% left_join(nodes %&gt;% select(i=code, from = id)) %&gt;% left_join(nodes %&gt;% select(j=code, to = id )) # compute nodesize tot&lt;-int %&gt;% group_by(i) %&gt;% summarize(size =sum (size)) %&gt;% select (code=i,size) tot$code&lt;-as.factor(tot$code) nodes &lt;- left_join(nodes,tot) %&gt;% mutate(value = sqrt(10 *size/max(size))) #sel_nodes &lt;-nodes %&gt;% filter(code %in% unique(c(sel_edges$i,sel_edges$j))) # eliminate loops if(loops == FALSE) {edges &lt;- edges[edges$from &lt; edges$to,]} net&lt;- visNetwork(nodes, edges, main = title, height = &quot;700px&quot;, width = &quot;100%&quot;) %&gt;% visNodes(scaling =list(min =20, max=60, label=list(min=20,max=80, maxVisible = 20)))%&gt;% visOptions(highlightNearest = TRUE, # selectedBy = &quot;group&quot;, # manipulation = TRUE, nodesIdSelection = TRUE) %&gt;% visInteraction(navigationButtons = TRUE) %&gt;% visLegend() %&gt;% visIgraphLayout(layout =&quot;layout.fruchterman.reingold&quot;,smooth = TRUE) net return(net) } 6.4.1.1 Model without France mod2&lt;-rand_int(int %&gt;% filter(i != &quot;FRA&quot;, j !=&quot;FRA&quot;), resid = TRUE, diag = FALSE) We can have a look at the more important positive residuals in absolute value : tab&lt;-mod2[order(-mod2$Rabs_ij),] tab&lt;-tab[(tab$i &gt; tab$j),] kable(head(tab,10) , digits=2, caption = &quot;Positive residuals&quot;) Table 6.2: Positive residuals i j Fij Eij Rabs_ij Rrel_ij Rchi_ij 20579 TUR SYR 45 5.36 39.64 8.39 292.85 10763 USA IRN 33 8.18 24.82 4.04 75.37 10410 PAK IND 24 0.77 23.23 31.20 701.51 18489 UKR RUS 17 1.82 15.18 9.35 126.70 4645 USA CHN 26 11.20 14.80 2.32 19.54 6994 ITA ESP 17 4.57 12.43 3.72 33.75 10694 IRQ IRN 14 1.88 12.12 7.45 78.18 12851 TUR LBY 14 2.08 11.92 6.74 68.47 8765 ITA GBR_ENG 13 2.35 10.65 5.52 48.17 2122 CHN AUS 13 2.45 10.55 5.30 45.33 6.4.2 Raw network We can firstly provide a basic view of the network using the default parameters wich visualize all connections greater to zero. 6.4.2.1 With France geo_network(mod, size = &quot;Fij&quot;, minsize = 0, test = &quot;Fij&quot;, mintest = 5) 6.4.2.2 Without France geo_network(mod2, size = &quot;Fij&quot;, minsize = 0, test = &quot;Fij&quot;, mintest = 5) 6.4.3 Preferential links But we can also visualize the most significant links by changing the criteria of size and introducing a test of significance : 6.4.3.1 With France geo_network(mod, size = &quot;Rabs_ij&quot;, minsize = 2, test = &quot;Rchi_ij&quot;, mintest = 3.84) 6.4.3.2 Without France geo_network(mod2, size = &quot;Rabs_ij&quot;, minsize = 2, test = &quot;Rchi_ij&quot;, mintest = 3.84) "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
